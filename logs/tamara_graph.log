2025-10-03 11:56:39,038 - INFO - Current state after invoke: {'messages': [HumanMessage(content='run', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters sent to PLC. Checking validation...', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters accepted by PLC. Proceeding with safety checks...', additional_kwargs={}, response_metadata={}), AIMessage(content='Ready to start RUN operation.\n\nPlease verify:\n1. Required fluids are loaded in reservoirs\n2. Chip is correctly seated and oriented\n3. Manifold is properly connected\n4. Lid is CLOSED\n5. Lines are secure\n6. Drain bottle is in place\n7. Pressure supply is within specifications\n\nAI: Ready to start RUN operation.', additional_kwargs={}, response_metadata={})], 'intent': 'run', 'pending_action': 'run', 'last_mode_check': 1759485371.2587502}
2025-10-03 11:57:14,418 - INFO - Starting run operation...
2025-10-03 11:57:14,419 - INFO - creating snap7 client
2025-10-03 11:57:14,420 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 11:57:14,520 - INFO - PLC connected (192.168.0.1)
2025-10-03 11:57:14,521 - INFO - Clearing all command bits
2025-10-03 11:57:14,521 - INFO - Writing BOOL COMMANDS_RUN.b_START = False
2025-10-03 11:57:14,522 - INFO -   section: COMMANDS_RUN
2025-10-03 11:57:14,522 - INFO -   byte_offset: 258
2025-10-03 11:57:14,523 - INFO -   bit_offset: 0
2025-10-03 11:57:14,523 - INFO -   raw_start: 258.0
2025-10-03 11:57:14,589 - INFO - Successfully wrote COMMANDS_RUN.b_START = False
2025-10-03 11:57:14,609 - INFO - Writing BOOL COMMANDS_RUN.b_PAUSE_PLAY = False
2025-10-03 11:57:14,610 - INFO -   section: COMMANDS_RUN
2025-10-03 11:57:14,610 - INFO -   byte_offset: 258
2025-10-03 11:57:14,610 - INFO -   bit_offset: 1
2025-10-03 11:57:14,611 - INFO -   raw_start: 258.1
2025-10-03 11:57:14,663 - INFO - Successfully wrote COMMANDS_RUN.b_PAUSE_PLAY = False
2025-10-03 11:57:14,679 - INFO - Writing BOOL COMMANDS_RUN.b_CONFIRM = False
2025-10-03 11:57:14,679 - INFO -   section: COMMANDS_RUN
2025-10-03 11:57:14,680 - INFO -   byte_offset: 258
2025-10-03 11:57:14,680 - INFO -   bit_offset: 1
2025-10-03 11:57:14,680 - INFO -   raw_start: 258.2
2025-10-03 11:57:14,714 - INFO - Successfully wrote COMMANDS_RUN.b_CONFIRM = False
2025-10-03 11:57:14,757 - INFO - Writing BOOL COMMANDS_RUN.b_STOP = False
2025-10-03 11:57:14,757 - INFO -   section: COMMANDS_RUN
2025-10-03 11:57:14,758 - INFO -   byte_offset: 258
2025-10-03 11:57:14,758 - INFO -   bit_offset: 3
2025-10-03 11:57:14,758 - INFO -   raw_start: 258.3
2025-10-03 11:57:14,807 - INFO - Successfully wrote COMMANDS_RUN.b_STOP = False
2025-10-03 11:57:14,843 - INFO - Writing BOOL COMMANDS_CLEAN.b_START = False
2025-10-03 11:57:14,843 - INFO -   section: COMMANDS_CLEAN
2025-10-03 11:57:14,844 - INFO -   byte_offset: 260
2025-10-03 11:57:14,844 - INFO -   bit_offset: 0
2025-10-03 11:57:14,844 - INFO -   raw_start: 260.0
2025-10-03 11:57:14,898 - INFO - Successfully wrote COMMANDS_CLEAN.b_START = False
2025-10-03 11:57:14,945 - INFO - Writing BOOL COMMANDS_CLEAN.b_PAUSE_PLAY = False
2025-10-03 11:57:14,945 - INFO -   section: COMMANDS_CLEAN
2025-10-03 11:57:14,946 - INFO -   byte_offset: 260
2025-10-03 11:57:14,946 - INFO -   bit_offset: 1
2025-10-03 11:57:14,946 - INFO -   raw_start: 260.1
2025-10-03 11:57:15,071 - INFO - Successfully wrote COMMANDS_CLEAN.b_PAUSE_PLAY = False
2025-10-03 11:57:15,111 - INFO - Writing BOOL COMMANDS_CLEAN.b_CONFIRM = False
2025-10-03 11:57:15,112 - INFO -   section: COMMANDS_CLEAN
2025-10-03 11:57:15,112 - INFO -   byte_offset: 260
2025-10-03 11:57:15,113 - INFO -   bit_offset: 1
2025-10-03 11:57:15,113 - INFO -   raw_start: 260.2
2025-10-03 11:57:15,183 - INFO - Successfully wrote COMMANDS_CLEAN.b_CONFIRM = False
2025-10-03 11:57:15,243 - INFO - Writing BOOL COMMANDS_CLEAN.b_STOP = False
2025-10-03 11:57:15,244 - INFO -   section: COMMANDS_CLEAN
2025-10-03 11:57:15,245 - INFO -   byte_offset: 260
2025-10-03 11:57:15,245 - INFO -   bit_offset: 3
2025-10-03 11:57:15,246 - INFO -   raw_start: 260.3
2025-10-03 11:57:15,344 - INFO - Successfully wrote COMMANDS_CLEAN.b_STOP = False
2025-10-03 11:57:15,371 - INFO - Writing BOOL COMMANDS_PRESSURE_TEST.b_START = False
2025-10-03 11:57:15,372 - INFO -   section: COMMANDS_PRESSURE_TEST
2025-10-03 11:57:15,373 - INFO -   byte_offset: 262
2025-10-03 11:57:15,373 - INFO -   bit_offset: 0
2025-10-03 11:57:15,374 - INFO -   raw_start: 262.0
2025-10-03 11:57:15,452 - INFO - Successfully wrote COMMANDS_PRESSURE_TEST.b_START = False
2025-10-03 11:57:15,480 - INFO - Writing BOOL COMMANDS_PRESSURE_TEST.b_PAUSE_PLAY = False
2025-10-03 11:57:15,480 - INFO -   section: COMMANDS_PRESSURE_TEST
2025-10-03 11:57:15,480 - INFO -   byte_offset: 262
2025-10-03 11:57:15,480 - INFO -   bit_offset: 1
2025-10-03 11:57:15,482 - INFO -   raw_start: 262.1
2025-10-03 11:57:15,519 - INFO - Successfully wrote COMMANDS_PRESSURE_TEST.b_PAUSE_PLAY = False
2025-10-03 11:57:15,558 - INFO - Writing BOOL COMMANDS_PRESSURE_TEST.b_CONFIRM = False
2025-10-03 11:57:15,558 - INFO -   section: COMMANDS_PRESSURE_TEST
2025-10-03 11:57:15,558 - INFO -   byte_offset: 262
2025-10-03 11:57:15,559 - INFO -   bit_offset: 1
2025-10-03 11:57:15,559 - INFO -   raw_start: 262.2
2025-10-03 11:57:15,601 - INFO - Successfully wrote COMMANDS_PRESSURE_TEST.b_CONFIRM = False
2025-10-03 11:57:15,654 - INFO - Writing BOOL COMMANDS_PRESSURE_TEST.b_STOP = False
2025-10-03 11:57:15,654 - INFO -   section: COMMANDS_PRESSURE_TEST
2025-10-03 11:57:15,654 - INFO -   byte_offset: 262
2025-10-03 11:57:15,655 - INFO -   bit_offset: 3
2025-10-03 11:57:15,655 - INFO -   raw_start: 262.3
2025-10-03 11:57:15,703 - INFO - Successfully wrote COMMANDS_PRESSURE_TEST.b_STOP = False
2025-10-03 11:57:15,723 - INFO - All command bits cleared and verified
2025-10-03 11:57:15,723 - INFO - Pulsing COMMANDS_RUN.b_START to True
2025-10-03 11:57:15,723 - INFO - Writing BOOL COMMANDS_CLEAN.b_START = False
2025-10-03 11:57:15,724 - INFO -   section: COMMANDS_CLEAN
2025-10-03 11:57:15,724 - INFO -   byte_offset: 260
2025-10-03 11:57:15,724 - INFO -   bit_offset: 0
2025-10-03 11:57:15,725 - INFO -   raw_start: 260.0
2025-10-03 11:57:15,770 - INFO - Successfully wrote COMMANDS_CLEAN.b_START = False
2025-10-03 11:57:15,770 - INFO - Writing BOOL COMMANDS_PRESSURE_TEST.b_START = False
2025-10-03 11:57:15,770 - INFO -   section: COMMANDS_PRESSURE_TEST
2025-10-03 11:57:15,771 - INFO -   byte_offset: 262
2025-10-03 11:57:15,771 - INFO -   bit_offset: 0
2025-10-03 11:57:15,771 - INFO -   raw_start: 262.0
2025-10-03 11:57:15,825 - INFO - Successfully wrote COMMANDS_PRESSURE_TEST.b_START = False
2025-10-03 11:57:15,825 - INFO - Writing BOOL COMMANDS_RUN.b_START = True
2025-10-03 11:57:15,825 - INFO -   section: COMMANDS_RUN
2025-10-03 11:57:15,825 - INFO -   byte_offset: 258
2025-10-03 11:57:15,826 - INFO -   bit_offset: 0
2025-10-03 11:57:15,826 - INFO -   raw_start: 258.0
2025-10-03 11:57:15,936 - INFO - Successfully wrote COMMANDS_RUN.b_START = True
2025-10-03 11:57:15,977 - INFO - Command COMMANDS_RUN.b_START successfully set to True and verified
2025-10-03 11:57:16,050 - INFO - disconnecting snap7 client
2025-10-03 11:57:16,050 - INFO - PLC disconnected
2025-10-03 12:12:38,119 - INFO - Current state before invoke: {'messages': [HumanMessage(content='run', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters sent to PLC. Checking validation...', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters accepted by PLC. Proceeding with safety checks...', additional_kwargs={}, response_metadata={}), AIMessage(content='Ready to start RUN operation.\n\nPlease verify:\n1. Required fluids are loaded in reservoirs\n2. Chip is correctly seated and oriented\n3. Manifold is properly connected\n4. Lid is CLOSED\n5. Lines are secure\n6. Drain bottle is in place\n7. Pressure supply is within specifications\n\nAI: Ready to start RUN operation.', additional_kwargs={}, response_metadata={}), HumanMessage(content='pause the run', additional_kwargs={}, response_metadata={})], 'intent': 'run', 'pending_action': None, 'last_mode_check': 1759485371.2587502, 'confirmed': True}
2025-10-03 12:12:38,121 - INFO - Routing message: 'pause the run' (pending_action: None)
2025-10-03 12:12:38,122 - INFO - Handling PAUSE command...
2025-10-03 12:12:38,122 - INFO - creating snap7 client
2025-10-03 12:12:38,124 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 12:12:38,238 - INFO - PLC connected (192.168.0.1)
2025-10-03 12:12:38,238 - INFO - Reading current status...
2025-10-03 12:12:38,273 - INFO - Current status code: 2
2025-10-03 12:12:38,273 - INFO - Setting PAUSE_PLAY bit to TRUE for RUN mode...
2025-10-03 12:12:38,273 - INFO - Pulsing COMMANDS_RUN.b_PAUSE_PLAY to True
2025-10-03 12:12:38,274 - INFO - Writing BOOL COMMANDS_RUN.b_PAUSE_PLAY = True
2025-10-03 12:12:38,274 - INFO -   section: COMMANDS_RUN
2025-10-03 12:12:38,274 - INFO -   byte_offset: 258
2025-10-03 12:12:38,274 - INFO -   bit_offset: 1
2025-10-03 12:12:38,274 - INFO -   raw_start: 258.1
2025-10-03 12:12:38,358 - INFO - Successfully wrote COMMANDS_RUN.b_PAUSE_PLAY = True
2025-10-03 12:12:38,385 - INFO - Command COMMANDS_RUN.b_PAUSE_PLAY successfully set to True and verified
2025-10-03 12:12:38,385 - INFO - Disconnecting from PLC...
2025-10-03 12:12:38,386 - INFO - disconnecting snap7 client
2025-10-03 12:12:38,386 - INFO - PLC disconnected
2025-10-03 12:12:38,386 - INFO - destroying snap7 client
2025-10-03 12:12:38,387 - INFO - Current state after invoke: {'messages': [HumanMessage(content='run', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters sent to PLC. Checking validation...', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters accepted by PLC. Proceeding with safety checks...', additional_kwargs={}, response_metadata={}), AIMessage(content='Ready to start RUN operation.\n\nPlease verify:\n1. Required fluids are loaded in reservoirs\n2. Chip is correctly seated and oriented\n3. Manifold is properly connected\n4. Lid is CLOSED\n5. Lines are secure\n6. Drain bottle is in place\n7. Pressure supply is within specifications\n\nAI: Ready to start RUN operation.', additional_kwargs={}, response_metadata={}), HumanMessage(content='pause the run', additional_kwargs={}, response_metadata={}), AIMessage(content="RUN operation paused. Say 'play' to resume.", additional_kwargs={}, response_metadata={})], 'intent': 'other', 'pending_action': None, 'last_mode_check': 1759485371.2587502}
2025-10-03 12:12:47,861 - INFO - Current state before invoke: {'messages': [HumanMessage(content='run', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters sent to PLC. Checking validation...', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters accepted by PLC. Proceeding with safety checks...', additional_kwargs={}, response_metadata={}), AIMessage(content='Ready to start RUN operation.\n\nPlease verify:\n1. Required fluids are loaded in reservoirs\n2. Chip is correctly seated and oriented\n3. Manifold is properly connected\n4. Lid is CLOSED\n5. Lines are secure\n6. Drain bottle is in place\n7. Pressure supply is within specifications\n\nAI: Ready to start RUN operation.', additional_kwargs={}, response_metadata={}), HumanMessage(content='pause the run', additional_kwargs={}, response_metadata={}), AIMessage(content="RUN operation paused. Say 'play' to resume.", additional_kwargs={}, response_metadata={}), HumanMessage(content='play the run', additional_kwargs={}, response_metadata={})], 'intent': 'other', 'pending_action': None, 'last_mode_check': 1759485371.2587502}
2025-10-03 12:12:47,862 - INFO - Routing message: 'play the run' (pending_action: None)
2025-10-03 12:12:47,863 - INFO - Handling PLAY/RESUME command...
2025-10-03 12:12:47,863 - INFO - creating snap7 client
2025-10-03 12:12:47,864 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 12:12:47,931 - INFO - PLC connected (192.168.0.1)
2025-10-03 12:12:47,931 - INFO - Reading current status...
2025-10-03 12:12:47,978 - INFO - Current status code: 2
2025-10-03 12:12:47,978 - INFO - Setting PAUSE_PLAY bit to FALSE for RUN mode...
2025-10-03 12:12:47,978 - INFO - Pulsing COMMANDS_RUN.b_PAUSE_PLAY to False
2025-10-03 12:12:47,978 - INFO - Writing BOOL COMMANDS_RUN.b_PAUSE_PLAY = False
2025-10-03 12:12:47,978 - INFO -   section: COMMANDS_RUN
2025-10-03 12:12:47,980 - INFO -   byte_offset: 258
2025-10-03 12:12:47,980 - INFO -   bit_offset: 1
2025-10-03 12:12:47,980 - INFO -   raw_start: 258.1
2025-10-03 12:12:48,070 - INFO - Successfully wrote COMMANDS_RUN.b_PAUSE_PLAY = False
2025-10-03 12:12:48,111 - INFO - Command COMMANDS_RUN.b_PAUSE_PLAY successfully set to False and verified
2025-10-03 12:12:48,111 - INFO - Disconnecting from PLC...
2025-10-03 12:12:48,111 - INFO - disconnecting snap7 client
2025-10-03 12:12:48,112 - INFO - PLC disconnected
2025-10-03 12:12:48,112 - INFO - destroying snap7 client
2025-10-03 12:12:48,113 - INFO - Current state after invoke: {'messages': [HumanMessage(content='run', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters sent to PLC. Checking validation...', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters accepted by PLC. Proceeding with safety checks...', additional_kwargs={}, response_metadata={}), AIMessage(content='Ready to start RUN operation.\n\nPlease verify:\n1. Required fluids are loaded in reservoirs\n2. Chip is correctly seated and oriented\n3. Manifold is properly connected\n4. Lid is CLOSED\n5. Lines are secure\n6. Drain bottle is in place\n7. Pressure supply is within specifications\n\nAI: Ready to start RUN operation.', additional_kwargs={}, response_metadata={}), HumanMessage(content='pause the run', additional_kwargs={}, response_metadata={}), AIMessage(content="RUN operation paused. Say 'play' to resume.", additional_kwargs={}, response_metadata={}), HumanMessage(content='play the run', additional_kwargs={}, response_metadata={}), AIMessage(content='RUN operation resumed.', additional_kwargs={}, response_metadata={})], 'intent': 'other', 'pending_action': None, 'last_mode_check': 1759485371.2587502}
2025-10-03 12:12:53,733 - INFO - creating snap7 client
2025-10-03 12:12:53,733 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 12:12:53,812 - INFO - PLC connected (192.168.0.1)
2025-10-03 12:12:53,825 - INFO - Current operation mode: AGENTIC
2025-10-03 12:12:53,825 - INFO - disconnecting snap7 client
2025-10-03 12:12:53,825 - INFO - PLC disconnected
2025-10-03 12:12:53,825 - INFO - destroying snap7 client
2025-10-03 12:12:53,827 - INFO - creating snap7 client
2025-10-03 12:12:53,827 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 12:12:53,980 - INFO - PLC connected (192.168.0.1)
2025-10-03 12:12:54,114 - INFO - Machine mode set to 1
2025-10-03 12:12:54,114 - INFO - Machine mode set to READY
2025-10-03 12:12:54,114 - INFO - disconnecting snap7 client
2025-10-03 12:12:54,115 - INFO - PLC disconnected
2025-10-03 12:12:54,115 - INFO - destroying snap7 client
2025-10-03 12:13:03,116 - INFO - destroying snap7 client
2025-10-03 12:19:52,815 - INFO - creating snap7 client
2025-10-03 12:19:52,815 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 12:19:52,938 - INFO - PLC connected (192.168.0.1)
2025-10-03 12:19:52,976 - INFO - Current operation mode: AGENTIC
2025-10-03 12:19:52,976 - INFO - disconnecting snap7 client
2025-10-03 12:19:52,977 - INFO - PLC disconnected
2025-10-03 12:19:52,978 - INFO - destroying snap7 client
2025-10-03 12:19:52,978 - INFO - creating snap7 client
2025-10-03 12:19:52,979 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 12:19:53,117 - INFO - PLC connected (192.168.0.1)
2025-10-03 12:19:53,203 - INFO - Machine mode set to 1
2025-10-03 12:19:53,204 - INFO - Machine mode set to READY
2025-10-03 12:19:53,205 - INFO - disconnecting snap7 client
2025-10-03 12:19:53,205 - INFO - PLC disconnected
2025-10-03 12:19:53,206 - INFO - destroying snap7 client
2025-10-03 12:19:55,790 - INFO - creating snap7 client
2025-10-03 12:19:55,791 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 12:19:55,864 - INFO - PLC connected (192.168.0.1)
2025-10-03 12:19:55,898 - INFO - Current operation mode: AGENTIC
2025-10-03 12:19:55,898 - INFO - disconnecting snap7 client
2025-10-03 12:19:55,899 - INFO - PLC disconnected
2025-10-03 12:19:55,899 - INFO - destroying snap7 client
2025-10-03 12:19:55,900 - INFO - Current state before invoke: {'messages': [HumanMessage(content='run', additional_kwargs={}, response_metadata={})], 'intent': None, 'pending_action': None, 'confirmed': False, 'last_tool_result': None, 'last_mode_check': 1759486793.2068663}
2025-10-03 12:19:55,905 - INFO - Routing message: 'run' (pending_action: None)
2025-10-03 12:20:17,169 - INFO - creating snap7 client
2025-10-03 12:20:17,170 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 12:20:17,181 - ERROR - b' TCP : Unreachable peer'
2025-10-03 12:20:17,182 - ERROR - PLC connection failed, switching to simulator. Reason: b' TCP : Unreachable peer'
Traceback (most recent call last):
  File "C:\Users\NahashonOsinde\OneDrive - Inside Therapeutics\00_Documents\01_AI_Agent_Stuff\LangChain_Graph\TamaraAgent_LangGraph\7_Tamara_Agent\plc_tool.py", line 420, in connect
    self.client.connect(self.ip, self.rack, self.slot)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\NahashonOsinde\miniconda3\envs\LangChain\Lib\site-packages\snap7\client.py", line 197, in connect
    check_error(self._lib.Cli_ConnectTo(self._s7_client, c_char_p(address.encode()), c_int(rack), c_int(slot)))
  File "C:\Users\NahashonOsinde\miniconda3\envs\LangChain\Lib\site-packages\snap7\error.py", line 143, in check_error
    raise RuntimeError(error)
RuntimeError: b' TCP : Unreachable peer'
2025-10-03 12:20:17,185 - INFO - SIM: Connected
2025-10-03 12:20:17,185 - INFO - destroying snap7 client
2025-10-03 12:20:17,186 - INFO - SIM: Write DB9.DBB198 = ['0x0', '0x2']
2025-10-03 12:20:17,187 - INFO - SIM: Write DB9.DBB200 = ['0x0', '0x2']
2025-10-03 12:20:17,187 - INFO - SIM: Write DB9.DBB204 = ['0x40', '0x0', '0x0', '0x0']
2025-10-03 12:20:17,188 - INFO - SIM: Write DB9.DBB208 = ['0x0', '0x5']
2025-10-03 12:20:17,188 - INFO - SIM: Write DB9.DBB210 = ['0x40', '0x80', '0x0', '0x0']
2025-10-03 12:20:17,189 - INFO - SIM: Write DB9.DBB214 = ['0x41', '0xb0', '0x0', '0x0']
2025-10-03 12:20:17,189 - INFO - SIM: Write DB9.DBB218 = ['0x0', '0x1']
2025-10-03 12:20:17,190 - INFO - SIM: Write DB9.DBB220 = ['0x0', '0x1']
2025-10-03 12:20:17,190 - INFO - SIM: Write DB9.DBB242 = ['0x44', '0xfa', '0x0', '0x0']
2025-10-03 12:20:17,190 - INFO - SIM: Write DB9.DBB222 = ['0x0', '0x0']
2025-10-03 12:20:17,191 - INFO - SIM: Write DB9.DBB224 = ['0x10', '0x0', '0x0', '0x0', '0x0', '0x0', '0x0', '0x0', '0x0', '0x0', '0x0', '0x0', '0x0', '0x0', '0x0', '0x0', '0x0', '0x0']
2025-10-03 12:20:17,191 - INFO - SIM: Write DB9.DBB246 = ['0x0', '0x0', '0x0', '0x0']
2025-10-03 12:20:17,192 - INFO - SIM: Write DB9.DBB250 = ['0x0', '0x0', '0x0', '0x0']
2025-10-03 12:20:17,192 - INFO - SIM: Write DB9.DBB254 = ['0x0', '0x0', '0x0', '0x0']
2025-10-03 12:20:17,192 - INFO - SIM: Read DB9.DBB198 = ['0x0', '0x2']
2025-10-03 12:20:17,192 - INFO - SIM: Read DB9.DBB200 = ['0x0', '0x2']
2025-10-03 12:20:17,194 - INFO - SIM: Read DB9.DBB204 = ['0x40', '0x0', '0x0', '0x0']
2025-10-03 12:20:17,194 - INFO - SIM: Read DB9.DBB208 = ['0x0', '0x5']
2025-10-03 12:20:17,195 - INFO - SIM: Read DB9.DBB210 = ['0x40', '0x80', '0x0', '0x0']
2025-10-03 12:20:17,195 - INFO - SIM: Read DB9.DBB214 = ['0x41', '0xb0', '0x0', '0x0']
2025-10-03 12:20:17,195 - INFO - SIM: Read DB9.DBB218 = ['0x0', '0x1']
2025-10-03 12:20:17,196 - INFO - SIM: Read DB9.DBB220 = ['0x0', '0x1']
2025-10-03 12:20:17,196 - INFO - SIM: Read DB9.DBB242 = ['0x44', '0xfa', '0x0', '0x0']
2025-10-03 12:20:17,196 - INFO - SIM: Read DB9.DBB222 = ['0x0', '0x0']
2025-10-03 12:20:17,196 - INFO - SIM: Read DB9.DBB224 = ['0x10', '0x0']
2025-10-03 12:20:17,197 - INFO - SIM: Read DB9.DBB246 = ['0x0', '0x0', '0x0', '0x0']
2025-10-03 12:20:17,197 - INFO - SIM: Read DB9.DBB250 = ['0x0', '0x0', '0x0', '0x0']
2025-10-03 12:20:17,198 - INFO - SIM: Read DB9.DBB254 = ['0x0', '0x0', '0x0', '0x0']
2025-10-03 12:20:17,198 - INFO - Experiment payload written to PLC DB9:
- Operation: AGENTIC, Machine: RUN
- Core params: TFR=2.0, FRR=5, Vol=4.0, Temp=22.0, Chip=HERRINGBONE, Manifold=LARGE
- Solvent: ETHANOL
2025-10-03 12:20:17,198 - INFO - SIM: Read DB9.DBB202 = ['0x0']
2025-10-03 12:20:17,299 - INFO - SIM: Read DB9.DBB202 = ['0x0']
2025-10-03 12:20:17,400 - INFO - SIM: Read DB9.DBB202 = ['0x0']
2025-10-03 12:20:17,501 - INFO - SIM: Read DB9.DBB202 = ['0x0']
2025-10-03 12:20:17,601 - INFO - SIM: Read DB9.DBB202 = ['0x0']
2025-10-03 12:20:17,702 - INFO - SIM: Read DB9.DBB202 = ['0x0']
2025-10-03 12:20:17,803 - INFO - SIM: Read DB9.DBB202 = ['0x0']
2025-10-03 12:20:17,904 - INFO - SIM: Read DB9.DBB202 = ['0x0']
2025-10-03 12:20:18,006 - INFO - SIM: Read DB9.DBB202 = ['0x0']
2025-10-03 12:20:18,106 - INFO - SIM: Read DB9.DBB202 = ['0x0']
2025-10-03 12:20:18,208 - INFO - SIM: Read DB9.DBB202 = ['0x0']
2025-10-03 12:20:18,309 - INFO - SIM: Read DB9.DBB202 = ['0x0']
2025-10-03 12:20:18,409 - INFO - SIM: Read DB9.DBB202 = ['0x0']
2025-10-03 12:20:18,510 - INFO - SIM: Read DB9.DBB202 = ['0x0']
2025-10-03 12:20:18,611 - INFO - SIM: Read DB9.DBB202 = ['0x0']
2025-10-03 12:20:18,712 - INFO - SIM: Read DB9.DBB202 = ['0x0']
2025-10-03 12:20:18,812 - INFO - SIM: Read DB9.DBB202 = ['0x0']
2025-10-03 12:20:18,913 - INFO - SIM: Read DB9.DBB202 = ['0x0']
2025-10-03 12:20:19,014 - INFO - SIM: Read DB9.DBB202 = ['0x0']
2025-10-03 12:20:19,115 - INFO - SIM: Read DB9.DBB202 = ['0x0']
2025-10-03 12:20:19,215 - INFO - SIM: Read DB9.DBB202 = ['0x0']
2025-10-03 12:20:19,317 - INFO - SIM: Read DB9.DBB202 = ['0x0']
2025-10-03 12:20:19,419 - INFO - SIM: Read DB9.DBB202 = ['0x0']
2025-10-03 12:20:19,519 - INFO - SIM: Read DB9.DBB202 = ['0x0']
2025-10-03 12:20:19,620 - INFO - SIM: Read DB9.DBB202 = ['0x0']
2025-10-03 12:20:19,721 - INFO - SIM: Read DB9.DBB202 = ['0x0']
2025-10-03 12:20:19,822 - INFO - SIM: Read DB9.DBB202 = ['0x0']
2025-10-03 12:20:19,923 - INFO - SIM: Read DB9.DBB202 = ['0x0']
2025-10-03 12:20:20,024 - INFO - SIM: Read DB9.DBB202 = ['0x0']
2025-10-03 12:20:20,125 - INFO - SIM: Read DB9.DBB202 = ['0x0']
2025-10-03 12:20:20,226 - INFO - SIM: Disconnected
2025-10-03 12:20:20,226 - INFO - PLC disconnected
2025-10-03 12:20:20,227 - INFO - Current state after invoke: {'messages': [HumanMessage(content='run', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters sent to PLC. Checking validation...', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters rejected by PLC. Please modify your inputs to be within the allowed ranges. Check PLC panel for specific limits.', additional_kwargs={}, response_metadata={})], 'intent': 'run', 'pending_action': None, 'last_mode_check': 1759486793.2068663}
2025-10-03 12:20:40,026 - INFO - creating snap7 client
2025-10-03 12:20:40,027 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 12:20:40,153 - INFO - PLC connected (192.168.0.1)
2025-10-03 12:20:40,198 - INFO - Current operation mode: AGENTIC
2025-10-03 12:20:40,198 - INFO - disconnecting snap7 client
2025-10-03 12:20:40,199 - INFO - PLC disconnected
2025-10-03 12:20:40,199 - INFO - destroying snap7 client
2025-10-03 12:20:40,199 - INFO - Current state before invoke: {'messages': [HumanMessage(content='run', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters sent to PLC. Checking validation...', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters rejected by PLC. Please modify your inputs to be within the allowed ranges. Check PLC panel for specific limits.', additional_kwargs={}, response_metadata={}), HumanMessage(content='run', additional_kwargs={}, response_metadata={})], 'intent': 'run', 'pending_action': None, 'last_mode_check': 1759486793.2068663}
2025-10-03 12:20:40,201 - INFO - Routing message: 'run' (pending_action: None)
2025-10-03 12:21:02,864 - INFO - creating snap7 client
2025-10-03 12:21:02,865 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 12:21:02,986 - INFO - PLC connected (192.168.0.1)
2025-10-03 12:21:03,888 - INFO - Experiment payload written to PLC DB9:
- Operation: AGENTIC, Machine: RUN
- Core params: TFR=3.0, FRR=6, Vol=6.0, Temp=22.0, Chip=BAFFLE, Manifold=LARGE
- Solvent: ETHANOL
2025-10-03 12:21:03,922 - INFO - State after PLC validation: input_payload=InputPayload(tfr=3.0, frr=6, target_volume=6.0, temperature=22.0, chip_id=<ChipID.BAFFLE: 0>, manifold_id=<ManifoldID.LARGE: 1>, lab_pressure=2000.0, org_solvent_id=<OrgSolventID.ETHANOL: 0>, operation_mode=<OperationMode.AGENTIC: 2>, machine_mode=<MachineMode.RUN: 2>, custom_solvent=None), pending_action=run
2025-10-03 12:21:03,923 - INFO - disconnecting snap7 client
2025-10-03 12:21:03,923 - INFO - PLC disconnected
2025-10-03 12:21:03,923 - INFO - destroying snap7 client
2025-10-03 12:21:03,925 - INFO - Current state after invoke: {'messages': [HumanMessage(content='run', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters sent to PLC. Checking validation...', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters rejected by PLC. Please modify your inputs to be within the allowed ranges. Check PLC panel for specific limits.', additional_kwargs={}, response_metadata={}), HumanMessage(content='run', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters sent to PLC. Checking validation...', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters accepted by PLC. Proceeding with safety checks...', additional_kwargs={}, response_metadata={}), AIMessage(content='Ready to start RUN operation.\n\nPlease verify:\n1. Required fluids are loaded in reservoirs\n2. Chip is correctly seated and oriented\n3. Manifold is properly connected\n4. Lid is CLOSED\n5. Lines are secure\n6. Drain bottle is in place\n7. Pressure supply is within specifications\n\nAI: Ready to start RUN operation.', additional_kwargs={}, response_metadata={})], 'intent': 'run', 'pending_action': 'run', 'last_mode_check': 1759486793.2068663}
2025-10-03 12:21:26,985 - INFO - Current state before invoke: {'messages': [HumanMessage(content='run', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters sent to PLC. Checking validation...', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters rejected by PLC. Please modify your inputs to be within the allowed ranges. Check PLC panel for specific limits.', additional_kwargs={}, response_metadata={}), HumanMessage(content='run', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters sent to PLC. Checking validation...', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters accepted by PLC. Proceeding with safety checks...', additional_kwargs={}, response_metadata={}), AIMessage(content='Ready to start RUN operation.\n\nPlease verify:\n1. Required fluids are loaded in reservoirs\n2. Chip is correctly seated and oriented\n3. Manifold is properly connected\n4. Lid is CLOSED\n5. Lines are secure\n6. Drain bottle is in place\n7. Pressure supply is within specifications\n\nAI: Ready to start RUN operation.', additional_kwargs={}, response_metadata={}), HumanMessage(content='abort', additional_kwargs={}, response_metadata={})], 'intent': 'run', 'pending_action': 'run', 'last_mode_check': 1759486793.2068663}
2025-10-03 12:21:26,986 - INFO - Routing message: 'abort' (pending_action: run)
2025-10-03 12:21:27,323 - INFO - Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-10-03 12:21:28,089 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 12:21:28,838 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-10-03 12:21:30,270 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 12:21:30,283 - INFO - Current state after invoke: {'messages': [HumanMessage(content='run', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters sent to PLC. Checking validation...', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters rejected by PLC. Please modify your inputs to be within the allowed ranges. Check PLC panel for specific limits.', additional_kwargs={}, response_metadata={}), HumanMessage(content='run', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters sent to PLC. Checking validation...', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters accepted by PLC. Proceeding with safety checks...', additional_kwargs={}, response_metadata={}), AIMessage(content='Ready to start RUN operation.\n\nPlease verify:\n1. Required fluids are loaded in reservoirs\n2. Chip is correctly seated and oriented\n3. Manifold is properly connected\n4. Lid is CLOSED\n5. Lines are secure\n6. Drain bottle is in place\n7. Pressure supply is within specifications\n\nAI: Ready to start RUN operation.', additional_kwargs={}, response_metadata={}), HumanMessage(content='abort', additional_kwargs={}, response_metadata={}), AIMessage(content='To abort the current operation, please press the STOP button on the controller module. This will safely halt the process.', additional_kwargs={}, response_metadata={})], 'intent': 'ask_kb', 'pending_action': 'run', 'last_mode_check': 1759486793.2068663}
2025-10-03 12:21:36,322 - INFO - creating snap7 client
2025-10-03 12:21:36,322 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 12:21:36,427 - INFO - PLC connected (192.168.0.1)
2025-10-03 12:21:36,461 - INFO - Current operation mode: AGENTIC
2025-10-03 12:21:36,462 - INFO - disconnecting snap7 client
2025-10-03 12:21:36,463 - INFO - PLC disconnected
2025-10-03 12:21:36,463 - INFO - destroying snap7 client
2025-10-03 12:21:36,464 - INFO - creating snap7 client
2025-10-03 12:21:36,464 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 12:21:36,651 - INFO - PLC connected (192.168.0.1)
2025-10-03 12:21:36,741 - INFO - Machine mode set to 1
2025-10-03 12:21:36,741 - INFO - Machine mode set to READY
2025-10-03 12:21:36,742 - INFO - disconnecting snap7 client
2025-10-03 12:21:36,743 - INFO - PLC disconnected
2025-10-03 12:21:36,743 - INFO - destroying snap7 client
2025-10-03 12:24:03,798 - INFO - creating snap7 client
2025-10-03 12:24:03,799 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 12:24:03,886 - INFO - PLC connected (192.168.0.1)
2025-10-03 12:24:03,907 - INFO - Current operation mode: AGENTIC
2025-10-03 12:24:03,908 - INFO - disconnecting snap7 client
2025-10-03 12:24:03,909 - INFO - PLC disconnected
2025-10-03 12:24:03,909 - INFO - destroying snap7 client
2025-10-03 12:24:03,910 - INFO - creating snap7 client
2025-10-03 12:24:03,911 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 12:24:04,086 - INFO - PLC connected (192.168.0.1)
2025-10-03 12:24:04,156 - INFO - Machine mode set to 1
2025-10-03 12:24:04,156 - INFO - Machine mode set to READY
2025-10-03 12:24:04,157 - INFO - disconnecting snap7 client
2025-10-03 12:24:04,158 - INFO - PLC disconnected
2025-10-03 12:24:04,159 - INFO - destroying snap7 client
2025-10-03 12:24:08,806 - INFO - creating snap7 client
2025-10-03 12:24:08,807 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 12:24:08,893 - INFO - PLC connected (192.168.0.1)
2025-10-03 12:24:08,942 - INFO - Current operation mode: AGENTIC
2025-10-03 12:24:08,943 - INFO - disconnecting snap7 client
2025-10-03 12:24:08,944 - INFO - PLC disconnected
2025-10-03 12:24:08,944 - INFO - destroying snap7 client
2025-10-03 12:24:08,945 - INFO - Current state before invoke: {'messages': [HumanMessage(content='run', additional_kwargs={}, response_metadata={})], 'intent': None, 'pending_action': None, 'confirmed': False, 'last_tool_result': None, 'last_mode_check': 1759487044.1596758}
2025-10-03 12:24:08,948 - INFO - Routing message: 'run' (pending_action: None)
2025-10-03 12:24:32,318 - INFO - creating snap7 client
2025-10-03 12:24:32,319 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 12:24:32,435 - INFO - PLC connected (192.168.0.1)
2025-10-03 12:24:33,324 - INFO - Experiment parameters written to PLC DB9 (no machine mode set):
- Operation: AGENTIC
- Core params: TFR=3.0, FRR=6, Vol=7.0, Temp=21.0, Chip=HERRINGBONE, Manifold=LARGE
- Solvent: ETHANOL
2025-10-03 12:24:33,368 - INFO - State after PLC validation: input_payload=InputPayload(tfr=3.0, frr=6, target_volume=7.0, temperature=21.0, chip_id=<ChipID.HERRINGBONE: 1>, manifold_id=<ManifoldID.LARGE: 1>, lab_pressure=2000.0, org_solvent_id=<OrgSolventID.ETHANOL: 0>, operation_mode=<OperationMode.AGENTIC: 2>, machine_mode=<MachineMode.RUN: 2>, custom_solvent=None), pending_action=run
2025-10-03 12:24:33,368 - INFO - disconnecting snap7 client
2025-10-03 12:24:33,369 - INFO - PLC disconnected
2025-10-03 12:24:33,369 - INFO - destroying snap7 client
2025-10-03 12:24:33,370 - INFO - Current state after invoke: {'messages': [HumanMessage(content='run', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters sent to PLC. Checking validation...', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters accepted by PLC. Proceeding with safety checks...', additional_kwargs={}, response_metadata={}), AIMessage(content='Ready to start RUN operation.\n\nPlease verify:\n1. Required fluids are loaded in reservoirs\n2. Chip is correctly seated and oriented\n3. Manifold is properly connected\n4. Lid is CLOSED\n5. Lines are secure\n6. Drain bottle is in place\n7. Pressure supply is within specifications\n\nAI: Ready to start RUN operation.', additional_kwargs={}, response_metadata={})], 'intent': 'run', 'pending_action': 'run', 'last_mode_check': 1759487044.1596758}
2025-10-03 12:24:40,508 - INFO - Starting run operation...
2025-10-03 12:24:40,509 - INFO - creating snap7 client
2025-10-03 12:24:40,509 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 12:24:40,591 - INFO - PLC connected (192.168.0.1)
2025-10-03 12:24:40,592 - INFO - disconnecting snap7 client
2025-10-03 12:24:40,593 - INFO - PLC disconnected
2025-10-03 12:24:40,593 - INFO - destroying snap7 client
2025-10-03 12:29:02,569 - INFO - creating snap7 client
2025-10-03 12:29:02,570 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 12:29:02,647 - INFO - PLC connected (192.168.0.1)
2025-10-03 12:29:02,658 - INFO - Current operation mode: AGENTIC
2025-10-03 12:29:02,658 - INFO - disconnecting snap7 client
2025-10-03 12:29:02,659 - INFO - PLC disconnected
2025-10-03 12:29:02,659 - INFO - destroying snap7 client
2025-10-03 12:29:02,660 - INFO - creating snap7 client
2025-10-03 12:29:02,660 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 12:29:02,809 - INFO - PLC connected (192.168.0.1)
2025-10-03 12:29:02,885 - INFO - Machine mode set to 1
2025-10-03 12:29:02,885 - INFO - Machine mode set to READY
2025-10-03 12:29:02,886 - INFO - disconnecting snap7 client
2025-10-03 12:29:02,886 - INFO - PLC disconnected
2025-10-03 12:29:02,887 - INFO - destroying snap7 client
2025-10-03 12:29:05,605 - INFO - creating snap7 client
2025-10-03 12:29:05,605 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 12:29:05,674 - INFO - PLC connected (192.168.0.1)
2025-10-03 12:29:05,718 - INFO - Current operation mode: AGENTIC
2025-10-03 12:29:05,718 - INFO - disconnecting snap7 client
2025-10-03 12:29:05,719 - INFO - PLC disconnected
2025-10-03 12:29:05,719 - INFO - destroying snap7 client
2025-10-03 12:29:05,720 - INFO - Current state before invoke: {'messages': [HumanMessage(content='run', additional_kwargs={}, response_metadata={})], 'intent': None, 'pending_action': None, 'input_payload': None, 'confirmed': False, 'last_tool_result': None, 'last_mode_check': 1759487342.8874376}
2025-10-03 12:29:05,723 - INFO - Routing message: 'run' (pending_action: None)
2025-10-03 12:29:27,318 - INFO - creating snap7 client
2025-10-03 12:29:27,319 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 12:29:27,388 - INFO - PLC connected (192.168.0.1)
2025-10-03 12:29:28,231 - INFO - Experiment parameters written to PLC DB9 (no machine mode set):
- Operation: AGENTIC
- Core params: TFR=3.0, FRR=6, Vol=8.0, Temp=22.0, Chip=BAFFLE, Manifold=LARGE
- Solvent: ETHANOL
2025-10-03 12:29:28,258 - INFO - State after PLC validation: input_payload=InputPayload(tfr=3.0, frr=6, target_volume=8.0, temperature=22.0, chip_id=<ChipID.BAFFLE: 0>, manifold_id=<ManifoldID.LARGE: 1>, lab_pressure=2000.0, org_solvent_id=<OrgSolventID.ETHANOL: 0>, operation_mode=<OperationMode.AGENTIC: 2>, machine_mode=<MachineMode.RUN: 2>, custom_solvent=None), pending_action=run
2025-10-03 12:29:28,258 - INFO - disconnecting snap7 client
2025-10-03 12:29:28,259 - INFO - PLC disconnected
2025-10-03 12:29:28,259 - INFO - destroying snap7 client
2025-10-03 12:29:28,261 - INFO - Current state after invoke: {'messages': [HumanMessage(content='run', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters sent to PLC. Checking validation...', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters accepted by PLC. Proceeding with safety checks...', additional_kwargs={}, response_metadata={}), AIMessage(content='Ready to start RUN operation.\n\nPlease verify:\n1. Required fluids are loaded in reservoirs\n2. Chip is correctly seated and oriented\n3. Manifold is properly connected\n4. Lid is CLOSED\n5. Lines are secure\n6. Drain bottle is in place\n7. Pressure supply is within specifications\n\nAI: Ready to start RUN operation.', additional_kwargs={}, response_metadata={})], 'intent': 'run', 'pending_action': 'run', 'input_payload': InputPayload(tfr=3.0, frr=6, target_volume=8.0, temperature=22.0, chip_id=<ChipID.BAFFLE: 0>, manifold_id=<ManifoldID.LARGE: 1>, lab_pressure=2000.0, org_solvent_id=<OrgSolventID.ETHANOL: 0>, operation_mode=<OperationMode.AGENTIC: 2>, machine_mode=<MachineMode.RUN: 2>, custom_solvent=None), 'last_mode_check': 1759487342.8874376}
2025-10-03 12:29:33,640 - INFO - Starting run operation...
2025-10-03 12:29:33,640 - INFO - creating snap7 client
2025-10-03 12:29:33,641 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 12:29:33,712 - INFO - PLC connected (192.168.0.1)
2025-10-03 12:29:33,712 - INFO - Clearing all command bits
2025-10-03 12:29:33,713 - INFO - Writing BOOL COMMANDS_RUN.b_START = False
2025-10-03 12:29:33,713 - INFO -   section: COMMANDS_RUN
2025-10-03 12:29:33,714 - INFO -   byte_offset: 258
2025-10-03 12:29:33,714 - INFO -   bit_offset: 0
2025-10-03 12:29:33,715 - INFO -   raw_start: 258.0
2025-10-03 12:29:33,796 - INFO - Successfully wrote COMMANDS_RUN.b_START = False
2025-10-03 12:29:33,834 - INFO - Writing BOOL COMMANDS_RUN.b_PAUSE_PLAY = False
2025-10-03 12:29:33,834 - INFO -   section: COMMANDS_RUN
2025-10-03 12:29:33,835 - INFO -   byte_offset: 258
2025-10-03 12:29:33,835 - INFO -   bit_offset: 1
2025-10-03 12:29:33,836 - INFO -   raw_start: 258.1
2025-10-03 12:29:33,938 - INFO - Successfully wrote COMMANDS_RUN.b_PAUSE_PLAY = False
2025-10-03 12:29:33,972 - INFO - Writing BOOL COMMANDS_RUN.b_CONFIRM = False
2025-10-03 12:29:33,972 - INFO -   section: COMMANDS_RUN
2025-10-03 12:29:33,973 - INFO -   byte_offset: 258
2025-10-03 12:29:33,974 - INFO -   bit_offset: 1
2025-10-03 12:29:33,974 - INFO -   raw_start: 258.2
2025-10-03 12:29:34,031 - INFO - Successfully wrote COMMANDS_RUN.b_CONFIRM = False
2025-10-03 12:29:34,097 - INFO - Writing BOOL COMMANDS_RUN.b_STOP = False
2025-10-03 12:29:34,098 - INFO -   section: COMMANDS_RUN
2025-10-03 12:29:34,099 - INFO -   byte_offset: 258
2025-10-03 12:29:34,100 - INFO -   bit_offset: 3
2025-10-03 12:29:34,102 - INFO -   raw_start: 258.3
2025-10-03 12:29:34,174 - INFO - Successfully wrote COMMANDS_RUN.b_STOP = False
2025-10-03 12:29:34,222 - INFO - Writing BOOL COMMANDS_CLEAN.b_START = False
2025-10-03 12:29:34,223 - INFO -   section: COMMANDS_CLEAN
2025-10-03 12:29:34,223 - INFO -   byte_offset: 260
2025-10-03 12:29:34,224 - INFO -   bit_offset: 0
2025-10-03 12:29:34,224 - INFO -   raw_start: 260.0
2025-10-03 12:29:34,268 - INFO - Successfully wrote COMMANDS_CLEAN.b_START = False
2025-10-03 12:29:34,289 - INFO - Writing BOOL COMMANDS_CLEAN.b_PAUSE_PLAY = False
2025-10-03 12:29:34,289 - INFO -   section: COMMANDS_CLEAN
2025-10-03 12:29:34,289 - INFO -   byte_offset: 260
2025-10-03 12:29:34,291 - INFO -   bit_offset: 1
2025-10-03 12:29:34,291 - INFO -   raw_start: 260.1
2025-10-03 12:29:34,315 - INFO - Successfully wrote COMMANDS_CLEAN.b_PAUSE_PLAY = False
2025-10-03 12:29:34,361 - INFO - Writing BOOL COMMANDS_CLEAN.b_CONFIRM = False
2025-10-03 12:29:34,361 - INFO -   section: COMMANDS_CLEAN
2025-10-03 12:29:34,362 - INFO -   byte_offset: 260
2025-10-03 12:29:34,362 - INFO -   bit_offset: 1
2025-10-03 12:29:34,362 - INFO -   raw_start: 260.2
2025-10-03 12:29:34,413 - INFO - Successfully wrote COMMANDS_CLEAN.b_CONFIRM = False
2025-10-03 12:29:34,439 - INFO - Writing BOOL COMMANDS_CLEAN.b_STOP = False
2025-10-03 12:29:34,440 - INFO -   section: COMMANDS_CLEAN
2025-10-03 12:29:34,440 - INFO -   byte_offset: 260
2025-10-03 12:29:34,440 - INFO -   bit_offset: 3
2025-10-03 12:29:34,441 - INFO -   raw_start: 260.3
2025-10-03 12:29:34,499 - INFO - Successfully wrote COMMANDS_CLEAN.b_STOP = False
2025-10-03 12:29:34,527 - INFO - Writing BOOL COMMANDS_PRESSURE_TEST.b_START = False
2025-10-03 12:29:34,527 - INFO -   section: COMMANDS_PRESSURE_TEST
2025-10-03 12:29:34,527 - INFO -   byte_offset: 262
2025-10-03 12:29:34,527 - INFO -   bit_offset: 0
2025-10-03 12:29:34,528 - INFO -   raw_start: 262.0
2025-10-03 12:29:34,593 - INFO - Successfully wrote COMMANDS_PRESSURE_TEST.b_START = False
2025-10-03 12:29:34,633 - INFO - Writing BOOL COMMANDS_PRESSURE_TEST.b_PAUSE_PLAY = False
2025-10-03 12:29:34,633 - INFO -   section: COMMANDS_PRESSURE_TEST
2025-10-03 12:29:34,634 - INFO -   byte_offset: 262
2025-10-03 12:29:34,634 - INFO -   bit_offset: 1
2025-10-03 12:29:34,634 - INFO -   raw_start: 262.1
2025-10-03 12:29:34,709 - INFO - Successfully wrote COMMANDS_PRESSURE_TEST.b_PAUSE_PLAY = False
2025-10-03 12:29:34,750 - INFO - Writing BOOL COMMANDS_PRESSURE_TEST.b_CONFIRM = False
2025-10-03 12:29:34,750 - INFO -   section: COMMANDS_PRESSURE_TEST
2025-10-03 12:29:34,750 - INFO -   byte_offset: 262
2025-10-03 12:29:34,751 - INFO -   bit_offset: 1
2025-10-03 12:29:34,751 - INFO -   raw_start: 262.2
2025-10-03 12:29:34,838 - INFO - Successfully wrote COMMANDS_PRESSURE_TEST.b_CONFIRM = False
2025-10-03 12:29:34,886 - INFO - Writing BOOL COMMANDS_PRESSURE_TEST.b_STOP = False
2025-10-03 12:29:34,886 - INFO -   section: COMMANDS_PRESSURE_TEST
2025-10-03 12:29:34,886 - INFO -   byte_offset: 262
2025-10-03 12:29:34,886 - INFO -   bit_offset: 3
2025-10-03 12:29:34,887 - INFO -   raw_start: 262.3
2025-10-03 12:29:34,936 - INFO - Successfully wrote COMMANDS_PRESSURE_TEST.b_STOP = False
2025-10-03 12:29:34,990 - INFO - All command bits cleared and verified
2025-10-03 12:29:34,990 - INFO - Writing BOOL COMMANDS_RUN.b_START = True
2025-10-03 12:29:34,991 - INFO -   section: COMMANDS_RUN
2025-10-03 12:29:34,991 - INFO -   byte_offset: 258
2025-10-03 12:29:34,991 - INFO -   bit_offset: 0
2025-10-03 12:29:34,992 - INFO -   raw_start: 258.0
2025-10-03 12:29:35,063 - INFO - Successfully wrote COMMANDS_RUN.b_START = True
2025-10-03 12:29:35,129 - INFO - Operation started: RUN mode with START bit set
2025-10-03 12:29:35,212 - INFO - disconnecting snap7 client
2025-10-03 12:29:35,212 - INFO - PLC disconnected
2025-10-03 12:29:41,852 - INFO - creating snap7 client
2025-10-03 12:29:41,853 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 12:29:41,973 - INFO - PLC connected (192.168.0.1)
2025-10-03 12:29:42,029 - INFO - Current operation mode: AGENTIC
2025-10-03 12:29:42,029 - INFO - disconnecting snap7 client
2025-10-03 12:29:42,030 - INFO - PLC disconnected
2025-10-03 12:29:42,031 - INFO - destroying snap7 client
2025-10-03 12:29:42,031 - INFO - Current state before invoke: {'messages': [HumanMessage(content='run', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters sent to PLC. Checking validation...', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters accepted by PLC. Proceeding with safety checks...', additional_kwargs={}, response_metadata={}), AIMessage(content='Ready to start RUN operation.\n\nPlease verify:\n1. Required fluids are loaded in reservoirs\n2. Chip is correctly seated and oriented\n3. Manifold is properly connected\n4. Lid is CLOSED\n5. Lines are secure\n6. Drain bottle is in place\n7. Pressure supply is within specifications\n\nAI: Ready to start RUN operation.', additional_kwargs={}, response_metadata={}), HumanMessage(content='pause', additional_kwargs={}, response_metadata={})], 'intent': 'run', 'pending_action': None, 'input_payload': InputPayload(tfr=3.0, frr=6, target_volume=8.0, temperature=22.0, chip_id=<ChipID.BAFFLE: 0>, manifold_id=<ManifoldID.LARGE: 1>, lab_pressure=2000.0, org_solvent_id=<OrgSolventID.ETHANOL: 0>, operation_mode=<OperationMode.AGENTIC: 2>, machine_mode=<MachineMode.RUN: 2>, custom_solvent=None), 'last_mode_check': 1759487342.8874376, 'confirmed': True}
2025-10-03 12:29:42,032 - INFO - Routing message: 'pause' (pending_action: None)
2025-10-03 12:29:42,033 - INFO - Handling PAUSE command...
2025-10-03 12:29:42,033 - INFO - creating snap7 client
2025-10-03 12:29:42,033 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 12:29:42,188 - INFO - PLC connected (192.168.0.1)
2025-10-03 12:29:42,188 - INFO - Reading current status...
2025-10-03 12:29:42,212 - INFO - Current status code: 2
2025-10-03 12:29:42,212 - INFO - Setting PAUSE_PLAY bit to TRUE for RUN mode...
2025-10-03 12:29:42,212 - INFO - Pulsing COMMANDS_RUN.b_PAUSE_PLAY to True
2025-10-03 12:29:42,213 - INFO - Writing BOOL COMMANDS_RUN.b_PAUSE_PLAY = True
2025-10-03 12:29:42,213 - INFO -   section: COMMANDS_RUN
2025-10-03 12:29:42,213 - INFO -   byte_offset: 258
2025-10-03 12:29:42,214 - INFO -   bit_offset: 1
2025-10-03 12:29:42,214 - INFO -   raw_start: 258.1
2025-10-03 12:29:42,284 - INFO - Successfully wrote COMMANDS_RUN.b_PAUSE_PLAY = True
2025-10-03 12:29:42,323 - INFO - Command COMMANDS_RUN.b_PAUSE_PLAY successfully set to True and verified
2025-10-03 12:29:42,323 - INFO - Disconnecting from PLC...
2025-10-03 12:29:42,324 - INFO - disconnecting snap7 client
2025-10-03 12:29:42,325 - INFO - PLC disconnected
2025-10-03 12:29:42,325 - INFO - destroying snap7 client
2025-10-03 12:29:42,326 - INFO - Current state after invoke: {'messages': [HumanMessage(content='run', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters sent to PLC. Checking validation...', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters accepted by PLC. Proceeding with safety checks...', additional_kwargs={}, response_metadata={}), AIMessage(content='Ready to start RUN operation.\n\nPlease verify:\n1. Required fluids are loaded in reservoirs\n2. Chip is correctly seated and oriented\n3. Manifold is properly connected\n4. Lid is CLOSED\n5. Lines are secure\n6. Drain bottle is in place\n7. Pressure supply is within specifications\n\nAI: Ready to start RUN operation.', additional_kwargs={}, response_metadata={}), HumanMessage(content='pause', additional_kwargs={}, response_metadata={}), AIMessage(content="RUN operation paused. Say 'play' to resume.", additional_kwargs={}, response_metadata={})], 'intent': 'other', 'pending_action': None, 'input_payload': InputPayload(tfr=3.0, frr=6, target_volume=8.0, temperature=22.0, chip_id=<ChipID.BAFFLE: 0>, manifold_id=<ManifoldID.LARGE: 1>, lab_pressure=2000.0, org_solvent_id=<OrgSolventID.ETHANOL: 0>, operation_mode=<OperationMode.AGENTIC: 2>, machine_mode=<MachineMode.RUN: 2>, custom_solvent=None), 'last_mode_check': 1759487342.8874376}
2025-10-03 12:29:45,812 - INFO - creating snap7 client
2025-10-03 12:29:45,812 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 12:29:45,869 - INFO - PLC connected (192.168.0.1)
2025-10-03 12:29:45,893 - INFO - Current operation mode: AGENTIC
2025-10-03 12:29:45,894 - INFO - disconnecting snap7 client
2025-10-03 12:29:45,894 - INFO - PLC disconnected
2025-10-03 12:29:45,895 - INFO - destroying snap7 client
2025-10-03 12:29:45,895 - INFO - Current state before invoke: {'messages': [HumanMessage(content='run', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters sent to PLC. Checking validation...', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters accepted by PLC. Proceeding with safety checks...', additional_kwargs={}, response_metadata={}), AIMessage(content='Ready to start RUN operation.\n\nPlease verify:\n1. Required fluids are loaded in reservoirs\n2. Chip is correctly seated and oriented\n3. Manifold is properly connected\n4. Lid is CLOSED\n5. Lines are secure\n6. Drain bottle is in place\n7. Pressure supply is within specifications\n\nAI: Ready to start RUN operation.', additional_kwargs={}, response_metadata={}), HumanMessage(content='pause', additional_kwargs={}, response_metadata={}), AIMessage(content="RUN operation paused. Say 'play' to resume.", additional_kwargs={}, response_metadata={}), HumanMessage(content='play', additional_kwargs={}, response_metadata={})], 'intent': 'other', 'pending_action': None, 'input_payload': InputPayload(tfr=3.0, frr=6, target_volume=8.0, temperature=22.0, chip_id=<ChipID.BAFFLE: 0>, manifold_id=<ManifoldID.LARGE: 1>, lab_pressure=2000.0, org_solvent_id=<OrgSolventID.ETHANOL: 0>, operation_mode=<OperationMode.AGENTIC: 2>, machine_mode=<MachineMode.RUN: 2>, custom_solvent=None), 'last_mode_check': 1759487342.8874376}
2025-10-03 12:29:45,896 - INFO - Routing message: 'play' (pending_action: None)
2025-10-03 12:29:45,896 - INFO - Handling PLAY/RESUME command...
2025-10-03 12:29:45,897 - INFO - creating snap7 client
2025-10-03 12:29:45,897 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 12:29:46,047 - INFO - PLC connected (192.168.0.1)
2025-10-03 12:29:46,047 - INFO - Reading current status...
2025-10-03 12:29:46,085 - INFO - Current status code: 2
2025-10-03 12:29:46,085 - INFO - Setting PAUSE_PLAY bit to FALSE for RUN mode...
2025-10-03 12:29:46,085 - INFO - Pulsing COMMANDS_RUN.b_PAUSE_PLAY to False
2025-10-03 12:29:46,085 - INFO - Writing BOOL COMMANDS_RUN.b_PAUSE_PLAY = False
2025-10-03 12:29:46,086 - INFO -   section: COMMANDS_RUN
2025-10-03 12:29:46,086 - INFO -   byte_offset: 258
2025-10-03 12:29:46,086 - INFO -   bit_offset: 1
2025-10-03 12:29:46,086 - INFO -   raw_start: 258.1
2025-10-03 12:29:46,152 - INFO - Successfully wrote COMMANDS_RUN.b_PAUSE_PLAY = False
2025-10-03 12:29:46,180 - INFO - Command COMMANDS_RUN.b_PAUSE_PLAY successfully set to False and verified
2025-10-03 12:29:46,180 - INFO - Disconnecting from PLC...
2025-10-03 12:29:46,181 - INFO - disconnecting snap7 client
2025-10-03 12:29:46,181 - INFO - PLC disconnected
2025-10-03 12:29:46,181 - INFO - destroying snap7 client
2025-10-03 12:29:46,182 - INFO - Current state after invoke: {'messages': [HumanMessage(content='run', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters sent to PLC. Checking validation...', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters accepted by PLC. Proceeding with safety checks...', additional_kwargs={}, response_metadata={}), AIMessage(content='Ready to start RUN operation.\n\nPlease verify:\n1. Required fluids are loaded in reservoirs\n2. Chip is correctly seated and oriented\n3. Manifold is properly connected\n4. Lid is CLOSED\n5. Lines are secure\n6. Drain bottle is in place\n7. Pressure supply is within specifications\n\nAI: Ready to start RUN operation.', additional_kwargs={}, response_metadata={}), HumanMessage(content='pause', additional_kwargs={}, response_metadata={}), AIMessage(content="RUN operation paused. Say 'play' to resume.", additional_kwargs={}, response_metadata={}), HumanMessage(content='play', additional_kwargs={}, response_metadata={}), AIMessage(content='RUN operation resumed.', additional_kwargs={}, response_metadata={})], 'intent': 'other', 'pending_action': None, 'input_payload': InputPayload(tfr=3.0, frr=6, target_volume=8.0, temperature=22.0, chip_id=<ChipID.BAFFLE: 0>, manifold_id=<ManifoldID.LARGE: 1>, lab_pressure=2000.0, org_solvent_id=<OrgSolventID.ETHANOL: 0>, operation_mode=<OperationMode.AGENTIC: 2>, machine_mode=<MachineMode.RUN: 2>, custom_solvent=None), 'last_mode_check': 1759487342.8874376}
2025-10-03 12:29:51,189 - INFO - creating snap7 client
2025-10-03 12:29:51,190 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 12:29:51,305 - INFO - PLC connected (192.168.0.1)
2025-10-03 12:29:51,339 - INFO - Current operation mode: AGENTIC
2025-10-03 12:29:51,339 - INFO - disconnecting snap7 client
2025-10-03 12:29:51,340 - INFO - PLC disconnected
2025-10-03 12:29:51,340 - INFO - destroying snap7 client
2025-10-03 12:29:51,341 - INFO - creating snap7 client
2025-10-03 12:29:51,341 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 12:29:51,476 - INFO - PLC connected (192.168.0.1)
2025-10-03 12:29:51,546 - INFO - Machine mode set to 1
2025-10-03 12:29:51,546 - INFO - Machine mode set to READY
2025-10-03 12:29:51,546 - INFO - disconnecting snap7 client
2025-10-03 12:29:51,547 - INFO - PLC disconnected
2025-10-03 12:29:51,547 - INFO - destroying snap7 client
2025-10-03 12:30:09,722 - INFO - destroying snap7 client
2025-10-03 12:30:48,178 - INFO - creating snap7 client
2025-10-03 12:30:48,178 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 12:30:48,181 - ERROR - b' TCP : Unreachable peer'
2025-10-03 12:30:48,182 - ERROR - PLC connection failed, switching to simulator. Reason: b' TCP : Unreachable peer'
Traceback (most recent call last):
  File "C:\Users\NahashonOsinde\OneDrive - Inside Therapeutics\00_Documents\01_AI_Agent_Stuff\LangChain_Graph\TamaraAgent_LangGraph\7_Tamara_Agent\plc_tool.py", line 420, in connect
    self.client.connect(self.ip, self.rack, self.slot)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\NahashonOsinde\miniconda3\envs\LangChain\Lib\site-packages\snap7\client.py", line 197, in connect
    check_error(self._lib.Cli_ConnectTo(self._s7_client, c_char_p(address.encode()), c_int(rack), c_int(slot)))
  File "C:\Users\NahashonOsinde\miniconda3\envs\LangChain\Lib\site-packages\snap7\error.py", line 143, in check_error
    raise RuntimeError(error)
RuntimeError: b' TCP : Unreachable peer'
2025-10-03 12:30:48,186 - INFO - SIM: Connected
2025-10-03 12:30:48,187 - INFO - destroying snap7 client
2025-10-03 12:30:48,187 - INFO - SIM: Read DB9.DBB198 = ['0x0', '0x0']
2025-10-03 12:30:48,187 - ERROR - Failed to read operation mode: Invalid operation mode value: 0
Traceback (most recent call last):
  File "C:\Users\NahashonOsinde\OneDrive - Inside Therapeutics\00_Documents\01_AI_Agent_Stuff\LangChain_Graph\TamaraAgent_LangGraph\7_Tamara_Agent\plc_tool.py", line 888, in read_operation_mode
    return OperationMode(mode)
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\NahashonOsinde\miniconda3\envs\LangChain\Lib\enum.py", line 714, in __call__
    return cls.__new__(cls, value)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\NahashonOsinde\miniconda3\envs\LangChain\Lib\enum.py", line 1137, in __new__
    raise ve_exc
ValueError: 0 is not a valid OperationMode

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\NahashonOsinde\OneDrive - Inside Therapeutics\00_Documents\01_AI_Agent_Stuff\LangChain_Graph\TamaraAgent_LangGraph\7_Tamara_Agent\tamara_graph.py", line 1138, in check_operation_mode
    mode = plc.read_operation_mode()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\NahashonOsinde\OneDrive - Inside Therapeutics\00_Documents\01_AI_Agent_Stuff\LangChain_Graph\TamaraAgent_LangGraph\7_Tamara_Agent\plc_tool.py", line 890, in read_operation_mode
    raise ValueError(f"Invalid operation mode value: {mode}")
ValueError: Invalid operation mode value: 0
2025-10-03 12:30:48,195 - INFO - SIM: Disconnected
2025-10-03 12:30:48,196 - INFO - PLC disconnected
2025-10-03 12:31:00,151 - INFO - creating snap7 client
2025-10-03 12:31:00,152 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 12:31:00,227 - INFO - PLC connected (192.168.0.1)
2025-10-03 12:31:00,251 - INFO - Current operation mode: AGENTIC
2025-10-03 12:31:00,251 - INFO - disconnecting snap7 client
2025-10-03 12:31:00,252 - INFO - PLC disconnected
2025-10-03 12:31:00,252 - INFO - destroying snap7 client
2025-10-03 12:31:00,253 - INFO - creating snap7 client
2025-10-03 12:31:00,253 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 12:31:00,437 - INFO - PLC connected (192.168.0.1)
2025-10-03 12:31:00,511 - INFO - Machine mode set to 1
2025-10-03 12:31:00,511 - INFO - Machine mode set to READY
2025-10-03 12:31:00,512 - INFO - disconnecting snap7 client
2025-10-03 12:31:00,512 - INFO - PLC disconnected
2025-10-03 12:31:00,512 - INFO - destroying snap7 client
2025-10-03 12:31:04,157 - INFO - creating snap7 client
2025-10-03 12:31:04,158 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 12:31:04,267 - INFO - PLC connected (192.168.0.1)
2025-10-03 12:31:04,315 - INFO - Current operation mode: AGENTIC
2025-10-03 12:31:04,315 - INFO - disconnecting snap7 client
2025-10-03 12:31:04,316 - INFO - PLC disconnected
2025-10-03 12:31:04,316 - INFO - destroying snap7 client
2025-10-03 12:31:04,316 - INFO - Current state before invoke: {'messages': [HumanMessage(content='run', additional_kwargs={}, response_metadata={})], 'intent': None, 'pending_action': None, 'input_payload': None, 'confirmed': False, 'last_tool_result': None, 'last_mode_check': 1759487460.5126057}
2025-10-03 12:31:04,319 - INFO - Routing message: 'run' (pending_action: None)
2025-10-03 12:31:26,028 - INFO - creating snap7 client
2025-10-03 12:31:26,029 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 12:31:26,118 - INFO - PLC connected (192.168.0.1)
2025-10-03 12:31:26,928 - INFO - Experiment parameters written to PLC DB9 (no machine mode set):
- Operation: AGENTIC
- Core params: TFR=3.0, FRR=6, Vol=7.0, Temp=21.0, Chip=HERRINGBONE, Manifold=LARGE
- Solvent: ETHANOL
2025-10-03 12:31:26,956 - INFO - State after PLC validation: input_payload=InputPayload(tfr=3.0, frr=6, target_volume=7.0, temperature=21.0, chip_id=<ChipID.HERRINGBONE: 1>, manifold_id=<ManifoldID.LARGE: 1>, lab_pressure=2000.0, org_solvent_id=<OrgSolventID.ETHANOL: 0>, operation_mode=<OperationMode.AGENTIC: 2>, machine_mode=<MachineMode.RUN: 2>, custom_solvent=None), pending_action=run
2025-10-03 12:31:26,956 - INFO - disconnecting snap7 client
2025-10-03 12:31:26,957 - INFO - PLC disconnected
2025-10-03 12:31:26,957 - INFO - destroying snap7 client
2025-10-03 12:31:26,960 - INFO - Current state after invoke: {'messages': [HumanMessage(content='run', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters sent to PLC. Checking validation...', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters accepted by PLC. Proceeding with safety checks...', additional_kwargs={}, response_metadata={}), AIMessage(content='Ready to start RUN operation.\n\nPlease verify:\n1. Required fluids are loaded in reservoirs\n2. Chip is correctly seated and oriented\n3. Manifold is properly connected\n4. Lid is CLOSED\n5. Lines are secure\n6. Drain bottle is in place\n7. Pressure supply is within specifications\n\nAI: Ready to start RUN operation.', additional_kwargs={}, response_metadata={})], 'intent': 'run', 'pending_action': 'run', 'input_payload': InputPayload(tfr=3.0, frr=6, target_volume=7.0, temperature=21.0, chip_id=<ChipID.HERRINGBONE: 1>, manifold_id=<ManifoldID.LARGE: 1>, lab_pressure=2000.0, org_solvent_id=<OrgSolventID.ETHANOL: 0>, operation_mode=<OperationMode.AGENTIC: 2>, machine_mode=<MachineMode.RUN: 2>, custom_solvent=None), 'last_mode_check': 1759487460.5126057}
2025-10-03 12:31:31,747 - INFO - Starting run operation...
2025-10-03 12:31:31,749 - INFO - creating snap7 client
2025-10-03 12:31:31,750 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 12:31:31,882 - INFO - PLC connected (192.168.0.1)
2025-10-03 12:31:31,883 - INFO - Clearing all command bits
2025-10-03 12:31:31,883 - INFO - Writing BOOL COMMANDS_RUN.b_START = False
2025-10-03 12:31:31,883 - INFO -   section: COMMANDS_RUN
2025-10-03 12:31:31,884 - INFO -   byte_offset: 258
2025-10-03 12:31:31,884 - INFO -   bit_offset: 0
2025-10-03 12:31:31,884 - INFO -   raw_start: 258.0
2025-10-03 12:31:31,950 - INFO - Successfully wrote COMMANDS_RUN.b_START = False
2025-10-03 12:31:31,992 - INFO - Writing BOOL COMMANDS_RUN.b_PAUSE_PLAY = False
2025-10-03 12:31:31,992 - INFO -   section: COMMANDS_RUN
2025-10-03 12:31:31,993 - INFO -   byte_offset: 258
2025-10-03 12:31:31,993 - INFO -   bit_offset: 1
2025-10-03 12:31:31,993 - INFO -   raw_start: 258.1
2025-10-03 12:31:32,103 - INFO - Successfully wrote COMMANDS_RUN.b_PAUSE_PLAY = False
2025-10-03 12:31:32,154 - INFO - Writing BOOL COMMANDS_RUN.b_CONFIRM = False
2025-10-03 12:31:32,155 - INFO -   section: COMMANDS_RUN
2025-10-03 12:31:32,155 - INFO -   byte_offset: 258
2025-10-03 12:31:32,156 - INFO -   bit_offset: 1
2025-10-03 12:31:32,157 - INFO -   raw_start: 258.2
2025-10-03 12:31:32,220 - INFO - Successfully wrote COMMANDS_RUN.b_CONFIRM = False
2025-10-03 12:31:32,238 - INFO - Writing BOOL COMMANDS_RUN.b_STOP = False
2025-10-03 12:31:32,238 - INFO -   section: COMMANDS_RUN
2025-10-03 12:31:32,239 - INFO -   byte_offset: 258
2025-10-03 12:31:32,239 - INFO -   bit_offset: 3
2025-10-03 12:31:32,239 - INFO -   raw_start: 258.3
2025-10-03 12:31:32,295 - INFO - Successfully wrote COMMANDS_RUN.b_STOP = False
2025-10-03 12:31:32,334 - INFO - Writing BOOL COMMANDS_CLEAN.b_START = False
2025-10-03 12:31:32,335 - INFO -   section: COMMANDS_CLEAN
2025-10-03 12:31:32,335 - INFO -   byte_offset: 260
2025-10-03 12:31:32,336 - INFO -   bit_offset: 0
2025-10-03 12:31:32,336 - INFO -   raw_start: 260.0
2025-10-03 12:31:32,401 - INFO - Successfully wrote COMMANDS_CLEAN.b_START = False
2025-10-03 12:31:32,416 - INFO - Writing BOOL COMMANDS_CLEAN.b_PAUSE_PLAY = False
2025-10-03 12:31:32,416 - INFO -   section: COMMANDS_CLEAN
2025-10-03 12:31:32,416 - INFO -   byte_offset: 260
2025-10-03 12:31:32,417 - INFO -   bit_offset: 1
2025-10-03 12:31:32,417 - INFO -   raw_start: 260.1
2025-10-03 12:31:32,441 - INFO - Successfully wrote COMMANDS_CLEAN.b_PAUSE_PLAY = False
2025-10-03 12:31:32,477 - INFO - Writing BOOL COMMANDS_CLEAN.b_CONFIRM = False
2025-10-03 12:31:32,477 - INFO -   section: COMMANDS_CLEAN
2025-10-03 12:31:32,477 - INFO -   byte_offset: 260
2025-10-03 12:31:32,478 - INFO -   bit_offset: 1
2025-10-03 12:31:32,478 - INFO -   raw_start: 260.2
2025-10-03 12:31:32,551 - INFO - Successfully wrote COMMANDS_CLEAN.b_CONFIRM = False
2025-10-03 12:31:32,587 - INFO - Writing BOOL COMMANDS_CLEAN.b_STOP = False
2025-10-03 12:31:32,588 - INFO -   section: COMMANDS_CLEAN
2025-10-03 12:31:32,588 - INFO -   byte_offset: 260
2025-10-03 12:31:32,588 - INFO -   bit_offset: 3
2025-10-03 12:31:32,588 - INFO -   raw_start: 260.3
2025-10-03 12:31:32,666 - INFO - Successfully wrote COMMANDS_CLEAN.b_STOP = False
2025-10-03 12:31:32,711 - INFO - Writing BOOL COMMANDS_PRESSURE_TEST.b_START = False
2025-10-03 12:31:32,711 - INFO -   section: COMMANDS_PRESSURE_TEST
2025-10-03 12:31:32,712 - INFO -   byte_offset: 262
2025-10-03 12:31:32,712 - INFO -   bit_offset: 0
2025-10-03 12:31:32,712 - INFO -   raw_start: 262.0
2025-10-03 12:31:32,775 - INFO - Successfully wrote COMMANDS_PRESSURE_TEST.b_START = False
2025-10-03 12:31:32,803 - INFO - Writing BOOL COMMANDS_PRESSURE_TEST.b_PAUSE_PLAY = False
2025-10-03 12:31:32,803 - INFO -   section: COMMANDS_PRESSURE_TEST
2025-10-03 12:31:32,803 - INFO -   byte_offset: 262
2025-10-03 12:31:32,803 - INFO -   bit_offset: 1
2025-10-03 12:31:32,805 - INFO -   raw_start: 262.1
2025-10-03 12:31:32,889 - INFO - Successfully wrote COMMANDS_PRESSURE_TEST.b_PAUSE_PLAY = False
2025-10-03 12:31:32,915 - INFO - Writing BOOL COMMANDS_PRESSURE_TEST.b_CONFIRM = False
2025-10-03 12:31:32,915 - INFO -   section: COMMANDS_PRESSURE_TEST
2025-10-03 12:31:32,915 - INFO -   byte_offset: 262
2025-10-03 12:31:32,916 - INFO -   bit_offset: 1
2025-10-03 12:31:32,916 - INFO -   raw_start: 262.2
2025-10-03 12:31:32,965 - INFO - Successfully wrote COMMANDS_PRESSURE_TEST.b_CONFIRM = False
2025-10-03 12:31:32,997 - INFO - Writing BOOL COMMANDS_PRESSURE_TEST.b_STOP = False
2025-10-03 12:31:32,998 - INFO -   section: COMMANDS_PRESSURE_TEST
2025-10-03 12:31:32,998 - INFO -   byte_offset: 262
2025-10-03 12:31:32,998 - INFO -   bit_offset: 3
2025-10-03 12:31:32,999 - INFO -   raw_start: 262.3
2025-10-03 12:31:33,071 - INFO - Successfully wrote COMMANDS_PRESSURE_TEST.b_STOP = False
2025-10-03 12:31:33,101 - INFO - All command bits cleared and verified
2025-10-03 12:31:33,101 - INFO - Writing BOOL COMMANDS_RUN.b_START = True
2025-10-03 12:31:33,101 - INFO -   section: COMMANDS_RUN
2025-10-03 12:31:33,101 - INFO -   byte_offset: 258
2025-10-03 12:31:33,102 - INFO -   bit_offset: 0
2025-10-03 12:31:33,102 - INFO -   raw_start: 258.0
2025-10-03 12:31:33,194 - INFO - Successfully wrote COMMANDS_RUN.b_START = True
2025-10-03 12:31:33,234 - INFO - Operation started: RUN mode with START bit set
2025-10-03 12:31:33,262 - INFO - disconnecting snap7 client
2025-10-03 12:31:33,262 - INFO - PLC disconnected
2025-10-03 12:31:38,089 - INFO - creating snap7 client
2025-10-03 12:31:38,089 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 12:31:38,230 - INFO - PLC connected (192.168.0.1)
2025-10-03 12:31:38,254 - INFO - Current operation mode: AGENTIC
2025-10-03 12:31:38,254 - INFO - disconnecting snap7 client
2025-10-03 12:31:38,254 - INFO - PLC disconnected
2025-10-03 12:31:38,255 - INFO - destroying snap7 client
2025-10-03 12:31:38,255 - INFO - Current state before invoke: {'messages': [HumanMessage(content='run', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters sent to PLC. Checking validation...', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters accepted by PLC. Proceeding with safety checks...', additional_kwargs={}, response_metadata={}), AIMessage(content='Ready to start RUN operation.\n\nPlease verify:\n1. Required fluids are loaded in reservoirs\n2. Chip is correctly seated and oriented\n3. Manifold is properly connected\n4. Lid is CLOSED\n5. Lines are secure\n6. Drain bottle is in place\n7. Pressure supply is within specifications\n\nAI: Ready to start RUN operation.', additional_kwargs={}, response_metadata={}), HumanMessage(content='pause', additional_kwargs={}, response_metadata={})], 'intent': 'run', 'pending_action': None, 'input_payload': InputPayload(tfr=3.0, frr=6, target_volume=7.0, temperature=21.0, chip_id=<ChipID.HERRINGBONE: 1>, manifold_id=<ManifoldID.LARGE: 1>, lab_pressure=2000.0, org_solvent_id=<OrgSolventID.ETHANOL: 0>, operation_mode=<OperationMode.AGENTIC: 2>, machine_mode=<MachineMode.RUN: 2>, custom_solvent=None), 'last_mode_check': 1759487460.5126057, 'confirmed': True}
2025-10-03 12:31:38,257 - INFO - Routing message: 'pause' (pending_action: None)
2025-10-03 12:31:38,257 - INFO - Handling PAUSE command...
2025-10-03 12:31:38,257 - INFO - creating snap7 client
2025-10-03 12:31:38,257 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 12:31:38,430 - INFO - PLC connected (192.168.0.1)
2025-10-03 12:31:38,430 - INFO - Reading current status...
2025-10-03 12:31:38,468 - INFO - Current status code: 2
2025-10-03 12:31:38,468 - INFO - Setting PAUSE_PLAY bit to TRUE for RUN mode...
2025-10-03 12:31:38,468 - INFO - Pulsing COMMANDS_RUN.b_PAUSE_PLAY to True
2025-10-03 12:31:38,469 - INFO - Writing BOOL COMMANDS_RUN.b_PAUSE_PLAY = True
2025-10-03 12:31:38,469 - INFO -   section: COMMANDS_RUN
2025-10-03 12:31:38,469 - INFO -   byte_offset: 258
2025-10-03 12:31:38,469 - INFO -   bit_offset: 1
2025-10-03 12:31:38,469 - INFO -   raw_start: 258.1
2025-10-03 12:31:38,562 - INFO - Successfully wrote COMMANDS_RUN.b_PAUSE_PLAY = True
2025-10-03 12:31:38,591 - INFO - Command COMMANDS_RUN.b_PAUSE_PLAY successfully set to True and verified
2025-10-03 12:31:38,591 - INFO - Disconnecting from PLC...
2025-10-03 12:31:38,591 - INFO - disconnecting snap7 client
2025-10-03 12:31:38,592 - INFO - PLC disconnected
2025-10-03 12:31:38,592 - INFO - destroying snap7 client
2025-10-03 12:31:38,593 - INFO - Current state after invoke: {'messages': [HumanMessage(content='run', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters sent to PLC. Checking validation...', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters accepted by PLC. Proceeding with safety checks...', additional_kwargs={}, response_metadata={}), AIMessage(content='Ready to start RUN operation.\n\nPlease verify:\n1. Required fluids are loaded in reservoirs\n2. Chip is correctly seated and oriented\n3. Manifold is properly connected\n4. Lid is CLOSED\n5. Lines are secure\n6. Drain bottle is in place\n7. Pressure supply is within specifications\n\nAI: Ready to start RUN operation.', additional_kwargs={}, response_metadata={}), HumanMessage(content='pause', additional_kwargs={}, response_metadata={}), AIMessage(content="RUN operation paused. Say 'play' to resume.", additional_kwargs={}, response_metadata={})], 'intent': 'other', 'pending_action': None, 'input_payload': InputPayload(tfr=3.0, frr=6, target_volume=7.0, temperature=21.0, chip_id=<ChipID.HERRINGBONE: 1>, manifold_id=<ManifoldID.LARGE: 1>, lab_pressure=2000.0, org_solvent_id=<OrgSolventID.ETHANOL: 0>, operation_mode=<OperationMode.AGENTIC: 2>, machine_mode=<MachineMode.RUN: 2>, custom_solvent=None), 'last_mode_check': 1759487460.5126057}
2025-10-03 12:31:41,441 - INFO - creating snap7 client
2025-10-03 12:31:41,441 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 12:31:41,519 - INFO - PLC connected (192.168.0.1)
2025-10-03 12:31:41,557 - INFO - Current operation mode: AGENTIC
2025-10-03 12:31:41,558 - INFO - disconnecting snap7 client
2025-10-03 12:31:41,558 - INFO - PLC disconnected
2025-10-03 12:31:41,559 - INFO - destroying snap7 client
2025-10-03 12:31:41,559 - INFO - Current state before invoke: {'messages': [HumanMessage(content='run', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters sent to PLC. Checking validation...', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters accepted by PLC. Proceeding with safety checks...', additional_kwargs={}, response_metadata={}), AIMessage(content='Ready to start RUN operation.\n\nPlease verify:\n1. Required fluids are loaded in reservoirs\n2. Chip is correctly seated and oriented\n3. Manifold is properly connected\n4. Lid is CLOSED\n5. Lines are secure\n6. Drain bottle is in place\n7. Pressure supply is within specifications\n\nAI: Ready to start RUN operation.', additional_kwargs={}, response_metadata={}), HumanMessage(content='pause', additional_kwargs={}, response_metadata={}), AIMessage(content="RUN operation paused. Say 'play' to resume.", additional_kwargs={}, response_metadata={}), HumanMessage(content='play', additional_kwargs={}, response_metadata={})], 'intent': 'other', 'pending_action': None, 'input_payload': InputPayload(tfr=3.0, frr=6, target_volume=7.0, temperature=21.0, chip_id=<ChipID.HERRINGBONE: 1>, manifold_id=<ManifoldID.LARGE: 1>, lab_pressure=2000.0, org_solvent_id=<OrgSolventID.ETHANOL: 0>, operation_mode=<OperationMode.AGENTIC: 2>, machine_mode=<MachineMode.RUN: 2>, custom_solvent=None), 'last_mode_check': 1759487460.5126057}
2025-10-03 12:31:41,560 - INFO - Routing message: 'play' (pending_action: None)
2025-10-03 12:31:41,560 - INFO - Handling PLAY/RESUME command...
2025-10-03 12:31:41,561 - INFO - creating snap7 client
2025-10-03 12:31:41,561 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 12:31:41,708 - INFO - PLC connected (192.168.0.1)
2025-10-03 12:31:41,708 - INFO - Reading current status...
2025-10-03 12:31:41,766 - INFO - Current status code: 2
2025-10-03 12:31:41,766 - INFO - Setting PAUSE_PLAY bit to FALSE for RUN mode...
2025-10-03 12:31:41,766 - INFO - Pulsing COMMANDS_RUN.b_PAUSE_PLAY to False
2025-10-03 12:31:41,767 - INFO - Writing BOOL COMMANDS_RUN.b_PAUSE_PLAY = False
2025-10-03 12:31:41,767 - INFO -   section: COMMANDS_RUN
2025-10-03 12:31:41,767 - INFO -   byte_offset: 258
2025-10-03 12:31:41,768 - INFO -   bit_offset: 1
2025-10-03 12:31:41,768 - INFO -   raw_start: 258.1
2025-10-03 12:31:41,851 - INFO - Successfully wrote COMMANDS_RUN.b_PAUSE_PLAY = False
2025-10-03 12:31:41,883 - INFO - Command COMMANDS_RUN.b_PAUSE_PLAY successfully set to False and verified
2025-10-03 12:31:41,883 - INFO - Disconnecting from PLC...
2025-10-03 12:31:41,884 - INFO - disconnecting snap7 client
2025-10-03 12:31:41,884 - INFO - PLC disconnected
2025-10-03 12:31:41,884 - INFO - destroying snap7 client
2025-10-03 12:31:41,886 - INFO - Current state after invoke: {'messages': [HumanMessage(content='run', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters sent to PLC. Checking validation...', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters accepted by PLC. Proceeding with safety checks...', additional_kwargs={}, response_metadata={}), AIMessage(content='Ready to start RUN operation.\n\nPlease verify:\n1. Required fluids are loaded in reservoirs\n2. Chip is correctly seated and oriented\n3. Manifold is properly connected\n4. Lid is CLOSED\n5. Lines are secure\n6. Drain bottle is in place\n7. Pressure supply is within specifications\n\nAI: Ready to start RUN operation.', additional_kwargs={}, response_metadata={}), HumanMessage(content='pause', additional_kwargs={}, response_metadata={}), AIMessage(content="RUN operation paused. Say 'play' to resume.", additional_kwargs={}, response_metadata={}), HumanMessage(content='play', additional_kwargs={}, response_metadata={}), AIMessage(content='RUN operation resumed.', additional_kwargs={}, response_metadata={})], 'intent': 'other', 'pending_action': None, 'input_payload': InputPayload(tfr=3.0, frr=6, target_volume=7.0, temperature=21.0, chip_id=<ChipID.HERRINGBONE: 1>, manifold_id=<ManifoldID.LARGE: 1>, lab_pressure=2000.0, org_solvent_id=<OrgSolventID.ETHANOL: 0>, operation_mode=<OperationMode.AGENTIC: 2>, machine_mode=<MachineMode.RUN: 2>, custom_solvent=None), 'last_mode_check': 1759487460.5126057}
2025-10-03 12:31:46,368 - INFO - creating snap7 client
2025-10-03 12:31:46,368 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 12:31:46,442 - INFO - PLC connected (192.168.0.1)
2025-10-03 12:31:46,466 - INFO - Current operation mode: AGENTIC
2025-10-03 12:31:46,466 - INFO - disconnecting snap7 client
2025-10-03 12:31:46,467 - INFO - PLC disconnected
2025-10-03 12:31:46,467 - INFO - destroying snap7 client
2025-10-03 12:31:46,467 - INFO - creating snap7 client
2025-10-03 12:31:46,467 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 12:31:46,609 - INFO - PLC connected (192.168.0.1)
2025-10-03 12:31:46,689 - INFO - Machine mode set to 1
2025-10-03 12:31:46,689 - INFO - Machine mode set to READY
2025-10-03 12:31:46,689 - INFO - disconnecting snap7 client
2025-10-03 12:31:46,689 - INFO - PLC disconnected
2025-10-03 12:31:46,690 - INFO - destroying snap7 client
2025-10-03 12:31:52,511 - INFO - destroying snap7 client
2025-10-03 12:36:33,048 - INFO - creating snap7 client
2025-10-03 12:36:33,049 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 12:36:33,170 - INFO - PLC connected (192.168.0.1)
2025-10-03 12:36:33,211 - INFO - Current operation mode: AGENTIC
2025-10-03 12:36:33,211 - INFO - disconnecting snap7 client
2025-10-03 12:36:33,212 - INFO - PLC disconnected
2025-10-03 12:36:33,213 - INFO - destroying snap7 client
2025-10-03 12:36:33,213 - INFO - creating snap7 client
2025-10-03 12:36:33,214 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 12:36:33,403 - INFO - PLC connected (192.168.0.1)
2025-10-03 12:36:33,504 - INFO - Machine mode set to 1
2025-10-03 12:36:33,504 - INFO - Machine mode set to READY
2025-10-03 12:36:33,506 - INFO - disconnecting snap7 client
2025-10-03 12:36:33,506 - INFO - PLC disconnected
2025-10-03 12:36:33,507 - INFO - destroying snap7 client
2025-10-03 12:36:37,926 - INFO - creating snap7 client
2025-10-03 12:36:37,926 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 12:36:38,069 - INFO - PLC connected (192.168.0.1)
2025-10-03 12:36:38,111 - INFO - Current operation mode: AGENTIC
2025-10-03 12:36:38,111 - INFO - disconnecting snap7 client
2025-10-03 12:36:38,112 - INFO - PLC disconnected
2025-10-03 12:36:38,113 - INFO - destroying snap7 client
2025-10-03 12:36:38,114 - INFO - Current state before invoke: {'messages': [HumanMessage(content='run', additional_kwargs={}, response_metadata={})], 'intent': None, 'pending_action': None, 'input_payload': None, 'confirmed': False, 'last_tool_result': None, 'last_mode_check': 1759487793.507293}
2025-10-03 12:36:38,118 - INFO - Routing message: 'run' (pending_action: None)
2025-10-03 12:36:58,266 - INFO - creating snap7 client
2025-10-03 12:36:58,267 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 12:36:58,351 - INFO - PLC connected (192.168.0.1)
2025-10-03 12:36:59,158 - INFO - Experiment parameters written to PLC DB9 (no machine mode set):
- Operation: AGENTIC
- Core params: TFR=3.0, FRR=6, Vol=8.0, Temp=22.0, Chip=BAFFLE, Manifold=LARGE
- Solvent: ETHANOL
2025-10-03 12:36:59,201 - INFO - State after PLC validation: input_payload=InputPayload(tfr=3.0, frr=6, target_volume=8.0, temperature=22.0, chip_id=<ChipID.BAFFLE: 0>, manifold_id=<ManifoldID.LARGE: 1>, lab_pressure=2000.0, org_solvent_id=<OrgSolventID.ETHANOL: 0>, operation_mode=<OperationMode.AGENTIC: 2>, machine_mode=<MachineMode.RUN: 2>, custom_solvent=None), pending_action=run
2025-10-03 12:36:59,202 - INFO - disconnecting snap7 client
2025-10-03 12:36:59,202 - INFO - PLC disconnected
2025-10-03 12:36:59,202 - INFO - destroying snap7 client
2025-10-03 12:36:59,204 - INFO - Current state after invoke: {'messages': [HumanMessage(content='run', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters sent to PLC. Checking validation...', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters accepted by PLC. Proceeding with safety checks...', additional_kwargs={}, response_metadata={}), AIMessage(content='Ready to start RUN operation.\n\nPlease verify:\n1. Required fluids are loaded in reservoirs\n2. Chip is correctly seated and oriented\n3. Manifold is properly connected\n4. Lid is CLOSED\n5. Lines are secure\n6. Drain bottle is in place\n7. Pressure supply is within specifications\n\nAI: Ready to start RUN operation.', additional_kwargs={}, response_metadata={})], 'intent': 'run', 'pending_action': 'run', 'input_payload': InputPayload(tfr=3.0, frr=6, target_volume=8.0, temperature=22.0, chip_id=<ChipID.BAFFLE: 0>, manifold_id=<ManifoldID.LARGE: 1>, lab_pressure=2000.0, org_solvent_id=<OrgSolventID.ETHANOL: 0>, operation_mode=<OperationMode.AGENTIC: 2>, machine_mode=<MachineMode.RUN: 2>, custom_solvent=None), 'last_mode_check': 1759487793.507293}
2025-10-03 12:37:04,722 - INFO - Starting run operation...
2025-10-03 12:37:04,723 - INFO - creating snap7 client
2025-10-03 12:37:04,723 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 12:37:04,864 - INFO - PLC connected (192.168.0.1)
2025-10-03 12:37:04,865 - INFO - Clearing all command bits
2025-10-03 12:37:04,867 - INFO - Writing BOOL COMMANDS_RUN.b_START = False
2025-10-03 12:37:04,867 - INFO -   section: COMMANDS_RUN
2025-10-03 12:37:04,868 - INFO -   byte_offset: 258
2025-10-03 12:37:04,868 - INFO -   bit_offset: 0
2025-10-03 12:37:04,869 - INFO -   raw_start: 258.0
2025-10-03 12:37:04,942 - INFO - Successfully wrote COMMANDS_RUN.b_START = False
2025-10-03 12:37:04,968 - INFO - Writing BOOL COMMANDS_RUN.b_PAUSE_PLAY = False
2025-10-03 12:37:04,969 - INFO -   section: COMMANDS_RUN
2025-10-03 12:37:04,972 - INFO -   byte_offset: 258
2025-10-03 12:37:04,972 - INFO -   bit_offset: 1
2025-10-03 12:37:04,973 - INFO -   raw_start: 258.1
2025-10-03 12:37:05,038 - INFO - Successfully wrote COMMANDS_RUN.b_PAUSE_PLAY = False
2025-10-03 12:37:05,074 - INFO - Writing BOOL COMMANDS_RUN.b_CONFIRM = False
2025-10-03 12:37:05,075 - INFO -   section: COMMANDS_RUN
2025-10-03 12:37:05,076 - INFO -   byte_offset: 258
2025-10-03 12:37:05,077 - INFO -   bit_offset: 1
2025-10-03 12:37:05,077 - INFO -   raw_start: 258.2
2025-10-03 12:37:05,161 - INFO - Successfully wrote COMMANDS_RUN.b_CONFIRM = False
2025-10-03 12:37:05,186 - INFO - Writing BOOL COMMANDS_RUN.b_STOP = False
2025-10-03 12:37:05,186 - INFO -   section: COMMANDS_RUN
2025-10-03 12:37:05,186 - INFO -   byte_offset: 258
2025-10-03 12:37:05,187 - INFO -   bit_offset: 3
2025-10-03 12:37:05,187 - INFO -   raw_start: 258.3
2025-10-03 12:37:05,238 - INFO - Successfully wrote COMMANDS_RUN.b_STOP = False
2025-10-03 12:37:05,251 - INFO - Writing BOOL COMMANDS_CLEAN.b_START = False
2025-10-03 12:37:05,251 - INFO -   section: COMMANDS_CLEAN
2025-10-03 12:37:05,251 - INFO -   byte_offset: 260
2025-10-03 12:37:05,252 - INFO -   bit_offset: 0
2025-10-03 12:37:05,252 - INFO -   raw_start: 260.0
2025-10-03 12:37:05,301 - INFO - Successfully wrote COMMANDS_CLEAN.b_START = False
2025-10-03 12:37:05,336 - INFO - Writing BOOL COMMANDS_CLEAN.b_PAUSE_PLAY = False
2025-10-03 12:37:05,336 - INFO -   section: COMMANDS_CLEAN
2025-10-03 12:37:05,336 - INFO -   byte_offset: 260
2025-10-03 12:37:05,337 - INFO -   bit_offset: 1
2025-10-03 12:37:05,337 - INFO -   raw_start: 260.1
2025-10-03 12:37:05,402 - INFO - Successfully wrote COMMANDS_CLEAN.b_PAUSE_PLAY = False
2025-10-03 12:37:05,432 - INFO - Writing BOOL COMMANDS_CLEAN.b_CONFIRM = False
2025-10-03 12:37:05,432 - INFO -   section: COMMANDS_CLEAN
2025-10-03 12:37:05,432 - INFO -   byte_offset: 260
2025-10-03 12:37:05,434 - INFO -   bit_offset: 1
2025-10-03 12:37:05,434 - INFO -   raw_start: 260.2
2025-10-03 12:37:05,466 - INFO - Successfully wrote COMMANDS_CLEAN.b_CONFIRM = False
2025-10-03 12:37:05,505 - INFO - Writing BOOL COMMANDS_CLEAN.b_STOP = False
2025-10-03 12:37:05,505 - INFO -   section: COMMANDS_CLEAN
2025-10-03 12:37:05,506 - INFO -   byte_offset: 260
2025-10-03 12:37:05,506 - INFO -   bit_offset: 3
2025-10-03 12:37:05,507 - INFO -   raw_start: 260.3
2025-10-03 12:37:05,591 - INFO - Successfully wrote COMMANDS_CLEAN.b_STOP = False
2025-10-03 12:37:05,631 - INFO - Writing BOOL COMMANDS_PRESSURE_TEST.b_START = False
2025-10-03 12:37:05,631 - INFO -   section: COMMANDS_PRESSURE_TEST
2025-10-03 12:37:05,631 - INFO -   byte_offset: 262
2025-10-03 12:37:05,631 - INFO -   bit_offset: 0
2025-10-03 12:37:05,631 - INFO -   raw_start: 262.0
2025-10-03 12:37:05,689 - INFO - Successfully wrote COMMANDS_PRESSURE_TEST.b_START = False
2025-10-03 12:37:05,732 - INFO - Writing BOOL COMMANDS_PRESSURE_TEST.b_PAUSE_PLAY = False
2025-10-03 12:37:05,732 - INFO -   section: COMMANDS_PRESSURE_TEST
2025-10-03 12:37:05,733 - INFO -   byte_offset: 262
2025-10-03 12:37:05,733 - INFO -   bit_offset: 1
2025-10-03 12:37:05,733 - INFO -   raw_start: 262.1
2025-10-03 12:37:05,801 - INFO - Successfully wrote COMMANDS_PRESSURE_TEST.b_PAUSE_PLAY = False
2025-10-03 12:37:05,841 - INFO - Writing BOOL COMMANDS_PRESSURE_TEST.b_CONFIRM = False
2025-10-03 12:37:05,841 - INFO -   section: COMMANDS_PRESSURE_TEST
2025-10-03 12:37:05,841 - INFO -   byte_offset: 262
2025-10-03 12:37:05,842 - INFO -   bit_offset: 1
2025-10-03 12:37:05,842 - INFO -   raw_start: 262.2
2025-10-03 12:37:05,888 - INFO - Successfully wrote COMMANDS_PRESSURE_TEST.b_CONFIRM = False
2025-10-03 12:37:05,941 - INFO - Writing BOOL COMMANDS_PRESSURE_TEST.b_STOP = False
2025-10-03 12:37:05,941 - INFO -   section: COMMANDS_PRESSURE_TEST
2025-10-03 12:37:05,942 - INFO -   byte_offset: 262
2025-10-03 12:37:05,942 - INFO -   bit_offset: 3
2025-10-03 12:37:05,942 - INFO -   raw_start: 262.3
2025-10-03 12:37:05,990 - INFO - Successfully wrote COMMANDS_PRESSURE_TEST.b_STOP = False
2025-10-03 12:37:06,033 - INFO - All command bits cleared and verified
2025-10-03 12:37:06,033 - INFO - Writing BOOL COMMANDS_RUN.b_START = True
2025-10-03 12:37:06,034 - INFO -   section: COMMANDS_RUN
2025-10-03 12:37:06,034 - INFO -   byte_offset: 258
2025-10-03 12:37:06,034 - INFO -   bit_offset: 0
2025-10-03 12:37:06,034 - INFO -   raw_start: 258.0
2025-10-03 12:37:06,092 - INFO - Successfully wrote COMMANDS_RUN.b_START = True
2025-10-03 12:37:06,175 - INFO - Operation started: RUN mode with START bit set
2025-10-03 12:37:06,214 - INFO - disconnecting snap7 client
2025-10-03 12:37:06,214 - INFO - PLC disconnected
2025-10-03 12:37:09,672 - INFO - creating snap7 client
2025-10-03 12:37:09,673 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 12:37:09,681 - ERROR - b' TCP : Unreachable peer'
2025-10-03 12:37:09,683 - ERROR - PLC connection failed, switching to simulator. Reason: b' TCP : Unreachable peer'
Traceback (most recent call last):
  File "C:\Users\NahashonOsinde\OneDrive - Inside Therapeutics\00_Documents\01_AI_Agent_Stuff\LangChain_Graph\TamaraAgent_LangGraph\7_Tamara_Agent\plc_tool.py", line 420, in connect
    self.client.connect(self.ip, self.rack, self.slot)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\NahashonOsinde\miniconda3\envs\LangChain\Lib\site-packages\snap7\client.py", line 197, in connect
    check_error(self._lib.Cli_ConnectTo(self._s7_client, c_char_p(address.encode()), c_int(rack), c_int(slot)))
  File "C:\Users\NahashonOsinde\miniconda3\envs\LangChain\Lib\site-packages\snap7\error.py", line 143, in check_error
    raise RuntimeError(error)
RuntimeError: b' TCP : Unreachable peer'
2025-10-03 12:37:09,686 - INFO - SIM: Connected
2025-10-03 12:37:09,686 - INFO - destroying snap7 client
2025-10-03 12:37:09,687 - INFO - SIM: Read DB9.DBB198 = ['0x0', '0x0']
2025-10-03 12:37:09,687 - ERROR - Failed to read operation mode: Invalid operation mode value: 0
Traceback (most recent call last):
  File "C:\Users\NahashonOsinde\OneDrive - Inside Therapeutics\00_Documents\01_AI_Agent_Stuff\LangChain_Graph\TamaraAgent_LangGraph\7_Tamara_Agent\plc_tool.py", line 888, in read_operation_mode
    return OperationMode(mode)
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\NahashonOsinde\miniconda3\envs\LangChain\Lib\enum.py", line 714, in __call__
    return cls.__new__(cls, value)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\NahashonOsinde\miniconda3\envs\LangChain\Lib\enum.py", line 1137, in __new__
    raise ve_exc
ValueError: 0 is not a valid OperationMode

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\NahashonOsinde\OneDrive - Inside Therapeutics\00_Documents\01_AI_Agent_Stuff\LangChain_Graph\TamaraAgent_LangGraph\7_Tamara_Agent\tamara_graph.py", line 1139, in check_operation_mode
    mode = plc.read_operation_mode()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\NahashonOsinde\OneDrive - Inside Therapeutics\00_Documents\01_AI_Agent_Stuff\LangChain_Graph\TamaraAgent_LangGraph\7_Tamara_Agent\plc_tool.py", line 890, in read_operation_mode
    raise ValueError(f"Invalid operation mode value: {mode}")
ValueError: Invalid operation mode value: 0
2025-10-03 12:37:09,690 - INFO - SIM: Disconnected
2025-10-03 12:37:09,691 - INFO - PLC disconnected
2025-10-03 12:37:09,691 - ERROR - Error in REPL loop: Invalid operation mode value: 0
Traceback (most recent call last):
  File "C:\Users\NahashonOsinde\OneDrive - Inside Therapeutics\00_Documents\01_AI_Agent_Stuff\LangChain_Graph\TamaraAgent_LangGraph\7_Tamara_Agent\plc_tool.py", line 888, in read_operation_mode
    return OperationMode(mode)
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\NahashonOsinde\miniconda3\envs\LangChain\Lib\enum.py", line 714, in __call__
    return cls.__new__(cls, value)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\NahashonOsinde\miniconda3\envs\LangChain\Lib\enum.py", line 1137, in __new__
    raise ve_exc
ValueError: 0 is not a valid OperationMode

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\NahashonOsinde\OneDrive - Inside Therapeutics\00_Documents\01_AI_Agent_Stuff\LangChain_Graph\TamaraAgent_LangGraph\7_Tamara_Agent\tamara_graph.py", line 1231, in repl
    if not check_operation_mode():
           ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\NahashonOsinde\OneDrive - Inside Therapeutics\00_Documents\01_AI_Agent_Stuff\LangChain_Graph\TamaraAgent_LangGraph\7_Tamara_Agent\tamara_graph.py", line 1139, in check_operation_mode
    mode = plc.read_operation_mode()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\NahashonOsinde\OneDrive - Inside Therapeutics\00_Documents\01_AI_Agent_Stuff\LangChain_Graph\TamaraAgent_LangGraph\7_Tamara_Agent\plc_tool.py", line 890, in read_operation_mode
    raise ValueError(f"Invalid operation mode value: {mode}")
ValueError: Invalid operation mode value: 0
2025-10-03 12:37:16,176 - INFO - Current state before invoke: {'messages': [HumanMessage(content='run', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters sent to PLC. Checking validation...', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters accepted by PLC. Proceeding with safety checks...', additional_kwargs={}, response_metadata={}), AIMessage(content='Ready to start RUN operation.\n\nPlease verify:\n1. Required fluids are loaded in reservoirs\n2. Chip is correctly seated and oriented\n3. Manifold is properly connected\n4. Lid is CLOSED\n5. Lines are secure\n6. Drain bottle is in place\n7. Pressure supply is within specifications\n\nAI: Ready to start RUN operation.', additional_kwargs={}, response_metadata={}), HumanMessage(content='pause the run', additional_kwargs={}, response_metadata={})], 'intent': 'run', 'pending_action': None, 'input_payload': InputPayload(tfr=3.0, frr=6, target_volume=8.0, temperature=22.0, chip_id=<ChipID.BAFFLE: 0>, manifold_id=<ManifoldID.LARGE: 1>, lab_pressure=2000.0, org_solvent_id=<OrgSolventID.ETHANOL: 0>, operation_mode=<OperationMode.AGENTIC: 2>, machine_mode=<MachineMode.RUN: 2>, custom_solvent=None), 'last_mode_check': 1759487793.507293, 'confirmed': True}
2025-10-03 12:37:16,177 - INFO - Routing message: 'pause the run' (pending_action: None)
2025-10-03 12:37:16,178 - INFO - Handling PAUSE command...
2025-10-03 12:37:16,178 - INFO - creating snap7 client
2025-10-03 12:37:16,178 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 12:37:16,273 - INFO - PLC connected (192.168.0.1)
2025-10-03 12:37:16,273 - INFO - Reading current status...
2025-10-03 12:37:16,310 - INFO - Current status code: 2
2025-10-03 12:37:16,310 - INFO - Setting PAUSE_PLAY bit to TRUE for RUN mode...
2025-10-03 12:37:16,311 - INFO - Pulsing COMMANDS_RUN.b_PAUSE_PLAY to True
2025-10-03 12:37:16,311 - INFO - Writing BOOL COMMANDS_RUN.b_PAUSE_PLAY = True
2025-10-03 12:37:16,312 - INFO -   section: COMMANDS_RUN
2025-10-03 12:37:16,312 - INFO -   byte_offset: 258
2025-10-03 12:37:16,312 - INFO -   bit_offset: 1
2025-10-03 12:37:16,313 - INFO -   raw_start: 258.1
2025-10-03 12:37:16,404 - INFO - Successfully wrote COMMANDS_RUN.b_PAUSE_PLAY = True
2025-10-03 12:37:16,429 - INFO - Command COMMANDS_RUN.b_PAUSE_PLAY successfully set to True and verified
2025-10-03 12:37:16,429 - INFO - Disconnecting from PLC...
2025-10-03 12:37:16,430 - INFO - disconnecting snap7 client
2025-10-03 12:37:16,430 - INFO - PLC disconnected
2025-10-03 12:37:16,430 - INFO - destroying snap7 client
2025-10-03 12:37:16,431 - INFO - Current state after invoke: {'messages': [HumanMessage(content='run', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters sent to PLC. Checking validation...', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters accepted by PLC. Proceeding with safety checks...', additional_kwargs={}, response_metadata={}), AIMessage(content='Ready to start RUN operation.\n\nPlease verify:\n1. Required fluids are loaded in reservoirs\n2. Chip is correctly seated and oriented\n3. Manifold is properly connected\n4. Lid is CLOSED\n5. Lines are secure\n6. Drain bottle is in place\n7. Pressure supply is within specifications\n\nAI: Ready to start RUN operation.', additional_kwargs={}, response_metadata={}), HumanMessage(content='pause the run', additional_kwargs={}, response_metadata={}), AIMessage(content="RUN operation paused. Say 'play' to resume.", additional_kwargs={}, response_metadata={})], 'intent': 'other', 'pending_action': None, 'input_payload': InputPayload(tfr=3.0, frr=6, target_volume=8.0, temperature=22.0, chip_id=<ChipID.BAFFLE: 0>, manifold_id=<ManifoldID.LARGE: 1>, lab_pressure=2000.0, org_solvent_id=<OrgSolventID.ETHANOL: 0>, operation_mode=<OperationMode.AGENTIC: 2>, machine_mode=<MachineMode.RUN: 2>, custom_solvent=None), 'last_mode_check': 1759487793.507293}
2025-10-03 12:37:18,739 - INFO - creating snap7 client
2025-10-03 12:37:18,740 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 12:37:18,817 - INFO - PLC connected (192.168.0.1)
2025-10-03 12:37:18,843 - INFO - Current operation mode: AGENTIC
2025-10-03 12:37:18,843 - INFO - disconnecting snap7 client
2025-10-03 12:37:18,843 - INFO - PLC disconnected
2025-10-03 12:37:18,844 - INFO - destroying snap7 client
2025-10-03 12:37:18,844 - INFO - Current state before invoke: {'messages': [HumanMessage(content='run', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters sent to PLC. Checking validation...', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters accepted by PLC. Proceeding with safety checks...', additional_kwargs={}, response_metadata={}), AIMessage(content='Ready to start RUN operation.\n\nPlease verify:\n1. Required fluids are loaded in reservoirs\n2. Chip is correctly seated and oriented\n3. Manifold is properly connected\n4. Lid is CLOSED\n5. Lines are secure\n6. Drain bottle is in place\n7. Pressure supply is within specifications\n\nAI: Ready to start RUN operation.', additional_kwargs={}, response_metadata={}), HumanMessage(content='pause the run', additional_kwargs={}, response_metadata={}), AIMessage(content="RUN operation paused. Say 'play' to resume.", additional_kwargs={}, response_metadata={}), HumanMessage(content='play', additional_kwargs={}, response_metadata={})], 'intent': 'other', 'pending_action': None, 'input_payload': InputPayload(tfr=3.0, frr=6, target_volume=8.0, temperature=22.0, chip_id=<ChipID.BAFFLE: 0>, manifold_id=<ManifoldID.LARGE: 1>, lab_pressure=2000.0, org_solvent_id=<OrgSolventID.ETHANOL: 0>, operation_mode=<OperationMode.AGENTIC: 2>, machine_mode=<MachineMode.RUN: 2>, custom_solvent=None), 'last_mode_check': 1759487793.507293}
2025-10-03 12:37:18,845 - INFO - Routing message: 'play' (pending_action: None)
2025-10-03 12:37:18,845 - INFO - Handling PLAY/RESUME command...
2025-10-03 12:37:18,845 - INFO - creating snap7 client
2025-10-03 12:37:18,846 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 12:37:18,974 - INFO - PLC connected (192.168.0.1)
2025-10-03 12:37:18,974 - INFO - Reading current status...
2025-10-03 12:37:19,011 - INFO - Current status code: 2
2025-10-03 12:37:19,011 - INFO - Setting PAUSE_PLAY bit to FALSE for RUN mode...
2025-10-03 12:37:19,011 - INFO - Pulsing COMMANDS_RUN.b_PAUSE_PLAY to False
2025-10-03 12:37:19,011 - INFO - Writing BOOL COMMANDS_RUN.b_PAUSE_PLAY = False
2025-10-03 12:37:19,012 - INFO -   section: COMMANDS_RUN
2025-10-03 12:37:19,012 - INFO -   byte_offset: 258
2025-10-03 12:37:19,013 - INFO -   bit_offset: 1
2025-10-03 12:37:19,013 - INFO -   raw_start: 258.1
2025-10-03 12:37:19,115 - INFO - Successfully wrote COMMANDS_RUN.b_PAUSE_PLAY = False
2025-10-03 12:37:19,161 - INFO - Command COMMANDS_RUN.b_PAUSE_PLAY successfully set to False and verified
2025-10-03 12:37:19,161 - INFO - Disconnecting from PLC...
2025-10-03 12:37:19,161 - INFO - disconnecting snap7 client
2025-10-03 12:37:19,162 - INFO - PLC disconnected
2025-10-03 12:37:19,162 - INFO - destroying snap7 client
2025-10-03 12:37:19,163 - INFO - Current state after invoke: {'messages': [HumanMessage(content='run', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters sent to PLC. Checking validation...', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters accepted by PLC. Proceeding with safety checks...', additional_kwargs={}, response_metadata={}), AIMessage(content='Ready to start RUN operation.\n\nPlease verify:\n1. Required fluids are loaded in reservoirs\n2. Chip is correctly seated and oriented\n3. Manifold is properly connected\n4. Lid is CLOSED\n5. Lines are secure\n6. Drain bottle is in place\n7. Pressure supply is within specifications\n\nAI: Ready to start RUN operation.', additional_kwargs={}, response_metadata={}), HumanMessage(content='pause the run', additional_kwargs={}, response_metadata={}), AIMessage(content="RUN operation paused. Say 'play' to resume.", additional_kwargs={}, response_metadata={}), HumanMessage(content='play', additional_kwargs={}, response_metadata={}), AIMessage(content='RUN operation resumed.', additional_kwargs={}, response_metadata={})], 'intent': 'other', 'pending_action': None, 'input_payload': InputPayload(tfr=3.0, frr=6, target_volume=8.0, temperature=22.0, chip_id=<ChipID.BAFFLE: 0>, manifold_id=<ManifoldID.LARGE: 1>, lab_pressure=2000.0, org_solvent_id=<OrgSolventID.ETHANOL: 0>, operation_mode=<OperationMode.AGENTIC: 2>, machine_mode=<MachineMode.RUN: 2>, custom_solvent=None), 'last_mode_check': 1759487793.507293}
2025-10-03 12:37:22,002 - INFO - creating snap7 client
2025-10-03 12:37:22,003 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 12:37:22,130 - INFO - PLC connected (192.168.0.1)
2025-10-03 12:37:22,173 - INFO - Current operation mode: AGENTIC
2025-10-03 12:37:22,173 - INFO - disconnecting snap7 client
2025-10-03 12:37:22,174 - INFO - PLC disconnected
2025-10-03 12:37:22,174 - INFO - destroying snap7 client
2025-10-03 12:37:22,175 - INFO - creating snap7 client
2025-10-03 12:37:22,175 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 12:37:22,180 - ERROR - b' TCP : Unreachable peer'
2025-10-03 12:37:22,181 - ERROR - PLC connection failed, switching to simulator. Reason: b' TCP : Unreachable peer'
Traceback (most recent call last):
  File "C:\Users\NahashonOsinde\OneDrive - Inside Therapeutics\00_Documents\01_AI_Agent_Stuff\LangChain_Graph\TamaraAgent_LangGraph\7_Tamara_Agent\plc_tool.py", line 420, in connect
    self.client.connect(self.ip, self.rack, self.slot)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\NahashonOsinde\miniconda3\envs\LangChain\Lib\site-packages\snap7\client.py", line 197, in connect
    check_error(self._lib.Cli_ConnectTo(self._s7_client, c_char_p(address.encode()), c_int(rack), c_int(slot)))
  File "C:\Users\NahashonOsinde\miniconda3\envs\LangChain\Lib\site-packages\snap7\error.py", line 143, in check_error
    raise RuntimeError(error)
RuntimeError: b' TCP : Unreachable peer'
2025-10-03 12:37:22,182 - INFO - SIM: Connected
2025-10-03 12:37:22,182 - INFO - destroying snap7 client
2025-10-03 12:37:22,183 - INFO - SIM: Write DB9.DBB200 = ['0x0', '0x1']
2025-10-03 12:37:22,183 - INFO - SIM: Read DB9.DBB200 = ['0x0', '0x1']
2025-10-03 12:37:22,183 - INFO - Machine mode set to 1
2025-10-03 12:37:22,184 - INFO - Machine mode set to READY
2025-10-03 12:37:22,184 - INFO - SIM: Disconnected
2025-10-03 12:37:22,184 - INFO - PLC disconnected
2025-10-03 12:37:29,968 - INFO - Current state before invoke: {'messages': [HumanMessage(content='run', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters sent to PLC. Checking validation...', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters accepted by PLC. Proceeding with safety checks...', additional_kwargs={}, response_metadata={}), AIMessage(content='Ready to start RUN operation.\n\nPlease verify:\n1. Required fluids are loaded in reservoirs\n2. Chip is correctly seated and oriented\n3. Manifold is properly connected\n4. Lid is CLOSED\n5. Lines are secure\n6. Drain bottle is in place\n7. Pressure supply is within specifications\n\nAI: Ready to start RUN operation.', additional_kwargs={}, response_metadata={}), HumanMessage(content='pause the run', additional_kwargs={}, response_metadata={}), AIMessage(content="RUN operation paused. Say 'play' to resume.", additional_kwargs={}, response_metadata={}), HumanMessage(content='play', additional_kwargs={}, response_metadata={}), AIMessage(content='RUN operation resumed.', additional_kwargs={}, response_metadata={}), AIMessage(content='Operation stopped and machine set to READY state.', additional_kwargs={}, response_metadata={}), HumanMessage(content='Stop the run', additional_kwargs={}, response_metadata={})], 'intent': 'other', 'pending_action': None, 'input_payload': InputPayload(tfr=3.0, frr=6, target_volume=8.0, temperature=22.0, chip_id=<ChipID.BAFFLE: 0>, manifold_id=<ManifoldID.LARGE: 1>, lab_pressure=2000.0, org_solvent_id=<OrgSolventID.ETHANOL: 0>, operation_mode=<OperationMode.AGENTIC: 2>, machine_mode=<MachineMode.RUN: 2>, custom_solvent=None), 'last_mode_check': 1759487793.507293}
2025-10-03 12:37:29,970 - INFO - Routing message: 'stop the run' (pending_action: None)
2025-10-03 12:37:29,970 - INFO - Handling STOP command...
2025-10-03 12:37:29,970 - INFO - creating snap7 client
2025-10-03 12:37:29,971 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 12:37:30,115 - INFO - PLC connected (192.168.0.1)
2025-10-03 12:37:30,115 - INFO - Reading current status...
2025-10-03 12:37:30,160 - INFO - Current status code: 2
2025-10-03 12:37:30,160 - INFO - Setting STOP bit to TRUE...
2025-10-03 12:37:30,160 - INFO - Pulsing COMMANDS_RUN.b_STOP to True
2025-10-03 12:37:30,161 - INFO - Writing BOOL COMMANDS_RUN.b_START = False
2025-10-03 12:37:30,161 - INFO -   section: COMMANDS_RUN
2025-10-03 12:37:30,161 - INFO -   byte_offset: 258
2025-10-03 12:37:30,162 - INFO -   bit_offset: 0
2025-10-03 12:37:30,162 - INFO -   raw_start: 258.0
2025-10-03 12:37:30,229 - INFO - Successfully wrote COMMANDS_RUN.b_START = False
2025-10-03 12:37:30,229 - INFO - Writing BOOL COMMANDS_RUN.b_PAUSE_PLAY = False
2025-10-03 12:37:30,229 - INFO -   section: COMMANDS_RUN
2025-10-03 12:37:30,229 - INFO -   byte_offset: 258
2025-10-03 12:37:30,231 - INFO -   bit_offset: 1
2025-10-03 12:37:30,231 - INFO -   raw_start: 258.1
2025-10-03 12:37:30,272 - INFO - Successfully wrote COMMANDS_RUN.b_PAUSE_PLAY = False
2025-10-03 12:37:30,272 - INFO - Writing BOOL COMMANDS_RUN.b_CONFIRM = False
2025-10-03 12:37:30,272 - INFO -   section: COMMANDS_RUN
2025-10-03 12:37:30,272 - INFO -   byte_offset: 258
2025-10-03 12:37:30,273 - INFO -   bit_offset: 1
2025-10-03 12:37:30,273 - INFO -   raw_start: 258.2
2025-10-03 12:37:30,321 - INFO - Successfully wrote COMMANDS_RUN.b_CONFIRM = False
2025-10-03 12:37:30,321 - INFO - Writing BOOL COMMANDS_RUN.b_STOP = True
2025-10-03 12:37:30,321 - INFO -   section: COMMANDS_RUN
2025-10-03 12:37:30,322 - INFO -   byte_offset: 258
2025-10-03 12:37:30,322 - INFO -   bit_offset: 3
2025-10-03 12:37:30,323 - INFO -   raw_start: 258.3
2025-10-03 12:37:30,347 - INFO - Successfully wrote COMMANDS_RUN.b_STOP = True
2025-10-03 12:37:30,378 - INFO - Command COMMANDS_RUN.b_STOP successfully set to True and verified
2025-10-03 12:37:30,378 - INFO - Pulsing COMMANDS_RUN.b_START to False
2025-10-03 12:37:30,378 - INFO - Writing BOOL COMMANDS_RUN.b_START = False
2025-10-03 12:37:30,379 - INFO -   section: COMMANDS_RUN
2025-10-03 12:37:30,379 - INFO -   byte_offset: 258
2025-10-03 12:37:30,379 - INFO -   bit_offset: 0
2025-10-03 12:37:30,380 - INFO -   raw_start: 258.0
2025-10-03 12:37:30,455 - INFO - Successfully wrote COMMANDS_RUN.b_START = False
2025-10-03 12:37:30,495 - INFO - Command COMMANDS_RUN.b_START successfully set to False and verified
2025-10-03 12:37:30,495 - INFO - Disconnecting from PLC...
2025-10-03 12:37:30,496 - INFO - disconnecting snap7 client
2025-10-03 12:37:30,496 - INFO - PLC disconnected
2025-10-03 12:37:30,496 - INFO - destroying snap7 client
2025-10-03 12:37:30,497 - INFO - Current state after invoke: {'messages': [HumanMessage(content='run', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters sent to PLC. Checking validation...', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters accepted by PLC. Proceeding with safety checks...', additional_kwargs={}, response_metadata={}), AIMessage(content='Ready to start RUN operation.\n\nPlease verify:\n1. Required fluids are loaded in reservoirs\n2. Chip is correctly seated and oriented\n3. Manifold is properly connected\n4. Lid is CLOSED\n5. Lines are secure\n6. Drain bottle is in place\n7. Pressure supply is within specifications\n\nAI: Ready to start RUN operation.', additional_kwargs={}, response_metadata={}), HumanMessage(content='pause the run', additional_kwargs={}, response_metadata={}), AIMessage(content="RUN operation paused. Say 'play' to resume.", additional_kwargs={}, response_metadata={}), HumanMessage(content='play', additional_kwargs={}, response_metadata={}), AIMessage(content='RUN operation resumed.', additional_kwargs={}, response_metadata={}), AIMessage(content='Operation stopped and machine set to READY state.', additional_kwargs={}, response_metadata={}), HumanMessage(content='Stop the run', additional_kwargs={}, response_metadata={}), AIMessage(content='RUN operation stopped.', additional_kwargs={}, response_metadata={})], 'intent': 'other', 'pending_action': None, 'input_payload': InputPayload(tfr=3.0, frr=6, target_volume=8.0, temperature=22.0, chip_id=<ChipID.BAFFLE: 0>, manifold_id=<ManifoldID.LARGE: 1>, lab_pressure=2000.0, org_solvent_id=<OrgSolventID.ETHANOL: 0>, operation_mode=<OperationMode.AGENTIC: 2>, machine_mode=<MachineMode.RUN: 2>, custom_solvent=None), 'last_mode_check': 1759487793.507293}
2025-10-03 12:37:54,537 - INFO - destroying snap7 client
2025-10-03 12:38:02,414 - INFO - creating snap7 client
2025-10-03 12:38:02,414 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 12:38:02,493 - INFO - PLC connected (192.168.0.1)
2025-10-03 12:38:02,544 - INFO - Current operation mode: AGENTIC
2025-10-03 12:38:02,545 - INFO - disconnecting snap7 client
2025-10-03 12:38:02,546 - INFO - PLC disconnected
2025-10-03 12:38:02,546 - INFO - destroying snap7 client
2025-10-03 12:38:02,548 - INFO - creating snap7 client
2025-10-03 12:38:02,548 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 12:38:02,707 - INFO - PLC connected (192.168.0.1)
2025-10-03 12:38:02,790 - INFO - Machine mode set to 1
2025-10-03 12:38:02,790 - INFO - Machine mode set to READY
2025-10-03 12:38:02,791 - INFO - disconnecting snap7 client
2025-10-03 12:38:02,791 - INFO - PLC disconnected
2025-10-03 12:38:02,791 - INFO - destroying snap7 client
2025-10-03 12:41:22,248 - INFO - creating snap7 client
2025-10-03 12:41:22,249 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 12:41:22,326 - INFO - PLC connected (192.168.0.1)
2025-10-03 12:41:22,372 - INFO - Current operation mode: AGENTIC
2025-10-03 12:41:22,373 - INFO - disconnecting snap7 client
2025-10-03 12:41:22,373 - INFO - PLC disconnected
2025-10-03 12:41:22,374 - INFO - destroying snap7 client
2025-10-03 12:41:22,375 - INFO - creating snap7 client
2025-10-03 12:41:22,375 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 12:41:22,499 - INFO - PLC connected (192.168.0.1)
2025-10-03 12:41:22,590 - INFO - Machine mode set to 1
2025-10-03 12:41:22,591 - INFO - Machine mode set to READY
2025-10-03 12:41:22,591 - INFO - disconnecting snap7 client
2025-10-03 12:41:22,592 - INFO - PLC disconnected
2025-10-03 12:41:22,593 - INFO - destroying snap7 client
2025-10-03 12:41:30,021 - INFO - creating snap7 client
2025-10-03 12:41:30,022 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 12:41:30,121 - INFO - PLC connected (192.168.0.1)
2025-10-03 12:41:30,176 - INFO - Current operation mode: AGENTIC
2025-10-03 12:41:30,176 - INFO - disconnecting snap7 client
2025-10-03 12:41:30,177 - INFO - PLC disconnected
2025-10-03 12:41:30,177 - INFO - destroying snap7 client
2025-10-03 12:41:30,178 - INFO - Current state before invoke: {'messages': [HumanMessage(content='run', additional_kwargs={}, response_metadata={})], 'intent': None, 'pending_action': None, 'input_payload': None, 'confirmed': False, 'last_tool_result': None, 'last_mode_check': 1759488082.5944974}
2025-10-03 12:41:30,181 - INFO - Routing message: 'run' (pending_action: None)
2025-10-03 12:41:58,126 - INFO - creating snap7 client
2025-10-03 12:41:58,127 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 12:41:58,258 - INFO - PLC connected (192.168.0.1)
2025-10-03 12:41:59,171 - INFO - Experiment parameters written to PLC DB9 (no machine mode set):
- Operation: AGENTIC
- Core params: TFR=3.0, FRR=6, Vol=7.0, Temp=21.0, Chip=HERRINGBONE, Manifold=LARGE
- Solvent: ETHANOL
2025-10-03 12:41:59,227 - INFO - State after PLC validation: input_payload=InputPayload(tfr=3.0, frr=6, target_volume=7.0, temperature=21.0, chip_id=<ChipID.HERRINGBONE: 1>, manifold_id=<ManifoldID.LARGE: 1>, lab_pressure=2000.0, org_solvent_id=<OrgSolventID.ETHANOL: 0>, operation_mode=<OperationMode.AGENTIC: 2>, machine_mode=<MachineMode.RUN: 2>, custom_solvent=None), pending_action=run
2025-10-03 12:41:59,228 - INFO - disconnecting snap7 client
2025-10-03 12:41:59,228 - INFO - PLC disconnected
2025-10-03 12:41:59,228 - INFO - destroying snap7 client
2025-10-03 12:41:59,230 - INFO - Current state after invoke: {'messages': [HumanMessage(content='run', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters sent to PLC. Checking validation...', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters accepted by PLC. Proceeding with safety checks...', additional_kwargs={}, response_metadata={}), AIMessage(content='Ready to start RUN operation.\n\nPlease verify:\n1. Required fluids are loaded in reservoirs\n2. Chip is correctly seated and oriented\n3. Manifold is properly connected\n4. Lid is CLOSED\n5. Lines are secure\n6. Drain bottle is in place\n7. Pressure supply is within specifications\n\nAI: Ready to start RUN operation.', additional_kwargs={}, response_metadata={})], 'intent': 'run', 'pending_action': 'run', 'input_payload': InputPayload(tfr=3.0, frr=6, target_volume=7.0, temperature=21.0, chip_id=<ChipID.HERRINGBONE: 1>, manifold_id=<ManifoldID.LARGE: 1>, lab_pressure=2000.0, org_solvent_id=<OrgSolventID.ETHANOL: 0>, operation_mode=<OperationMode.AGENTIC: 2>, machine_mode=<MachineMode.RUN: 2>, custom_solvent=None), 'last_mode_check': 1759488082.5944974}
2025-10-03 12:42:07,236 - INFO - Starting run operation...
2025-10-03 12:42:07,237 - INFO - creating snap7 client
2025-10-03 12:42:07,237 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 12:42:07,348 - INFO - PLC connected (192.168.0.1)
2025-10-03 12:42:07,348 - INFO - Clearing all command bits
2025-10-03 12:42:07,348 - INFO - Writing BOOL COMMANDS_RUN.b_START = False
2025-10-03 12:42:07,348 - INFO -   section: COMMANDS_RUN
2025-10-03 12:42:07,350 - INFO -   byte_offset: 258
2025-10-03 12:42:07,350 - INFO -   bit_offset: 0
2025-10-03 12:42:07,350 - INFO -   raw_start: 258.0
2025-10-03 12:42:07,387 - INFO - Successfully wrote COMMANDS_RUN.b_START = False
2025-10-03 12:42:07,432 - INFO - Writing BOOL COMMANDS_RUN.b_PAUSE_PLAY = False
2025-10-03 12:42:07,432 - INFO -   section: COMMANDS_RUN
2025-10-03 12:42:07,432 - INFO -   byte_offset: 258
2025-10-03 12:42:07,434 - INFO -   bit_offset: 1
2025-10-03 12:42:07,434 - INFO -   raw_start: 258.1
2025-10-03 12:42:07,483 - INFO - Successfully wrote COMMANDS_RUN.b_PAUSE_PLAY = False
2025-10-03 12:42:07,507 - INFO - Writing BOOL COMMANDS_RUN.b_CONFIRM = False
2025-10-03 12:42:07,507 - INFO -   section: COMMANDS_RUN
2025-10-03 12:42:07,507 - INFO -   byte_offset: 258
2025-10-03 12:42:07,508 - INFO -   bit_offset: 1
2025-10-03 12:42:07,508 - INFO -   raw_start: 258.2
2025-10-03 12:42:07,579 - INFO - Successfully wrote COMMANDS_RUN.b_CONFIRM = False
2025-10-03 12:42:07,616 - INFO - Writing BOOL COMMANDS_RUN.b_STOP = False
2025-10-03 12:42:07,616 - INFO -   section: COMMANDS_RUN
2025-10-03 12:42:07,617 - INFO -   byte_offset: 258
2025-10-03 12:42:07,617 - INFO -   bit_offset: 3
2025-10-03 12:42:07,618 - INFO -   raw_start: 258.3
2025-10-03 12:42:07,680 - INFO - Successfully wrote COMMANDS_RUN.b_STOP = False
2025-10-03 12:42:07,690 - INFO - Writing BOOL COMMANDS_CLEAN.b_START = False
2025-10-03 12:42:07,690 - INFO -   section: COMMANDS_CLEAN
2025-10-03 12:42:07,691 - INFO -   byte_offset: 260
2025-10-03 12:42:07,691 - INFO -   bit_offset: 0
2025-10-03 12:42:07,692 - INFO -   raw_start: 260.0
2025-10-03 12:42:07,779 - INFO - Successfully wrote COMMANDS_CLEAN.b_START = False
2025-10-03 12:42:07,801 - INFO - Writing BOOL COMMANDS_CLEAN.b_PAUSE_PLAY = False
2025-10-03 12:42:07,801 - INFO -   section: COMMANDS_CLEAN
2025-10-03 12:42:07,802 - INFO -   byte_offset: 260
2025-10-03 12:42:07,802 - INFO -   bit_offset: 1
2025-10-03 12:42:07,803 - INFO -   raw_start: 260.1
2025-10-03 12:42:07,872 - INFO - Successfully wrote COMMANDS_CLEAN.b_PAUSE_PLAY = False
2025-10-03 12:42:07,884 - INFO - Writing BOOL COMMANDS_CLEAN.b_CONFIRM = False
2025-10-03 12:42:07,884 - INFO -   section: COMMANDS_CLEAN
2025-10-03 12:42:07,884 - INFO -   byte_offset: 260
2025-10-03 12:42:07,884 - INFO -   bit_offset: 1
2025-10-03 12:42:07,885 - INFO -   raw_start: 260.2
2025-10-03 12:42:07,925 - INFO - Successfully wrote COMMANDS_CLEAN.b_CONFIRM = False
2025-10-03 12:42:07,952 - INFO - Writing BOOL COMMANDS_CLEAN.b_STOP = False
2025-10-03 12:42:07,952 - INFO -   section: COMMANDS_CLEAN
2025-10-03 12:42:07,952 - INFO -   byte_offset: 260
2025-10-03 12:42:07,954 - INFO -   bit_offset: 3
2025-10-03 12:42:07,954 - INFO -   raw_start: 260.3
2025-10-03 12:42:08,052 - INFO - Successfully wrote COMMANDS_CLEAN.b_STOP = False
2025-10-03 12:42:08,108 - INFO - Writing BOOL COMMANDS_PRESSURE_TEST.b_START = False
2025-10-03 12:42:08,108 - INFO -   section: COMMANDS_PRESSURE_TEST
2025-10-03 12:42:08,109 - INFO -   byte_offset: 262
2025-10-03 12:42:08,109 - INFO -   bit_offset: 0
2025-10-03 12:42:08,109 - INFO -   raw_start: 262.0
2025-10-03 12:42:08,197 - INFO - Successfully wrote COMMANDS_PRESSURE_TEST.b_START = False
2025-10-03 12:42:08,238 - INFO - Writing BOOL COMMANDS_PRESSURE_TEST.b_PAUSE_PLAY = False
2025-10-03 12:42:08,238 - INFO -   section: COMMANDS_PRESSURE_TEST
2025-10-03 12:42:08,238 - INFO -   byte_offset: 262
2025-10-03 12:42:08,239 - INFO -   bit_offset: 1
2025-10-03 12:42:08,239 - INFO -   raw_start: 262.1
2025-10-03 12:42:08,320 - INFO - Successfully wrote COMMANDS_PRESSURE_TEST.b_PAUSE_PLAY = False
2025-10-03 12:42:08,371 - INFO - Writing BOOL COMMANDS_PRESSURE_TEST.b_CONFIRM = False
2025-10-03 12:42:08,371 - INFO -   section: COMMANDS_PRESSURE_TEST
2025-10-03 12:42:08,371 - INFO -   byte_offset: 262
2025-10-03 12:42:08,372 - INFO -   bit_offset: 1
2025-10-03 12:42:08,373 - INFO -   raw_start: 262.2
2025-10-03 12:42:08,419 - INFO - Successfully wrote COMMANDS_PRESSURE_TEST.b_CONFIRM = False
2025-10-03 12:42:08,435 - INFO - Writing BOOL COMMANDS_PRESSURE_TEST.b_STOP = False
2025-10-03 12:42:08,436 - INFO -   section: COMMANDS_PRESSURE_TEST
2025-10-03 12:42:08,436 - INFO -   byte_offset: 262
2025-10-03 12:42:08,436 - INFO -   bit_offset: 3
2025-10-03 12:42:08,437 - INFO -   raw_start: 262.3
2025-10-03 12:42:08,488 - INFO - Successfully wrote COMMANDS_PRESSURE_TEST.b_STOP = False
2025-10-03 12:42:08,549 - INFO - All command bits cleared and verified
2025-10-03 12:42:08,550 - INFO - Writing BOOL COMMANDS_RUN.b_START = True
2025-10-03 12:42:08,550 - INFO -   section: COMMANDS_RUN
2025-10-03 12:42:08,551 - INFO -   byte_offset: 258
2025-10-03 12:42:08,551 - INFO -   bit_offset: 0
2025-10-03 12:42:08,552 - INFO -   raw_start: 258.0
2025-10-03 12:42:08,620 - INFO - Successfully wrote COMMANDS_RUN.b_START = True
2025-10-03 12:42:08,685 - INFO - Operation started: RUN mode with START bit set
2025-10-03 12:42:08,731 - INFO - disconnecting snap7 client
2025-10-03 12:42:08,731 - INFO - PLC disconnected
2025-10-03 12:42:14,998 - INFO - creating snap7 client
2025-10-03 12:42:14,999 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 12:42:15,118 - INFO - PLC connected (192.168.0.1)
2025-10-03 12:42:15,163 - INFO - Current operation mode: AGENTIC
2025-10-03 12:42:15,164 - INFO - disconnecting snap7 client
2025-10-03 12:42:15,164 - INFO - PLC disconnected
2025-10-03 12:42:15,165 - INFO - destroying snap7 client
2025-10-03 12:42:15,165 - INFO - Current state before invoke: {'messages': [HumanMessage(content='run', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters sent to PLC. Checking validation...', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters accepted by PLC. Proceeding with safety checks...', additional_kwargs={}, response_metadata={}), AIMessage(content='Ready to start RUN operation.\n\nPlease verify:\n1. Required fluids are loaded in reservoirs\n2. Chip is correctly seated and oriented\n3. Manifold is properly connected\n4. Lid is CLOSED\n5. Lines are secure\n6. Drain bottle is in place\n7. Pressure supply is within specifications\n\nAI: Ready to start RUN operation.', additional_kwargs={}, response_metadata={}), HumanMessage(content='pause', additional_kwargs={}, response_metadata={})], 'intent': 'run', 'pending_action': None, 'input_payload': InputPayload(tfr=3.0, frr=6, target_volume=7.0, temperature=21.0, chip_id=<ChipID.HERRINGBONE: 1>, manifold_id=<ManifoldID.LARGE: 1>, lab_pressure=2000.0, org_solvent_id=<OrgSolventID.ETHANOL: 0>, operation_mode=<OperationMode.AGENTIC: 2>, machine_mode=<MachineMode.RUN: 2>, custom_solvent=None), 'last_mode_check': 1759488082.5944974, 'confirmed': True}
2025-10-03 12:42:15,166 - INFO - Routing message: 'pause' (pending_action: None)
2025-10-03 12:42:15,167 - INFO - Handling PAUSE command...
2025-10-03 12:42:15,167 - INFO - creating snap7 client
2025-10-03 12:42:15,167 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 12:42:15,181 - ERROR - b' TCP : Unreachable peer'
2025-10-03 12:42:15,182 - ERROR - PLC connection failed, switching to simulator. Reason: b' TCP : Unreachable peer'
Traceback (most recent call last):
  File "C:\Users\NahashonOsinde\OneDrive - Inside Therapeutics\00_Documents\01_AI_Agent_Stuff\LangChain_Graph\TamaraAgent_LangGraph\7_Tamara_Agent\plc_tool.py", line 420, in connect
    self.client.connect(self.ip, self.rack, self.slot)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\NahashonOsinde\miniconda3\envs\LangChain\Lib\site-packages\snap7\client.py", line 197, in connect
    check_error(self._lib.Cli_ConnectTo(self._s7_client, c_char_p(address.encode()), c_int(rack), c_int(slot)))
  File "C:\Users\NahashonOsinde\miniconda3\envs\LangChain\Lib\site-packages\snap7\error.py", line 143, in check_error
    raise RuntimeError(error)
RuntimeError: b' TCP : Unreachable peer'
2025-10-03 12:42:15,185 - INFO - SIM: Connected
2025-10-03 12:42:15,185 - INFO - destroying snap7 client
2025-10-03 12:42:15,185 - INFO - Reading current status...
2025-10-03 12:42:15,186 - INFO - SIM: Read DB9.DBB200 = ['0x0', '0x0']
2025-10-03 12:42:15,186 - INFO - Current status code: 0
2025-10-03 12:42:15,186 - INFO - Cannot pause - status code 0 not in active modes
2025-10-03 12:42:15,187 - INFO - Disconnecting from PLC...
2025-10-03 12:42:15,187 - INFO - SIM: Disconnected
2025-10-03 12:42:15,187 - INFO - PLC disconnected
2025-10-03 12:42:15,189 - INFO - Current state after invoke: {'messages': [HumanMessage(content='run', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters sent to PLC. Checking validation...', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters accepted by PLC. Proceeding with safety checks...', additional_kwargs={}, response_metadata={}), AIMessage(content='Ready to start RUN operation.\n\nPlease verify:\n1. Required fluids are loaded in reservoirs\n2. Chip is correctly seated and oriented\n3. Manifold is properly connected\n4. Lid is CLOSED\n5. Lines are secure\n6. Drain bottle is in place\n7. Pressure supply is within specifications\n\nAI: Ready to start RUN operation.', additional_kwargs={}, response_metadata={}), HumanMessage(content='pause', additional_kwargs={}, response_metadata={}), AIMessage(content="Cannot pause - no operation is active. Use 'status' to check current state.", additional_kwargs={}, response_metadata={})], 'intent': 'other', 'pending_action': None, 'input_payload': InputPayload(tfr=3.0, frr=6, target_volume=7.0, temperature=21.0, chip_id=<ChipID.HERRINGBONE: 1>, manifold_id=<ManifoldID.LARGE: 1>, lab_pressure=2000.0, org_solvent_id=<OrgSolventID.ETHANOL: 0>, operation_mode=<OperationMode.AGENTIC: 2>, machine_mode=<MachineMode.RUN: 2>, custom_solvent=None), 'last_mode_check': 1759488082.5944974}
2025-10-03 12:42:23,034 - INFO - Current state before invoke: {'messages': [HumanMessage(content='run', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters sent to PLC. Checking validation...', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters accepted by PLC. Proceeding with safety checks...', additional_kwargs={}, response_metadata={}), AIMessage(content='Ready to start RUN operation.\n\nPlease verify:\n1. Required fluids are loaded in reservoirs\n2. Chip is correctly seated and oriented\n3. Manifold is properly connected\n4. Lid is CLOSED\n5. Lines are secure\n6. Drain bottle is in place\n7. Pressure supply is within specifications\n\nAI: Ready to start RUN operation.', additional_kwargs={}, response_metadata={}), HumanMessage(content='pause', additional_kwargs={}, response_metadata={}), AIMessage(content="Cannot pause - no operation is active. Use 'status' to check current state.", additional_kwargs={}, response_metadata={}), HumanMessage(content='pause the run', additional_kwargs={}, response_metadata={})], 'intent': 'other', 'pending_action': None, 'input_payload': InputPayload(tfr=3.0, frr=6, target_volume=7.0, temperature=21.0, chip_id=<ChipID.HERRINGBONE: 1>, manifold_id=<ManifoldID.LARGE: 1>, lab_pressure=2000.0, org_solvent_id=<OrgSolventID.ETHANOL: 0>, operation_mode=<OperationMode.AGENTIC: 2>, machine_mode=<MachineMode.RUN: 2>, custom_solvent=None), 'last_mode_check': 1759488082.5944974}
2025-10-03 12:42:23,035 - INFO - Routing message: 'pause the run' (pending_action: None)
2025-10-03 12:42:23,035 - INFO - Handling PAUSE command...
2025-10-03 12:42:23,037 - INFO - creating snap7 client
2025-10-03 12:42:23,037 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 12:42:23,115 - INFO - PLC connected (192.168.0.1)
2025-10-03 12:42:23,115 - INFO - Reading current status...
2025-10-03 12:42:23,152 - INFO - Current status code: 2
2025-10-03 12:42:23,152 - INFO - Setting PAUSE_PLAY bit to TRUE for RUN mode...
2025-10-03 12:42:23,153 - INFO - Pulsing COMMANDS_RUN.b_PAUSE_PLAY to True
2025-10-03 12:42:23,153 - INFO - Writing BOOL COMMANDS_RUN.b_PAUSE_PLAY = True
2025-10-03 12:42:23,153 - INFO -   section: COMMANDS_RUN
2025-10-03 12:42:23,154 - INFO -   byte_offset: 258
2025-10-03 12:42:23,154 - INFO -   bit_offset: 1
2025-10-03 12:42:23,155 - INFO -   raw_start: 258.1
2025-10-03 12:42:23,219 - INFO - Successfully wrote COMMANDS_RUN.b_PAUSE_PLAY = True
2025-10-03 12:42:23,258 - INFO - Command COMMANDS_RUN.b_PAUSE_PLAY successfully set to True and verified
2025-10-03 12:42:23,258 - INFO - Disconnecting from PLC...
2025-10-03 12:42:23,258 - INFO - disconnecting snap7 client
2025-10-03 12:42:23,259 - INFO - PLC disconnected
2025-10-03 12:42:23,259 - INFO - destroying snap7 client
2025-10-03 12:42:23,259 - INFO - Current state after invoke: {'messages': [HumanMessage(content='run', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters sent to PLC. Checking validation...', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters accepted by PLC. Proceeding with safety checks...', additional_kwargs={}, response_metadata={}), AIMessage(content='Ready to start RUN operation.\n\nPlease verify:\n1. Required fluids are loaded in reservoirs\n2. Chip is correctly seated and oriented\n3. Manifold is properly connected\n4. Lid is CLOSED\n5. Lines are secure\n6. Drain bottle is in place\n7. Pressure supply is within specifications\n\nAI: Ready to start RUN operation.', additional_kwargs={}, response_metadata={}), HumanMessage(content='pause', additional_kwargs={}, response_metadata={}), AIMessage(content="Cannot pause - no operation is active. Use 'status' to check current state.", additional_kwargs={}, response_metadata={}), HumanMessage(content='pause the run', additional_kwargs={}, response_metadata={}), AIMessage(content="RUN operation paused. Say 'play' to resume.", additional_kwargs={}, response_metadata={})], 'intent': 'other', 'pending_action': None, 'input_payload': InputPayload(tfr=3.0, frr=6, target_volume=7.0, temperature=21.0, chip_id=<ChipID.HERRINGBONE: 1>, manifold_id=<ManifoldID.LARGE: 1>, lab_pressure=2000.0, org_solvent_id=<OrgSolventID.ETHANOL: 0>, operation_mode=<OperationMode.AGENTIC: 2>, machine_mode=<MachineMode.RUN: 2>, custom_solvent=None), 'last_mode_check': 1759488082.5944974}
2025-10-03 12:42:30,795 - INFO - creating snap7 client
2025-10-03 12:42:30,796 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 12:42:30,885 - INFO - PLC connected (192.168.0.1)
2025-10-03 12:42:30,927 - INFO - Current operation mode: AGENTIC
2025-10-03 12:42:30,927 - INFO - disconnecting snap7 client
2025-10-03 12:42:30,927 - INFO - PLC disconnected
2025-10-03 12:42:30,927 - INFO - destroying snap7 client
2025-10-03 12:42:30,929 - INFO - Current state before invoke: {'messages': [HumanMessage(content='run', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters sent to PLC. Checking validation...', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters accepted by PLC. Proceeding with safety checks...', additional_kwargs={}, response_metadata={}), AIMessage(content='Ready to start RUN operation.\n\nPlease verify:\n1. Required fluids are loaded in reservoirs\n2. Chip is correctly seated and oriented\n3. Manifold is properly connected\n4. Lid is CLOSED\n5. Lines are secure\n6. Drain bottle is in place\n7. Pressure supply is within specifications\n\nAI: Ready to start RUN operation.', additional_kwargs={}, response_metadata={}), HumanMessage(content='pause', additional_kwargs={}, response_metadata={}), AIMessage(content="Cannot pause - no operation is active. Use 'status' to check current state.", additional_kwargs={}, response_metadata={}), HumanMessage(content='pause the run', additional_kwargs={}, response_metadata={}), AIMessage(content="RUN operation paused. Say 'play' to resume.", additional_kwargs={}, response_metadata={}), HumanMessage(content='play', additional_kwargs={}, response_metadata={})], 'intent': 'other', 'pending_action': None, 'input_payload': InputPayload(tfr=3.0, frr=6, target_volume=7.0, temperature=21.0, chip_id=<ChipID.HERRINGBONE: 1>, manifold_id=<ManifoldID.LARGE: 1>, lab_pressure=2000.0, org_solvent_id=<OrgSolventID.ETHANOL: 0>, operation_mode=<OperationMode.AGENTIC: 2>, machine_mode=<MachineMode.RUN: 2>, custom_solvent=None), 'last_mode_check': 1759488082.5944974}
2025-10-03 12:42:30,930 - INFO - Routing message: 'play' (pending_action: None)
2025-10-03 12:42:30,930 - INFO - Handling PLAY/RESUME command...
2025-10-03 12:42:30,930 - INFO - creating snap7 client
2025-10-03 12:42:30,931 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 12:42:31,093 - INFO - PLC connected (192.168.0.1)
2025-10-03 12:42:31,093 - INFO - Reading current status...
2025-10-03 12:42:31,148 - INFO - Current status code: 2
2025-10-03 12:42:31,148 - INFO - Setting PAUSE_PLAY bit to FALSE for RUN mode...
2025-10-03 12:42:31,210 - INFO - Pulsing COMMANDS_RUN.b_PAUSE_PLAY to False
2025-10-03 12:42:31,211 - INFO - Writing BOOL COMMANDS_RUN.b_PAUSE_PLAY = False
2025-10-03 12:42:31,212 - INFO -   section: COMMANDS_RUN
2025-10-03 12:42:31,212 - INFO -   byte_offset: 258
2025-10-03 12:42:31,212 - INFO -   bit_offset: 1
2025-10-03 12:42:31,214 - INFO -   raw_start: 258.1
2025-10-03 12:42:31,260 - INFO - Successfully wrote COMMANDS_RUN.b_PAUSE_PLAY = False
2025-10-03 12:42:31,268 - INFO - Command COMMANDS_RUN.b_PAUSE_PLAY successfully set to False and verified
2025-10-03 12:42:31,268 - INFO - Disconnecting from PLC...
2025-10-03 12:42:31,269 - INFO - disconnecting snap7 client
2025-10-03 12:42:31,269 - INFO - PLC disconnected
2025-10-03 12:42:31,270 - INFO - destroying snap7 client
2025-10-03 12:42:31,271 - INFO - Current state after invoke: {'messages': [HumanMessage(content='run', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters sent to PLC. Checking validation...', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters accepted by PLC. Proceeding with safety checks...', additional_kwargs={}, response_metadata={}), AIMessage(content='Ready to start RUN operation.\n\nPlease verify:\n1. Required fluids are loaded in reservoirs\n2. Chip is correctly seated and oriented\n3. Manifold is properly connected\n4. Lid is CLOSED\n5. Lines are secure\n6. Drain bottle is in place\n7. Pressure supply is within specifications\n\nAI: Ready to start RUN operation.', additional_kwargs={}, response_metadata={}), HumanMessage(content='pause', additional_kwargs={}, response_metadata={}), AIMessage(content="Cannot pause - no operation is active. Use 'status' to check current state.", additional_kwargs={}, response_metadata={}), HumanMessage(content='pause the run', additional_kwargs={}, response_metadata={}), AIMessage(content="RUN operation paused. Say 'play' to resume.", additional_kwargs={}, response_metadata={}), HumanMessage(content='play', additional_kwargs={}, response_metadata={}), AIMessage(content='RUN operation resumed.', additional_kwargs={}, response_metadata={})], 'intent': 'other', 'pending_action': None, 'input_payload': InputPayload(tfr=3.0, frr=6, target_volume=7.0, temperature=21.0, chip_id=<ChipID.HERRINGBONE: 1>, manifold_id=<ManifoldID.LARGE: 1>, lab_pressure=2000.0, org_solvent_id=<OrgSolventID.ETHANOL: 0>, operation_mode=<OperationMode.AGENTIC: 2>, machine_mode=<MachineMode.RUN: 2>, custom_solvent=None), 'last_mode_check': 1759488082.5944974}
2025-10-03 12:42:34,687 - INFO - creating snap7 client
2025-10-03 12:42:34,687 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 12:42:34,807 - INFO - PLC connected (192.168.0.1)
2025-10-03 12:42:34,841 - INFO - Current operation mode: AGENTIC
2025-10-03 12:42:34,841 - INFO - disconnecting snap7 client
2025-10-03 12:42:34,841 - INFO - PLC disconnected
2025-10-03 12:42:34,842 - INFO - destroying snap7 client
2025-10-03 12:42:34,842 - INFO - Current state before invoke: {'messages': [HumanMessage(content='run', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters sent to PLC. Checking validation...', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters accepted by PLC. Proceeding with safety checks...', additional_kwargs={}, response_metadata={}), AIMessage(content='Ready to start RUN operation.\n\nPlease verify:\n1. Required fluids are loaded in reservoirs\n2. Chip is correctly seated and oriented\n3. Manifold is properly connected\n4. Lid is CLOSED\n5. Lines are secure\n6. Drain bottle is in place\n7. Pressure supply is within specifications\n\nAI: Ready to start RUN operation.', additional_kwargs={}, response_metadata={}), HumanMessage(content='pause', additional_kwargs={}, response_metadata={}), AIMessage(content="Cannot pause - no operation is active. Use 'status' to check current state.", additional_kwargs={}, response_metadata={}), HumanMessage(content='pause the run', additional_kwargs={}, response_metadata={}), AIMessage(content="RUN operation paused. Say 'play' to resume.", additional_kwargs={}, response_metadata={}), HumanMessage(content='play', additional_kwargs={}, response_metadata={}), AIMessage(content='RUN operation resumed.', additional_kwargs={}, response_metadata={}), HumanMessage(content='stop', additional_kwargs={}, response_metadata={})], 'intent': 'other', 'pending_action': None, 'input_payload': InputPayload(tfr=3.0, frr=6, target_volume=7.0, temperature=21.0, chip_id=<ChipID.HERRINGBONE: 1>, manifold_id=<ManifoldID.LARGE: 1>, lab_pressure=2000.0, org_solvent_id=<OrgSolventID.ETHANOL: 0>, operation_mode=<OperationMode.AGENTIC: 2>, machine_mode=<MachineMode.RUN: 2>, custom_solvent=None), 'last_mode_check': 1759488082.5944974}
2025-10-03 12:42:34,843 - INFO - Routing message: 'stop' (pending_action: None)
2025-10-03 12:42:34,843 - INFO - Handling STOP command...
2025-10-03 12:42:34,844 - INFO - creating snap7 client
2025-10-03 12:42:34,844 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 12:42:34,980 - INFO - PLC connected (192.168.0.1)
2025-10-03 12:42:34,980 - INFO - Reading current status...
2025-10-03 12:42:35,022 - INFO - Current status code: 2
2025-10-03 12:42:35,022 - INFO - Setting STOP bit to TRUE...
2025-10-03 12:42:35,022 - INFO - Pulsing COMMANDS_RUN.b_STOP to True
2025-10-03 12:42:35,023 - INFO - Writing BOOL COMMANDS_RUN.b_START = False
2025-10-03 12:42:35,023 - INFO -   section: COMMANDS_RUN
2025-10-03 12:42:35,024 - INFO -   byte_offset: 258
2025-10-03 12:42:35,024 - INFO -   bit_offset: 0
2025-10-03 12:42:35,024 - INFO -   raw_start: 258.0
2025-10-03 12:42:35,113 - INFO - Successfully wrote COMMANDS_RUN.b_START = False
2025-10-03 12:42:35,113 - INFO - Writing BOOL COMMANDS_RUN.b_PAUSE_PLAY = False
2025-10-03 12:42:35,113 - INFO -   section: COMMANDS_RUN
2025-10-03 12:42:35,114 - INFO -   byte_offset: 258
2025-10-03 12:42:35,114 - INFO -   bit_offset: 1
2025-10-03 12:42:35,114 - INFO -   raw_start: 258.1
2025-10-03 12:42:35,229 - INFO - Successfully wrote COMMANDS_RUN.b_PAUSE_PLAY = False
2025-10-03 12:42:35,229 - INFO - Writing BOOL COMMANDS_RUN.b_CONFIRM = False
2025-10-03 12:42:35,229 - INFO -   section: COMMANDS_RUN
2025-10-03 12:42:35,230 - INFO -   byte_offset: 258
2025-10-03 12:42:35,230 - INFO -   bit_offset: 1
2025-10-03 12:42:35,230 - INFO -   raw_start: 258.2
2025-10-03 12:42:35,313 - INFO - Successfully wrote COMMANDS_RUN.b_CONFIRM = False
2025-10-03 12:42:35,313 - INFO - Writing BOOL COMMANDS_RUN.b_STOP = True
2025-10-03 12:42:35,313 - INFO -   section: COMMANDS_RUN
2025-10-03 12:42:35,314 - INFO -   byte_offset: 258
2025-10-03 12:42:35,314 - INFO -   bit_offset: 3
2025-10-03 12:42:35,314 - INFO -   raw_start: 258.3
2025-10-03 12:42:35,382 - INFO - Successfully wrote COMMANDS_RUN.b_STOP = True
2025-10-03 12:42:35,402 - INFO - Command COMMANDS_RUN.b_STOP successfully set to True and verified
2025-10-03 12:42:35,433 - INFO - Machine mode set to 1
2025-10-03 12:42:35,433 - INFO - Disconnecting from PLC...
2025-10-03 12:42:35,433 - INFO - disconnecting snap7 client
2025-10-03 12:42:35,433 - INFO - PLC disconnected
2025-10-03 12:42:35,435 - INFO - destroying snap7 client
2025-10-03 12:42:35,436 - INFO - Current state after invoke: {'messages': [HumanMessage(content='run', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters sent to PLC. Checking validation...', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters accepted by PLC. Proceeding with safety checks...', additional_kwargs={}, response_metadata={}), AIMessage(content='Ready to start RUN operation.\n\nPlease verify:\n1. Required fluids are loaded in reservoirs\n2. Chip is correctly seated and oriented\n3. Manifold is properly connected\n4. Lid is CLOSED\n5. Lines are secure\n6. Drain bottle is in place\n7. Pressure supply is within specifications\n\nAI: Ready to start RUN operation.', additional_kwargs={}, response_metadata={}), HumanMessage(content='pause', additional_kwargs={}, response_metadata={}), AIMessage(content="Cannot pause - no operation is active. Use 'status' to check current state.", additional_kwargs={}, response_metadata={}), HumanMessage(content='pause the run', additional_kwargs={}, response_metadata={}), AIMessage(content="RUN operation paused. Say 'play' to resume.", additional_kwargs={}, response_metadata={}), HumanMessage(content='play', additional_kwargs={}, response_metadata={}), AIMessage(content='RUN operation resumed.', additional_kwargs={}, response_metadata={}), HumanMessage(content='stop', additional_kwargs={}, response_metadata={}), AIMessage(content='RUN operation stopped.', additional_kwargs={}, response_metadata={})], 'intent': 'other', 'pending_action': None, 'input_payload': InputPayload(tfr=3.0, frr=6, target_volume=7.0, temperature=21.0, chip_id=<ChipID.HERRINGBONE: 1>, manifold_id=<ManifoldID.LARGE: 1>, lab_pressure=2000.0, org_solvent_id=<OrgSolventID.ETHANOL: 0>, operation_mode=<OperationMode.AGENTIC: 2>, machine_mode=<MachineMode.RUN: 2>, custom_solvent=None), 'last_mode_check': 1759488082.5944974}
2025-10-03 12:42:50,394 - INFO - destroying snap7 client
2025-10-03 12:45:16,138 - INFO - creating snap7 client
2025-10-03 12:45:16,139 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 12:45:16,243 - INFO - PLC connected (192.168.0.1)
2025-10-03 12:45:16,285 - INFO - Current operation mode: CONVENTIONAL
2025-10-03 12:45:16,285 - INFO - disconnecting snap7 client
2025-10-03 12:45:16,286 - INFO - PLC disconnected
2025-10-03 12:45:16,286 - INFO - destroying snap7 client
2025-10-03 12:45:29,933 - INFO - creating snap7 client
2025-10-03 12:45:29,934 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 12:45:29,996 - INFO - PLC connected (192.168.0.1)
2025-10-03 12:45:30,037 - INFO - Current operation mode: AGENTIC
2025-10-03 12:45:30,038 - INFO - disconnecting snap7 client
2025-10-03 12:45:30,038 - INFO - PLC disconnected
2025-10-03 12:45:30,039 - INFO - destroying snap7 client
2025-10-03 12:45:30,039 - INFO - creating snap7 client
2025-10-03 12:45:30,040 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 12:45:30,190 - INFO - PLC connected (192.168.0.1)
2025-10-03 12:45:30,255 - INFO - Machine mode set to 1
2025-10-03 12:45:30,255 - INFO - Machine mode set to READY
2025-10-03 12:45:30,256 - INFO - disconnecting snap7 client
2025-10-03 12:45:30,256 - INFO - PLC disconnected
2025-10-03 12:45:30,256 - INFO - destroying snap7 client
2025-10-03 12:45:36,849 - INFO - Current state before invoke: {'messages': [HumanMessage(content='What is Tamara?', additional_kwargs={}, response_metadata={})], 'intent': None, 'pending_action': None, 'input_payload': None, 'confirmed': False, 'last_tool_result': None, 'last_mode_check': 1759488330.2580078}
2025-10-03 12:45:36,853 - INFO - Routing message: 'what is tamara?' (pending_action: None)
2025-10-03 12:45:37,143 - INFO - Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-10-03 12:45:37,809 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-10-03 12:45:39,848 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 12:45:39,859 - INFO - Current state after invoke: {'messages': [HumanMessage(content='What is Tamara?', additional_kwargs={}, response_metadata={}), AIMessage(content='The TAMARA Nanoparticle Formulation System is a user-friendly, microfluidic-based platform designed for researchers who prioritize ease of use and precision in nanoparticle synthesis. It is a sophisticated instrument that enables efficient and controlled synthesis of lipid nanoparticles, offering a high level of reproducibility and accuracy in formulation design. TAMARA is a valuable tool for scientists engaged in drug delivery research and development, providing a streamlined approach to LNP synthesis.', additional_kwargs={}, response_metadata={})], 'intent': 'ask_kb', 'pending_action': None, 'input_payload': None, 'last_mode_check': 1759488330.2580078}
2025-10-03 12:45:46,638 - INFO - Current state before invoke: {'messages': [HumanMessage(content='What is Tamara?', additional_kwargs={}, response_metadata={}), AIMessage(content='The TAMARA Nanoparticle Formulation System is a user-friendly, microfluidic-based platform designed for researchers who prioritize ease of use and precision in nanoparticle synthesis. It is a sophisticated instrument that enables efficient and controlled synthesis of lipid nanoparticles, offering a high level of reproducibility and accuracy in formulation design. TAMARA is a valuable tool for scientists engaged in drug delivery research and development, providing a streamlined approach to LNP synthesis.', additional_kwargs={}, response_metadata={}), HumanMessage(content='What is Samsung?', additional_kwargs={}, response_metadata={})], 'intent': 'ask_kb', 'pending_action': None, 'input_payload': None, 'last_mode_check': 1759488330.2580078}
2025-10-03 12:45:46,640 - INFO - Routing message: 'what is samsung?' (pending_action: None)
2025-10-03 12:45:47,158 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 12:45:47,482 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-10-03 12:45:48,551 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 12:45:48,553 - INFO - Current state after invoke: {'messages': [HumanMessage(content='What is Tamara?', additional_kwargs={}, response_metadata={}), AIMessage(content='The TAMARA Nanoparticle Formulation System is a user-friendly, microfluidic-based platform designed for researchers who prioritize ease of use and precision in nanoparticle synthesis. It is a sophisticated instrument that enables efficient and controlled synthesis of lipid nanoparticles, offering a high level of reproducibility and accuracy in formulation design. TAMARA is a valuable tool for scientists engaged in drug delivery research and development, providing a streamlined approach to LNP synthesis.', additional_kwargs={}, response_metadata={}), HumanMessage(content='What is Samsung?', additional_kwargs={}, response_metadata={}), AIMessage(content="I specialize in providing information related to lipid nanoparticle (LNP) synthesis and Inside Therapeutics products and services. If you have any questions regarding those topics, feel free to ask, and I'll be happy to assist you.", additional_kwargs={}, response_metadata={})], 'intent': 'ask_kb', 'pending_action': None, 'input_payload': None, 'last_mode_check': 1759488330.2580078}
2025-10-03 12:45:57,348 - INFO - Current state before invoke: {'messages': [HumanMessage(content='What is Tamara?', additional_kwargs={}, response_metadata={}), AIMessage(content='The TAMARA Nanoparticle Formulation System is a user-friendly, microfluidic-based platform designed for researchers who prioritize ease of use and precision in nanoparticle synthesis. It is a sophisticated instrument that enables efficient and controlled synthesis of lipid nanoparticles, offering a high level of reproducibility and accuracy in formulation design. TAMARA is a valuable tool for scientists engaged in drug delivery research and development, providing a streamlined approach to LNP synthesis.', additional_kwargs={}, response_metadata={}), HumanMessage(content='What is Samsung?', additional_kwargs={}, response_metadata={}), AIMessage(content="I specialize in providing information related to lipid nanoparticle (LNP) synthesis and Inside Therapeutics products and services. If you have any questions regarding those topics, feel free to ask, and I'll be happy to assist you.", additional_kwargs={}, response_metadata={}), HumanMessage(content='What are Nano lipid particles?', additional_kwargs={}, response_metadata={})], 'intent': 'ask_kb', 'pending_action': None, 'input_payload': None, 'last_mode_check': 1759488330.2580078}
2025-10-03 12:45:57,350 - INFO - Routing message: 'what are nano lipid particles?' (pending_action: None)
2025-10-03 12:45:58,017 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 12:45:58,468 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-10-03 12:46:00,838 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 12:46:00,841 - INFO - Current state after invoke: {'messages': [HumanMessage(content='What is Tamara?', additional_kwargs={}, response_metadata={}), AIMessage(content='The TAMARA Nanoparticle Formulation System is a user-friendly, microfluidic-based platform designed for researchers who prioritize ease of use and precision in nanoparticle synthesis. It is a sophisticated instrument that enables efficient and controlled synthesis of lipid nanoparticles, offering a high level of reproducibility and accuracy in formulation design. TAMARA is a valuable tool for scientists engaged in drug delivery research and development, providing a streamlined approach to LNP synthesis.', additional_kwargs={}, response_metadata={}), HumanMessage(content='What is Samsung?', additional_kwargs={}, response_metadata={}), AIMessage(content="I specialize in providing information related to lipid nanoparticle (LNP) synthesis and Inside Therapeutics products and services. If you have any questions regarding those topics, feel free to ask, and I'll be happy to assist you.", additional_kwargs={}, response_metadata={}), HumanMessage(content='What are Nano lipid particles?', additional_kwargs={}, response_metadata={}), AIMessage(content='Nano lipid particles, also known as lipid nanoparticles (LNPs), are particles typically ranging in size from 10 to 100 nanometers that are composed of lipids. These nanoparticles are specifically engineered for the encapsulation of RNA and oligonucleotides, which traditional nanoparticles like liposomes or PLGA may not efficiently encapsulate due to the negative charge of the RNA. LNPs are commonly composed of four main types of lipids: ionizable lipids, PEGylated lipids, phospholipids, and sterol lipids. They play a crucial role in drug delivery systems, particularly for nucleic acid-based therapeutics.', additional_kwargs={}, response_metadata={})], 'intent': 'ask_kb', 'pending_action': None, 'input_payload': None, 'last_mode_check': 1759488330.2580078}
2025-10-03 12:46:07,696 - INFO - Current state before invoke: {'messages': [HumanMessage(content='What is Tamara?', additional_kwargs={}, response_metadata={}), AIMessage(content='The TAMARA Nanoparticle Formulation System is a user-friendly, microfluidic-based platform designed for researchers who prioritize ease of use and precision in nanoparticle synthesis. It is a sophisticated instrument that enables efficient and controlled synthesis of lipid nanoparticles, offering a high level of reproducibility and accuracy in formulation design. TAMARA is a valuable tool for scientists engaged in drug delivery research and development, providing a streamlined approach to LNP synthesis.', additional_kwargs={}, response_metadata={}), HumanMessage(content='What is Samsung?', additional_kwargs={}, response_metadata={}), AIMessage(content="I specialize in providing information related to lipid nanoparticle (LNP) synthesis and Inside Therapeutics products and services. If you have any questions regarding those topics, feel free to ask, and I'll be happy to assist you.", additional_kwargs={}, response_metadata={}), HumanMessage(content='What are Nano lipid particles?', additional_kwargs={}, response_metadata={}), AIMessage(content='Nano lipid particles, also known as lipid nanoparticles (LNPs), are particles typically ranging in size from 10 to 100 nanometers that are composed of lipids. These nanoparticles are specifically engineered for the encapsulation of RNA and oligonucleotides, which traditional nanoparticles like liposomes or PLGA may not efficiently encapsulate due to the negative charge of the RNA. LNPs are commonly composed of four main types of lipids: ionizable lipids, PEGylated lipids, phospholipids, and sterol lipids. They play a crucial role in drug delivery systems, particularly for nucleic acid-based therapeutics.', additional_kwargs={}, response_metadata={}), HumanMessage(content='What is NanoPulse?', additional_kwargs={}, response_metadata={})], 'intent': 'ask_kb', 'pending_action': None, 'input_payload': None, 'last_mode_check': 1759488330.2580078}
2025-10-03 12:46:07,697 - INFO - Routing message: 'what is nanopulse?' (pending_action: None)
2025-10-03 12:46:08,229 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 12:46:08,581 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-10-03 12:46:10,671 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 12:46:10,673 - INFO - Current state after invoke: {'messages': [HumanMessage(content='What is Tamara?', additional_kwargs={}, response_metadata={}), AIMessage(content='The TAMARA Nanoparticle Formulation System is a user-friendly, microfluidic-based platform designed for researchers who prioritize ease of use and precision in nanoparticle synthesis. It is a sophisticated instrument that enables efficient and controlled synthesis of lipid nanoparticles, offering a high level of reproducibility and accuracy in formulation design. TAMARA is a valuable tool for scientists engaged in drug delivery research and development, providing a streamlined approach to LNP synthesis.', additional_kwargs={}, response_metadata={}), HumanMessage(content='What is Samsung?', additional_kwargs={}, response_metadata={}), AIMessage(content="I specialize in providing information related to lipid nanoparticle (LNP) synthesis and Inside Therapeutics products and services. If you have any questions regarding those topics, feel free to ask, and I'll be happy to assist you.", additional_kwargs={}, response_metadata={}), HumanMessage(content='What are Nano lipid particles?', additional_kwargs={}, response_metadata={}), AIMessage(content='Nano lipid particles, also known as lipid nanoparticles (LNPs), are particles typically ranging in size from 10 to 100 nanometers that are composed of lipids. These nanoparticles are specifically engineered for the encapsulation of RNA and oligonucleotides, which traditional nanoparticles like liposomes or PLGA may not efficiently encapsulate due to the negative charge of the RNA. LNPs are commonly composed of four main types of lipids: ionizable lipids, PEGylated lipids, phospholipids, and sterol lipids. They play a crucial role in drug delivery systems, particularly for nucleic acid-based therapeutics.', additional_kwargs={}, response_metadata={}), HumanMessage(content='What is NanoPulse?', additional_kwargs={}, response_metadata={}), AIMessage(content='NanoPulse is an upcoming mixer developed by Inside Therapeutics to support consistent mixing conditions for scale-up processes in lipid nanoparticle (LNP) synthesis. This innovative mixer is designed to ensure uniform and reproducible mixing of formulation components, contributing to the production of high-quality LNPs. NanoPulse aims to enhance the efficiency and reliability of LNP synthesis at larger scales, providing researchers with a valuable tool for optimizing their nanoparticle formulations.', additional_kwargs={}, response_metadata={})], 'intent': 'ask_kb', 'pending_action': None, 'input_payload': None, 'last_mode_check': 1759488330.2580078}
2025-10-03 12:46:19,982 - INFO - Current state before invoke: {'messages': [HumanMessage(content='What is Tamara?', additional_kwargs={}, response_metadata={}), AIMessage(content='The TAMARA Nanoparticle Formulation System is a user-friendly, microfluidic-based platform designed for researchers who prioritize ease of use and precision in nanoparticle synthesis. It is a sophisticated instrument that enables efficient and controlled synthesis of lipid nanoparticles, offering a high level of reproducibility and accuracy in formulation design. TAMARA is a valuable tool for scientists engaged in drug delivery research and development, providing a streamlined approach to LNP synthesis.', additional_kwargs={}, response_metadata={}), HumanMessage(content='What is Samsung?', additional_kwargs={}, response_metadata={}), AIMessage(content="I specialize in providing information related to lipid nanoparticle (LNP) synthesis and Inside Therapeutics products and services. If you have any questions regarding those topics, feel free to ask, and I'll be happy to assist you.", additional_kwargs={}, response_metadata={}), HumanMessage(content='What are Nano lipid particles?', additional_kwargs={}, response_metadata={}), AIMessage(content='Nano lipid particles, also known as lipid nanoparticles (LNPs), are particles typically ranging in size from 10 to 100 nanometers that are composed of lipids. These nanoparticles are specifically engineered for the encapsulation of RNA and oligonucleotides, which traditional nanoparticles like liposomes or PLGA may not efficiently encapsulate due to the negative charge of the RNA. LNPs are commonly composed of four main types of lipids: ionizable lipids, PEGylated lipids, phospholipids, and sterol lipids. They play a crucial role in drug delivery systems, particularly for nucleic acid-based therapeutics.', additional_kwargs={}, response_metadata={}), HumanMessage(content='What is NanoPulse?', additional_kwargs={}, response_metadata={}), AIMessage(content='NanoPulse is an upcoming mixer developed by Inside Therapeutics to support consistent mixing conditions for scale-up processes in lipid nanoparticle (LNP) synthesis. This innovative mixer is designed to ensure uniform and reproducible mixing of formulation components, contributing to the production of high-quality LNPs. NanoPulse aims to enhance the efficiency and reliability of LNP synthesis at larger scales, providing researchers with a valuable tool for optimizing their nanoparticle formulations.', additional_kwargs={}, response_metadata={}), HumanMessage(content='I want to do a run with Tamara', additional_kwargs={}, response_metadata={})], 'intent': 'ask_kb', 'pending_action': None, 'input_payload': None, 'last_mode_check': 1759488330.2580078}
2025-10-03 12:46:19,983 - INFO - Routing message: 'i want to do a run with tamara' (pending_action: None)
2025-10-03 12:46:48,376 - INFO - creating snap7 client
2025-10-03 12:46:48,376 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 12:46:48,485 - INFO - PLC connected (192.168.0.1)
2025-10-03 12:46:49,350 - INFO - Experiment parameters written to PLC DB9 (no machine mode set):
- Operation: AGENTIC
- Core params: TFR=3.0, FRR=5, Vol=8.0, Temp=23.0, Chip=BAFFLE, Manifold=LARGE
- Solvent: ETHANOL
2025-10-03 12:46:49,389 - INFO - State after PLC validation: input_payload=InputPayload(tfr=3.0, frr=5, target_volume=8.0, temperature=23.0, chip_id=<ChipID.BAFFLE: 0>, manifold_id=<ManifoldID.LARGE: 1>, lab_pressure=2000.0, org_solvent_id=<OrgSolventID.ETHANOL: 0>, operation_mode=<OperationMode.AGENTIC: 2>, machine_mode=<MachineMode.RUN: 2>, custom_solvent=None), pending_action=run
2025-10-03 12:46:49,390 - INFO - disconnecting snap7 client
2025-10-03 12:46:49,390 - INFO - PLC disconnected
2025-10-03 12:46:49,391 - INFO - destroying snap7 client
2025-10-03 12:46:49,392 - INFO - Current state after invoke: {'messages': [HumanMessage(content='What is Tamara?', additional_kwargs={}, response_metadata={}), AIMessage(content='The TAMARA Nanoparticle Formulation System is a user-friendly, microfluidic-based platform designed for researchers who prioritize ease of use and precision in nanoparticle synthesis. It is a sophisticated instrument that enables efficient and controlled synthesis of lipid nanoparticles, offering a high level of reproducibility and accuracy in formulation design. TAMARA is a valuable tool for scientists engaged in drug delivery research and development, providing a streamlined approach to LNP synthesis.', additional_kwargs={}, response_metadata={}), HumanMessage(content='What is Samsung?', additional_kwargs={}, response_metadata={}), AIMessage(content="I specialize in providing information related to lipid nanoparticle (LNP) synthesis and Inside Therapeutics products and services. If you have any questions regarding those topics, feel free to ask, and I'll be happy to assist you.", additional_kwargs={}, response_metadata={}), HumanMessage(content='What are Nano lipid particles?', additional_kwargs={}, response_metadata={}), AIMessage(content='Nano lipid particles, also known as lipid nanoparticles (LNPs), are particles typically ranging in size from 10 to 100 nanometers that are composed of lipids. These nanoparticles are specifically engineered for the encapsulation of RNA and oligonucleotides, which traditional nanoparticles like liposomes or PLGA may not efficiently encapsulate due to the negative charge of the RNA. LNPs are commonly composed of four main types of lipids: ionizable lipids, PEGylated lipids, phospholipids, and sterol lipids. They play a crucial role in drug delivery systems, particularly for nucleic acid-based therapeutics.', additional_kwargs={}, response_metadata={}), HumanMessage(content='What is NanoPulse?', additional_kwargs={}, response_metadata={}), AIMessage(content='NanoPulse is an upcoming mixer developed by Inside Therapeutics to support consistent mixing conditions for scale-up processes in lipid nanoparticle (LNP) synthesis. This innovative mixer is designed to ensure uniform and reproducible mixing of formulation components, contributing to the production of high-quality LNPs. NanoPulse aims to enhance the efficiency and reliability of LNP synthesis at larger scales, providing researchers with a valuable tool for optimizing their nanoparticle formulations.', additional_kwargs={}, response_metadata={}), HumanMessage(content='I want to do a run with Tamara', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters sent to PLC. Checking validation...', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters accepted by PLC. Proceeding with safety checks...', additional_kwargs={}, response_metadata={}), AIMessage(content='Ready to start RUN operation.\n\nPlease verify:\n1. Required fluids are loaded in reservoirs\n2. Chip is correctly seated and oriented\n3. Manifold is properly connected\n4. Lid is CLOSED\n5. Lines are secure\n6. Drain bottle is in place\n7. Pressure supply is within specifications\n\nAI: Ready to start RUN operation.', additional_kwargs={}, response_metadata={})], 'intent': 'run', 'pending_action': 'run', 'input_payload': InputPayload(tfr=3.0, frr=5, target_volume=8.0, temperature=23.0, chip_id=<ChipID.BAFFLE: 0>, manifold_id=<ManifoldID.LARGE: 1>, lab_pressure=2000.0, org_solvent_id=<OrgSolventID.ETHANOL: 0>, operation_mode=<OperationMode.AGENTIC: 2>, machine_mode=<MachineMode.RUN: 2>, custom_solvent=None), 'last_mode_check': 1759488330.2580078}
2025-10-03 12:46:55,193 - INFO - Starting run operation...
2025-10-03 12:46:55,194 - INFO - creating snap7 client
2025-10-03 12:46:55,195 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 12:46:55,319 - INFO - PLC connected (192.168.0.1)
2025-10-03 12:46:55,320 - INFO - Clearing all command bits
2025-10-03 12:46:55,321 - INFO - Writing BOOL COMMANDS_RUN.b_START = False
2025-10-03 12:46:55,322 - INFO -   section: COMMANDS_RUN
2025-10-03 12:46:55,322 - INFO -   byte_offset: 258
2025-10-03 12:46:55,322 - INFO -   bit_offset: 0
2025-10-03 12:46:55,323 - INFO -   raw_start: 258.0
2025-10-03 12:46:55,379 - INFO - Successfully wrote COMMANDS_RUN.b_START = False
2025-10-03 12:46:55,418 - INFO - Writing BOOL COMMANDS_RUN.b_PAUSE_PLAY = False
2025-10-03 12:46:55,418 - INFO -   section: COMMANDS_RUN
2025-10-03 12:46:55,419 - INFO -   byte_offset: 258
2025-10-03 12:46:55,419 - INFO -   bit_offset: 1
2025-10-03 12:46:55,419 - INFO -   raw_start: 258.1
2025-10-03 12:46:55,483 - INFO - Successfully wrote COMMANDS_RUN.b_PAUSE_PLAY = False
2025-10-03 12:46:55,508 - INFO - Writing BOOL COMMANDS_RUN.b_CONFIRM = False
2025-10-03 12:46:55,508 - INFO -   section: COMMANDS_RUN
2025-10-03 12:46:55,508 - INFO -   byte_offset: 258
2025-10-03 12:46:55,509 - INFO -   bit_offset: 1
2025-10-03 12:46:55,509 - INFO -   raw_start: 258.2
2025-10-03 12:46:55,579 - INFO - Successfully wrote COMMANDS_RUN.b_CONFIRM = False
2025-10-03 12:46:55,621 - INFO - Writing BOOL COMMANDS_RUN.b_STOP = False
2025-10-03 12:46:55,621 - INFO -   section: COMMANDS_RUN
2025-10-03 12:46:55,622 - INFO -   byte_offset: 258
2025-10-03 12:46:55,623 - INFO -   bit_offset: 3
2025-10-03 12:46:55,623 - INFO -   raw_start: 258.3
2025-10-03 12:46:55,667 - INFO - Successfully wrote COMMANDS_RUN.b_STOP = False
2025-10-03 12:46:55,710 - INFO - Writing BOOL COMMANDS_CLEAN.b_START = False
2025-10-03 12:46:55,711 - INFO -   section: COMMANDS_CLEAN
2025-10-03 12:46:55,711 - INFO -   byte_offset: 260
2025-10-03 12:46:55,712 - INFO -   bit_offset: 0
2025-10-03 12:46:55,712 - INFO -   raw_start: 260.0
2025-10-03 12:46:55,766 - INFO - Successfully wrote COMMANDS_CLEAN.b_START = False
2025-10-03 12:46:55,790 - INFO - Writing BOOL COMMANDS_CLEAN.b_PAUSE_PLAY = False
2025-10-03 12:46:55,790 - INFO -   section: COMMANDS_CLEAN
2025-10-03 12:46:55,791 - INFO -   byte_offset: 260
2025-10-03 12:46:55,791 - INFO -   bit_offset: 1
2025-10-03 12:46:55,791 - INFO -   raw_start: 260.1
2025-10-03 12:46:55,830 - INFO - Successfully wrote COMMANDS_CLEAN.b_PAUSE_PLAY = False
2025-10-03 12:46:55,861 - INFO - Writing BOOL COMMANDS_CLEAN.b_CONFIRM = False
2025-10-03 12:46:55,861 - INFO -   section: COMMANDS_CLEAN
2025-10-03 12:46:55,861 - INFO -   byte_offset: 260
2025-10-03 12:46:55,862 - INFO -   bit_offset: 1
2025-10-03 12:46:55,862 - INFO -   raw_start: 260.2
2025-10-03 12:46:55,945 - INFO - Successfully wrote COMMANDS_CLEAN.b_CONFIRM = False
2025-10-03 12:46:55,968 - INFO - Writing BOOL COMMANDS_CLEAN.b_STOP = False
2025-10-03 12:46:55,968 - INFO -   section: COMMANDS_CLEAN
2025-10-03 12:46:55,969 - INFO -   byte_offset: 260
2025-10-03 12:46:55,969 - INFO -   bit_offset: 3
2025-10-03 12:46:55,969 - INFO -   raw_start: 260.3
2025-10-03 12:46:56,028 - INFO - Successfully wrote COMMANDS_CLEAN.b_STOP = False
2025-10-03 12:46:56,063 - INFO - Writing BOOL COMMANDS_PRESSURE_TEST.b_START = False
2025-10-03 12:46:56,063 - INFO -   section: COMMANDS_PRESSURE_TEST
2025-10-03 12:46:56,064 - INFO -   byte_offset: 262
2025-10-03 12:46:56,064 - INFO -   bit_offset: 0
2025-10-03 12:46:56,065 - INFO -   raw_start: 262.0
2025-10-03 12:46:56,156 - INFO - Successfully wrote COMMANDS_PRESSURE_TEST.b_START = False
2025-10-03 12:46:56,211 - INFO - Writing BOOL COMMANDS_PRESSURE_TEST.b_PAUSE_PLAY = False
2025-10-03 12:46:56,211 - INFO -   section: COMMANDS_PRESSURE_TEST
2025-10-03 12:46:56,211 - INFO -   byte_offset: 262
2025-10-03 12:46:56,211 - INFO -   bit_offset: 1
2025-10-03 12:46:56,212 - INFO -   raw_start: 262.1
2025-10-03 12:46:56,277 - INFO - Successfully wrote COMMANDS_PRESSURE_TEST.b_PAUSE_PLAY = False
2025-10-03 12:46:56,311 - INFO - Writing BOOL COMMANDS_PRESSURE_TEST.b_CONFIRM = False
2025-10-03 12:46:56,311 - INFO -   section: COMMANDS_PRESSURE_TEST
2025-10-03 12:46:56,312 - INFO -   byte_offset: 262
2025-10-03 12:46:56,312 - INFO -   bit_offset: 1
2025-10-03 12:46:56,312 - INFO -   raw_start: 262.2
2025-10-03 12:46:56,367 - INFO - Successfully wrote COMMANDS_PRESSURE_TEST.b_CONFIRM = False
2025-10-03 12:46:56,391 - INFO - Writing BOOL COMMANDS_PRESSURE_TEST.b_STOP = False
2025-10-03 12:46:56,393 - INFO -   section: COMMANDS_PRESSURE_TEST
2025-10-03 12:46:56,394 - INFO -   byte_offset: 262
2025-10-03 12:46:56,394 - INFO -   bit_offset: 3
2025-10-03 12:46:56,395 - INFO -   raw_start: 262.3
2025-10-03 12:46:56,463 - INFO - Successfully wrote COMMANDS_PRESSURE_TEST.b_STOP = False
2025-10-03 12:46:56,503 - INFO - All command bits cleared and verified
2025-10-03 12:46:56,503 - INFO - Writing BOOL COMMANDS_RUN.b_START = True
2025-10-03 12:46:56,504 - INFO -   section: COMMANDS_RUN
2025-10-03 12:46:56,505 - INFO -   byte_offset: 258
2025-10-03 12:46:56,505 - INFO -   bit_offset: 0
2025-10-03 12:46:56,506 - INFO -   raw_start: 258.0
2025-10-03 12:46:56,596 - INFO - Successfully wrote COMMANDS_RUN.b_START = True
2025-10-03 12:46:56,665 - INFO - Operation started: RUN mode with START bit set
2025-10-03 12:46:56,743 - INFO - disconnecting snap7 client
2025-10-03 12:46:56,743 - INFO - PLC disconnected
2025-10-03 12:47:03,541 - INFO - Current state before invoke: {'messages': [HumanMessage(content='What is Tamara?', additional_kwargs={}, response_metadata={}), AIMessage(content='The TAMARA Nanoparticle Formulation System is a user-friendly, microfluidic-based platform designed for researchers who prioritize ease of use and precision in nanoparticle synthesis. It is a sophisticated instrument that enables efficient and controlled synthesis of lipid nanoparticles, offering a high level of reproducibility and accuracy in formulation design. TAMARA is a valuable tool for scientists engaged in drug delivery research and development, providing a streamlined approach to LNP synthesis.', additional_kwargs={}, response_metadata={}), HumanMessage(content='What is Samsung?', additional_kwargs={}, response_metadata={}), AIMessage(content="I specialize in providing information related to lipid nanoparticle (LNP) synthesis and Inside Therapeutics products and services. If you have any questions regarding those topics, feel free to ask, and I'll be happy to assist you.", additional_kwargs={}, response_metadata={}), HumanMessage(content='What are Nano lipid particles?', additional_kwargs={}, response_metadata={}), AIMessage(content='Nano lipid particles, also known as lipid nanoparticles (LNPs), are particles typically ranging in size from 10 to 100 nanometers that are composed of lipids. These nanoparticles are specifically engineered for the encapsulation of RNA and oligonucleotides, which traditional nanoparticles like liposomes or PLGA may not efficiently encapsulate due to the negative charge of the RNA. LNPs are commonly composed of four main types of lipids: ionizable lipids, PEGylated lipids, phospholipids, and sterol lipids. They play a crucial role in drug delivery systems, particularly for nucleic acid-based therapeutics.', additional_kwargs={}, response_metadata={}), HumanMessage(content='What is NanoPulse?', additional_kwargs={}, response_metadata={}), AIMessage(content='NanoPulse is an upcoming mixer developed by Inside Therapeutics to support consistent mixing conditions for scale-up processes in lipid nanoparticle (LNP) synthesis. This innovative mixer is designed to ensure uniform and reproducible mixing of formulation components, contributing to the production of high-quality LNPs. NanoPulse aims to enhance the efficiency and reliability of LNP synthesis at larger scales, providing researchers with a valuable tool for optimizing their nanoparticle formulations.', additional_kwargs={}, response_metadata={}), HumanMessage(content='I want to do a run with Tamara', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters sent to PLC. Checking validation...', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters accepted by PLC. Proceeding with safety checks...', additional_kwargs={}, response_metadata={}), AIMessage(content='Ready to start RUN operation.\n\nPlease verify:\n1. Required fluids are loaded in reservoirs\n2. Chip is correctly seated and oriented\n3. Manifold is properly connected\n4. Lid is CLOSED\n5. Lines are secure\n6. Drain bottle is in place\n7. Pressure supply is within specifications\n\nAI: Ready to start RUN operation.', additional_kwargs={}, response_metadata={}), HumanMessage(content='pause the run', additional_kwargs={}, response_metadata={})], 'intent': 'run', 'pending_action': None, 'input_payload': InputPayload(tfr=3.0, frr=5, target_volume=8.0, temperature=23.0, chip_id=<ChipID.BAFFLE: 0>, manifold_id=<ManifoldID.LARGE: 1>, lab_pressure=2000.0, org_solvent_id=<OrgSolventID.ETHANOL: 0>, operation_mode=<OperationMode.AGENTIC: 2>, machine_mode=<MachineMode.RUN: 2>, custom_solvent=None), 'last_mode_check': 1759488330.2580078, 'confirmed': True}
2025-10-03 12:47:03,543 - INFO - Routing message: 'pause the run' (pending_action: None)
2025-10-03 12:47:03,543 - INFO - Handling PAUSE command...
2025-10-03 12:47:03,544 - INFO - creating snap7 client
2025-10-03 12:47:03,544 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 12:47:03,632 - INFO - PLC connected (192.168.0.1)
2025-10-03 12:47:03,632 - INFO - Reading current status...
2025-10-03 12:47:03,671 - INFO - Current status code: 2
2025-10-03 12:47:03,671 - INFO - Setting PAUSE_PLAY bit to TRUE for RUN mode...
2025-10-03 12:47:03,671 - INFO - Pulsing COMMANDS_RUN.b_PAUSE_PLAY to True
2025-10-03 12:47:03,672 - INFO - Writing BOOL COMMANDS_RUN.b_PAUSE_PLAY = True
2025-10-03 12:47:03,672 - INFO -   section: COMMANDS_RUN
2025-10-03 12:47:03,672 - INFO -   byte_offset: 258
2025-10-03 12:47:03,673 - INFO -   bit_offset: 1
2025-10-03 12:47:03,673 - INFO -   raw_start: 258.1
2025-10-03 12:47:03,739 - INFO - Successfully wrote COMMANDS_RUN.b_PAUSE_PLAY = True
2025-10-03 12:47:03,781 - INFO - Command COMMANDS_RUN.b_PAUSE_PLAY successfully set to True and verified
2025-10-03 12:47:03,781 - INFO - Disconnecting from PLC...
2025-10-03 12:47:03,781 - INFO - disconnecting snap7 client
2025-10-03 12:47:03,782 - INFO - PLC disconnected
2025-10-03 12:47:03,782 - INFO - destroying snap7 client
2025-10-03 12:47:03,783 - INFO - Current state after invoke: {'messages': [HumanMessage(content='What is Tamara?', additional_kwargs={}, response_metadata={}), AIMessage(content='The TAMARA Nanoparticle Formulation System is a user-friendly, microfluidic-based platform designed for researchers who prioritize ease of use and precision in nanoparticle synthesis. It is a sophisticated instrument that enables efficient and controlled synthesis of lipid nanoparticles, offering a high level of reproducibility and accuracy in formulation design. TAMARA is a valuable tool for scientists engaged in drug delivery research and development, providing a streamlined approach to LNP synthesis.', additional_kwargs={}, response_metadata={}), HumanMessage(content='What is Samsung?', additional_kwargs={}, response_metadata={}), AIMessage(content="I specialize in providing information related to lipid nanoparticle (LNP) synthesis and Inside Therapeutics products and services. If you have any questions regarding those topics, feel free to ask, and I'll be happy to assist you.", additional_kwargs={}, response_metadata={}), HumanMessage(content='What are Nano lipid particles?', additional_kwargs={}, response_metadata={}), AIMessage(content='Nano lipid particles, also known as lipid nanoparticles (LNPs), are particles typically ranging in size from 10 to 100 nanometers that are composed of lipids. These nanoparticles are specifically engineered for the encapsulation of RNA and oligonucleotides, which traditional nanoparticles like liposomes or PLGA may not efficiently encapsulate due to the negative charge of the RNA. LNPs are commonly composed of four main types of lipids: ionizable lipids, PEGylated lipids, phospholipids, and sterol lipids. They play a crucial role in drug delivery systems, particularly for nucleic acid-based therapeutics.', additional_kwargs={}, response_metadata={}), HumanMessage(content='What is NanoPulse?', additional_kwargs={}, response_metadata={}), AIMessage(content='NanoPulse is an upcoming mixer developed by Inside Therapeutics to support consistent mixing conditions for scale-up processes in lipid nanoparticle (LNP) synthesis. This innovative mixer is designed to ensure uniform and reproducible mixing of formulation components, contributing to the production of high-quality LNPs. NanoPulse aims to enhance the efficiency and reliability of LNP synthesis at larger scales, providing researchers with a valuable tool for optimizing their nanoparticle formulations.', additional_kwargs={}, response_metadata={}), HumanMessage(content='I want to do a run with Tamara', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters sent to PLC. Checking validation...', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters accepted by PLC. Proceeding with safety checks...', additional_kwargs={}, response_metadata={}), AIMessage(content='Ready to start RUN operation.\n\nPlease verify:\n1. Required fluids are loaded in reservoirs\n2. Chip is correctly seated and oriented\n3. Manifold is properly connected\n4. Lid is CLOSED\n5. Lines are secure\n6. Drain bottle is in place\n7. Pressure supply is within specifications\n\nAI: Ready to start RUN operation.', additional_kwargs={}, response_metadata={}), HumanMessage(content='pause the run', additional_kwargs={}, response_metadata={}), AIMessage(content="RUN operation paused. Say 'play' to resume.", additional_kwargs={}, response_metadata={})], 'intent': 'other', 'pending_action': None, 'input_payload': InputPayload(tfr=3.0, frr=5, target_volume=8.0, temperature=23.0, chip_id=<ChipID.BAFFLE: 0>, manifold_id=<ManifoldID.LARGE: 1>, lab_pressure=2000.0, org_solvent_id=<OrgSolventID.ETHANOL: 0>, operation_mode=<OperationMode.AGENTIC: 2>, machine_mode=<MachineMode.RUN: 2>, custom_solvent=None), 'last_mode_check': 1759488330.2580078}
2025-10-03 12:47:09,396 - INFO - creating snap7 client
2025-10-03 12:47:09,396 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 12:47:09,481 - INFO - PLC connected (192.168.0.1)
2025-10-03 12:47:09,513 - INFO - Current operation mode: AGENTIC
2025-10-03 12:47:09,513 - INFO - disconnecting snap7 client
2025-10-03 12:47:09,513 - INFO - PLC disconnected
2025-10-03 12:47:09,514 - INFO - destroying snap7 client
2025-10-03 12:47:09,514 - INFO - Current state before invoke: {'messages': [HumanMessage(content='What is Tamara?', additional_kwargs={}, response_metadata={}), AIMessage(content='The TAMARA Nanoparticle Formulation System is a user-friendly, microfluidic-based platform designed for researchers who prioritize ease of use and precision in nanoparticle synthesis. It is a sophisticated instrument that enables efficient and controlled synthesis of lipid nanoparticles, offering a high level of reproducibility and accuracy in formulation design. TAMARA is a valuable tool for scientists engaged in drug delivery research and development, providing a streamlined approach to LNP synthesis.', additional_kwargs={}, response_metadata={}), HumanMessage(content='What is Samsung?', additional_kwargs={}, response_metadata={}), AIMessage(content="I specialize in providing information related to lipid nanoparticle (LNP) synthesis and Inside Therapeutics products and services. If you have any questions regarding those topics, feel free to ask, and I'll be happy to assist you.", additional_kwargs={}, response_metadata={}), HumanMessage(content='What are Nano lipid particles?', additional_kwargs={}, response_metadata={}), AIMessage(content='Nano lipid particles, also known as lipid nanoparticles (LNPs), are particles typically ranging in size from 10 to 100 nanometers that are composed of lipids. These nanoparticles are specifically engineered for the encapsulation of RNA and oligonucleotides, which traditional nanoparticles like liposomes or PLGA may not efficiently encapsulate due to the negative charge of the RNA. LNPs are commonly composed of four main types of lipids: ionizable lipids, PEGylated lipids, phospholipids, and sterol lipids. They play a crucial role in drug delivery systems, particularly for nucleic acid-based therapeutics.', additional_kwargs={}, response_metadata={}), HumanMessage(content='What is NanoPulse?', additional_kwargs={}, response_metadata={}), AIMessage(content='NanoPulse is an upcoming mixer developed by Inside Therapeutics to support consistent mixing conditions for scale-up processes in lipid nanoparticle (LNP) synthesis. This innovative mixer is designed to ensure uniform and reproducible mixing of formulation components, contributing to the production of high-quality LNPs. NanoPulse aims to enhance the efficiency and reliability of LNP synthesis at larger scales, providing researchers with a valuable tool for optimizing their nanoparticle formulations.', additional_kwargs={}, response_metadata={}), HumanMessage(content='I want to do a run with Tamara', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters sent to PLC. Checking validation...', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters accepted by PLC. Proceeding with safety checks...', additional_kwargs={}, response_metadata={}), AIMessage(content='Ready to start RUN operation.\n\nPlease verify:\n1. Required fluids are loaded in reservoirs\n2. Chip is correctly seated and oriented\n3. Manifold is properly connected\n4. Lid is CLOSED\n5. Lines are secure\n6. Drain bottle is in place\n7. Pressure supply is within specifications\n\nAI: Ready to start RUN operation.', additional_kwargs={}, response_metadata={}), HumanMessage(content='pause the run', additional_kwargs={}, response_metadata={}), AIMessage(content="RUN operation paused. Say 'play' to resume.", additional_kwargs={}, response_metadata={}), HumanMessage(content='Play', additional_kwargs={}, response_metadata={})], 'intent': 'other', 'pending_action': None, 'input_payload': InputPayload(tfr=3.0, frr=5, target_volume=8.0, temperature=23.0, chip_id=<ChipID.BAFFLE: 0>, manifold_id=<ManifoldID.LARGE: 1>, lab_pressure=2000.0, org_solvent_id=<OrgSolventID.ETHANOL: 0>, operation_mode=<OperationMode.AGENTIC: 2>, machine_mode=<MachineMode.RUN: 2>, custom_solvent=None), 'last_mode_check': 1759488330.2580078}
2025-10-03 12:47:09,515 - INFO - Routing message: 'play' (pending_action: None)
2025-10-03 12:47:09,515 - INFO - Handling PLAY/RESUME command...
2025-10-03 12:47:09,517 - INFO - creating snap7 client
2025-10-03 12:47:09,517 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 12:47:09,679 - INFO - PLC connected (192.168.0.1)
2025-10-03 12:47:09,679 - INFO - Reading current status...
2025-10-03 12:47:09,723 - INFO - Current status code: 2
2025-10-03 12:47:09,723 - INFO - Setting PAUSE_PLAY bit to FALSE for RUN mode...
2025-10-03 12:47:09,724 - INFO - Pulsing COMMANDS_RUN.b_PAUSE_PLAY to False
2025-10-03 12:47:09,724 - INFO - Writing BOOL COMMANDS_RUN.b_PAUSE_PLAY = False
2025-10-03 12:47:09,725 - INFO -   section: COMMANDS_RUN
2025-10-03 12:47:09,725 - INFO -   byte_offset: 258
2025-10-03 12:47:09,725 - INFO -   bit_offset: 1
2025-10-03 12:47:09,726 - INFO -   raw_start: 258.1
2025-10-03 12:47:09,796 - INFO - Successfully wrote COMMANDS_RUN.b_PAUSE_PLAY = False
2025-10-03 12:47:09,808 - INFO - Command COMMANDS_RUN.b_PAUSE_PLAY successfully set to False and verified
2025-10-03 12:47:09,808 - INFO - Disconnecting from PLC...
2025-10-03 12:47:09,808 - INFO - disconnecting snap7 client
2025-10-03 12:47:09,809 - INFO - PLC disconnected
2025-10-03 12:47:09,809 - INFO - destroying snap7 client
2025-10-03 12:47:09,810 - INFO - Current state after invoke: {'messages': [HumanMessage(content='What is Tamara?', additional_kwargs={}, response_metadata={}), AIMessage(content='The TAMARA Nanoparticle Formulation System is a user-friendly, microfluidic-based platform designed for researchers who prioritize ease of use and precision in nanoparticle synthesis. It is a sophisticated instrument that enables efficient and controlled synthesis of lipid nanoparticles, offering a high level of reproducibility and accuracy in formulation design. TAMARA is a valuable tool for scientists engaged in drug delivery research and development, providing a streamlined approach to LNP synthesis.', additional_kwargs={}, response_metadata={}), HumanMessage(content='What is Samsung?', additional_kwargs={}, response_metadata={}), AIMessage(content="I specialize in providing information related to lipid nanoparticle (LNP) synthesis and Inside Therapeutics products and services. If you have any questions regarding those topics, feel free to ask, and I'll be happy to assist you.", additional_kwargs={}, response_metadata={}), HumanMessage(content='What are Nano lipid particles?', additional_kwargs={}, response_metadata={}), AIMessage(content='Nano lipid particles, also known as lipid nanoparticles (LNPs), are particles typically ranging in size from 10 to 100 nanometers that are composed of lipids. These nanoparticles are specifically engineered for the encapsulation of RNA and oligonucleotides, which traditional nanoparticles like liposomes or PLGA may not efficiently encapsulate due to the negative charge of the RNA. LNPs are commonly composed of four main types of lipids: ionizable lipids, PEGylated lipids, phospholipids, and sterol lipids. They play a crucial role in drug delivery systems, particularly for nucleic acid-based therapeutics.', additional_kwargs={}, response_metadata={}), HumanMessage(content='What is NanoPulse?', additional_kwargs={}, response_metadata={}), AIMessage(content='NanoPulse is an upcoming mixer developed by Inside Therapeutics to support consistent mixing conditions for scale-up processes in lipid nanoparticle (LNP) synthesis. This innovative mixer is designed to ensure uniform and reproducible mixing of formulation components, contributing to the production of high-quality LNPs. NanoPulse aims to enhance the efficiency and reliability of LNP synthesis at larger scales, providing researchers with a valuable tool for optimizing their nanoparticle formulations.', additional_kwargs={}, response_metadata={}), HumanMessage(content='I want to do a run with Tamara', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters sent to PLC. Checking validation...', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters accepted by PLC. Proceeding with safety checks...', additional_kwargs={}, response_metadata={}), AIMessage(content='Ready to start RUN operation.\n\nPlease verify:\n1. Required fluids are loaded in reservoirs\n2. Chip is correctly seated and oriented\n3. Manifold is properly connected\n4. Lid is CLOSED\n5. Lines are secure\n6. Drain bottle is in place\n7. Pressure supply is within specifications\n\nAI: Ready to start RUN operation.', additional_kwargs={}, response_metadata={}), HumanMessage(content='pause the run', additional_kwargs={}, response_metadata={}), AIMessage(content="RUN operation paused. Say 'play' to resume.", additional_kwargs={}, response_metadata={}), HumanMessage(content='Play', additional_kwargs={}, response_metadata={}), AIMessage(content='RUN operation resumed.', additional_kwargs={}, response_metadata={})], 'intent': 'other', 'pending_action': None, 'input_payload': InputPayload(tfr=3.0, frr=5, target_volume=8.0, temperature=23.0, chip_id=<ChipID.BAFFLE: 0>, manifold_id=<ManifoldID.LARGE: 1>, lab_pressure=2000.0, org_solvent_id=<OrgSolventID.ETHANOL: 0>, operation_mode=<OperationMode.AGENTIC: 2>, machine_mode=<MachineMode.RUN: 2>, custom_solvent=None), 'last_mode_check': 1759488330.2580078}
2025-10-03 12:47:17,729 - INFO - Current state before invoke: {'messages': [HumanMessage(content='What is Tamara?', additional_kwargs={}, response_metadata={}), AIMessage(content='The TAMARA Nanoparticle Formulation System is a user-friendly, microfluidic-based platform designed for researchers who prioritize ease of use and precision in nanoparticle synthesis. It is a sophisticated instrument that enables efficient and controlled synthesis of lipid nanoparticles, offering a high level of reproducibility and accuracy in formulation design. TAMARA is a valuable tool for scientists engaged in drug delivery research and development, providing a streamlined approach to LNP synthesis.', additional_kwargs={}, response_metadata={}), HumanMessage(content='What is Samsung?', additional_kwargs={}, response_metadata={}), AIMessage(content="I specialize in providing information related to lipid nanoparticle (LNP) synthesis and Inside Therapeutics products and services. If you have any questions regarding those topics, feel free to ask, and I'll be happy to assist you.", additional_kwargs={}, response_metadata={}), HumanMessage(content='What are Nano lipid particles?', additional_kwargs={}, response_metadata={}), AIMessage(content='Nano lipid particles, also known as lipid nanoparticles (LNPs), are particles typically ranging in size from 10 to 100 nanometers that are composed of lipids. These nanoparticles are specifically engineered for the encapsulation of RNA and oligonucleotides, which traditional nanoparticles like liposomes or PLGA may not efficiently encapsulate due to the negative charge of the RNA. LNPs are commonly composed of four main types of lipids: ionizable lipids, PEGylated lipids, phospholipids, and sterol lipids. They play a crucial role in drug delivery systems, particularly for nucleic acid-based therapeutics.', additional_kwargs={}, response_metadata={}), HumanMessage(content='What is NanoPulse?', additional_kwargs={}, response_metadata={}), AIMessage(content='NanoPulse is an upcoming mixer developed by Inside Therapeutics to support consistent mixing conditions for scale-up processes in lipid nanoparticle (LNP) synthesis. This innovative mixer is designed to ensure uniform and reproducible mixing of formulation components, contributing to the production of high-quality LNPs. NanoPulse aims to enhance the efficiency and reliability of LNP synthesis at larger scales, providing researchers with a valuable tool for optimizing their nanoparticle formulations.', additional_kwargs={}, response_metadata={}), HumanMessage(content='I want to do a run with Tamara', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters sent to PLC. Checking validation...', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters accepted by PLC. Proceeding with safety checks...', additional_kwargs={}, response_metadata={}), AIMessage(content='Ready to start RUN operation.\n\nPlease verify:\n1. Required fluids are loaded in reservoirs\n2. Chip is correctly seated and oriented\n3. Manifold is properly connected\n4. Lid is CLOSED\n5. Lines are secure\n6. Drain bottle is in place\n7. Pressure supply is within specifications\n\nAI: Ready to start RUN operation.', additional_kwargs={}, response_metadata={}), HumanMessage(content='pause the run', additional_kwargs={}, response_metadata={}), AIMessage(content="RUN operation paused. Say 'play' to resume.", additional_kwargs={}, response_metadata={}), HumanMessage(content='Play', additional_kwargs={}, response_metadata={}), AIMessage(content='RUN operation resumed.', additional_kwargs={}, response_metadata={}), HumanMessage(content='Stop the run', additional_kwargs={}, response_metadata={})], 'intent': 'other', 'pending_action': None, 'input_payload': InputPayload(tfr=3.0, frr=5, target_volume=8.0, temperature=23.0, chip_id=<ChipID.BAFFLE: 0>, manifold_id=<ManifoldID.LARGE: 1>, lab_pressure=2000.0, org_solvent_id=<OrgSolventID.ETHANOL: 0>, operation_mode=<OperationMode.AGENTIC: 2>, machine_mode=<MachineMode.RUN: 2>, custom_solvent=None), 'last_mode_check': 1759488330.2580078}
2025-10-03 12:47:17,731 - INFO - Routing message: 'stop the run' (pending_action: None)
2025-10-03 12:47:17,732 - INFO - Handling STOP command...
2025-10-03 12:47:17,733 - INFO - creating snap7 client
2025-10-03 12:47:17,733 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 12:47:17,839 - INFO - PLC connected (192.168.0.1)
2025-10-03 12:47:17,839 - INFO - Reading current status...
2025-10-03 12:47:17,874 - INFO - Current status code: 2
2025-10-03 12:47:17,874 - INFO - Setting STOP bit to TRUE...
2025-10-03 12:47:17,874 - INFO - Pulsing COMMANDS_RUN.b_STOP to True
2025-10-03 12:47:17,875 - INFO - Writing BOOL COMMANDS_RUN.b_START = False
2025-10-03 12:47:17,875 - INFO -   section: COMMANDS_RUN
2025-10-03 12:47:17,875 - INFO -   byte_offset: 258
2025-10-03 12:47:17,876 - INFO -   bit_offset: 0
2025-10-03 12:47:17,876 - INFO -   raw_start: 258.0
2025-10-03 12:47:17,901 - INFO - Successfully wrote COMMANDS_RUN.b_START = False
2025-10-03 12:47:17,901 - INFO - Writing BOOL COMMANDS_RUN.b_PAUSE_PLAY = False
2025-10-03 12:47:17,901 - INFO -   section: COMMANDS_RUN
2025-10-03 12:47:17,901 - INFO -   byte_offset: 258
2025-10-03 12:47:17,902 - INFO -   bit_offset: 1
2025-10-03 12:47:17,902 - INFO -   raw_start: 258.1
2025-10-03 12:47:17,953 - INFO - Successfully wrote COMMANDS_RUN.b_PAUSE_PLAY = False
2025-10-03 12:47:17,953 - INFO - Writing BOOL COMMANDS_RUN.b_CONFIRM = False
2025-10-03 12:47:17,954 - INFO -   section: COMMANDS_RUN
2025-10-03 12:47:17,954 - INFO -   byte_offset: 258
2025-10-03 12:47:17,955 - INFO -   bit_offset: 1
2025-10-03 12:47:17,955 - INFO -   raw_start: 258.2
2025-10-03 12:47:18,032 - INFO - Successfully wrote COMMANDS_RUN.b_CONFIRM = False
2025-10-03 12:47:18,032 - INFO - Writing BOOL COMMANDS_RUN.b_STOP = True
2025-10-03 12:47:18,032 - INFO -   section: COMMANDS_RUN
2025-10-03 12:47:18,033 - INFO -   byte_offset: 258
2025-10-03 12:47:18,033 - INFO -   bit_offset: 3
2025-10-03 12:47:18,033 - INFO -   raw_start: 258.3
2025-10-03 12:47:18,141 - INFO - Successfully wrote COMMANDS_RUN.b_STOP = True
2025-10-03 12:47:18,171 - INFO - Command COMMANDS_RUN.b_STOP successfully set to True and verified
2025-10-03 12:47:18,262 - INFO - Machine mode set to 1
2025-10-03 12:47:18,262 - INFO - Disconnecting from PLC...
2025-10-03 12:47:18,263 - INFO - disconnecting snap7 client
2025-10-03 12:47:18,263 - INFO - PLC disconnected
2025-10-03 12:47:18,264 - INFO - destroying snap7 client
2025-10-03 12:47:18,265 - INFO - Current state after invoke: {'messages': [HumanMessage(content='What is Tamara?', additional_kwargs={}, response_metadata={}), AIMessage(content='The TAMARA Nanoparticle Formulation System is a user-friendly, microfluidic-based platform designed for researchers who prioritize ease of use and precision in nanoparticle synthesis. It is a sophisticated instrument that enables efficient and controlled synthesis of lipid nanoparticles, offering a high level of reproducibility and accuracy in formulation design. TAMARA is a valuable tool for scientists engaged in drug delivery research and development, providing a streamlined approach to LNP synthesis.', additional_kwargs={}, response_metadata={}), HumanMessage(content='What is Samsung?', additional_kwargs={}, response_metadata={}), AIMessage(content="I specialize in providing information related to lipid nanoparticle (LNP) synthesis and Inside Therapeutics products and services. If you have any questions regarding those topics, feel free to ask, and I'll be happy to assist you.", additional_kwargs={}, response_metadata={}), HumanMessage(content='What are Nano lipid particles?', additional_kwargs={}, response_metadata={}), AIMessage(content='Nano lipid particles, also known as lipid nanoparticles (LNPs), are particles typically ranging in size from 10 to 100 nanometers that are composed of lipids. These nanoparticles are specifically engineered for the encapsulation of RNA and oligonucleotides, which traditional nanoparticles like liposomes or PLGA may not efficiently encapsulate due to the negative charge of the RNA. LNPs are commonly composed of four main types of lipids: ionizable lipids, PEGylated lipids, phospholipids, and sterol lipids. They play a crucial role in drug delivery systems, particularly for nucleic acid-based therapeutics.', additional_kwargs={}, response_metadata={}), HumanMessage(content='What is NanoPulse?', additional_kwargs={}, response_metadata={}), AIMessage(content='NanoPulse is an upcoming mixer developed by Inside Therapeutics to support consistent mixing conditions for scale-up processes in lipid nanoparticle (LNP) synthesis. This innovative mixer is designed to ensure uniform and reproducible mixing of formulation components, contributing to the production of high-quality LNPs. NanoPulse aims to enhance the efficiency and reliability of LNP synthesis at larger scales, providing researchers with a valuable tool for optimizing their nanoparticle formulations.', additional_kwargs={}, response_metadata={}), HumanMessage(content='I want to do a run with Tamara', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters sent to PLC. Checking validation...', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters accepted by PLC. Proceeding with safety checks...', additional_kwargs={}, response_metadata={}), AIMessage(content='Ready to start RUN operation.\n\nPlease verify:\n1. Required fluids are loaded in reservoirs\n2. Chip is correctly seated and oriented\n3. Manifold is properly connected\n4. Lid is CLOSED\n5. Lines are secure\n6. Drain bottle is in place\n7. Pressure supply is within specifications\n\nAI: Ready to start RUN operation.', additional_kwargs={}, response_metadata={}), HumanMessage(content='pause the run', additional_kwargs={}, response_metadata={}), AIMessage(content="RUN operation paused. Say 'play' to resume.", additional_kwargs={}, response_metadata={}), HumanMessage(content='Play', additional_kwargs={}, response_metadata={}), AIMessage(content='RUN operation resumed.', additional_kwargs={}, response_metadata={}), HumanMessage(content='Stop the run', additional_kwargs={}, response_metadata={}), AIMessage(content='RUN operation stopped.', additional_kwargs={}, response_metadata={})], 'intent': 'other', 'pending_action': None, 'input_payload': InputPayload(tfr=3.0, frr=5, target_volume=8.0, temperature=23.0, chip_id=<ChipID.BAFFLE: 0>, manifold_id=<ManifoldID.LARGE: 1>, lab_pressure=2000.0, org_solvent_id=<OrgSolventID.ETHANOL: 0>, operation_mode=<OperationMode.AGENTIC: 2>, machine_mode=<MachineMode.RUN: 2>, custom_solvent=None), 'last_mode_check': 1759488330.2580078}
2025-10-03 12:47:21,856 - INFO - destroying snap7 client
2025-10-03 14:22:16,865 - INFO - creating snap7 client
2025-10-03 14:22:16,867 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 14:22:16,936 - INFO - PLC connected (192.168.0.1)
2025-10-03 14:22:16,988 - INFO - Current operation mode: CONVENTIONAL
2025-10-03 14:22:16,989 - INFO - disconnecting snap7 client
2025-10-03 14:22:16,989 - INFO - PLC disconnected
2025-10-03 14:22:16,990 - INFO - destroying snap7 client
2025-10-03 14:28:45,932 - INFO - creating snap7 client
2025-10-03 14:28:45,933 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 14:28:46,060 - INFO - PLC connected (192.168.0.1)
2025-10-03 14:28:46,086 - INFO - Current operation mode: CONVENTIONAL
2025-10-03 14:28:46,087 - INFO - disconnecting snap7 client
2025-10-03 14:28:46,088 - INFO - PLC disconnected
2025-10-03 14:28:46,088 - INFO - destroying snap7 client
2025-10-03 14:32:13,695 - INFO - creating snap7 client
2025-10-03 14:32:13,696 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 14:32:13,779 - INFO - PLC connected (192.168.0.1)
2025-10-03 14:32:13,837 - INFO - Current operation mode: CONVENTIONAL
2025-10-03 14:32:13,838 - INFO - disconnecting snap7 client
2025-10-03 14:32:13,839 - INFO - PLC disconnected
2025-10-03 14:32:13,839 - INFO - destroying snap7 client
2025-10-03 14:32:49,968 - INFO - creating snap7 client
2025-10-03 14:32:49,969 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 14:32:50,099 - INFO - PLC connected (192.168.0.1)
2025-10-03 14:32:50,144 - INFO - Current operation mode: CONVENTIONAL
2025-10-03 14:32:50,145 - INFO - disconnecting snap7 client
2025-10-03 14:32:50,145 - INFO - PLC disconnected
2025-10-03 14:32:50,146 - INFO - destroying snap7 client
2025-10-03 14:36:30,572 - INFO - creating snap7 client
2025-10-03 14:36:30,573 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 14:36:30,634 - INFO - PLC connected (192.168.0.1)
2025-10-03 14:36:30,677 - INFO - Current operation mode: CONVENTIONAL
2025-10-03 14:36:30,678 - INFO - disconnecting snap7 client
2025-10-03 14:36:30,679 - INFO - PLC disconnected
2025-10-03 14:36:30,680 - INFO - destroying snap7 client
2025-10-03 14:36:47,455 - INFO - creating snap7 client
2025-10-03 14:36:47,457 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 14:36:47,587 - INFO - PLC connected (192.168.0.1)
2025-10-03 14:36:47,624 - INFO - Current operation mode: AGENTIC
2025-10-03 14:36:47,625 - INFO - disconnecting snap7 client
2025-10-03 14:36:47,626 - INFO - PLC disconnected
2025-10-03 14:36:47,626 - INFO - destroying snap7 client
2025-10-03 14:36:47,627 - INFO - creating snap7 client
2025-10-03 14:36:47,627 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 14:36:47,756 - INFO - PLC connected (192.168.0.1)
2025-10-03 14:36:47,831 - INFO - Machine mode set to 1
2025-10-03 14:36:47,832 - INFO - Machine mode set to READY
2025-10-03 14:36:47,832 - INFO - disconnecting snap7 client
2025-10-03 14:36:47,832 - INFO - PLC disconnected
2025-10-03 14:36:47,833 - INFO - destroying snap7 client
2025-10-03 14:36:54,037 - INFO - Current state before invoke: {'messages': [HumanMessage(content='What is Tamara?', additional_kwargs={}, response_metadata={})], 'intent': None, 'pending_action': None, 'input_payload': None, 'confirmed': False, 'last_tool_result': None, 'last_mode_check': 1759495007.8334403}
2025-10-03 14:36:54,042 - INFO - Routing message: 'what is tamara?' (pending_action: None)
2025-10-03 14:36:54,372 - INFO - Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-10-03 14:36:55,429 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-10-03 14:36:56,985 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 14:36:56,999 - INFO - Current state after invoke: {'messages': [HumanMessage(content='What is Tamara?', additional_kwargs={}, response_metadata={}), AIMessage(content='The TAMARA Nanoparticle Formulation System is a user-friendly, microfluidic-based platform designed for researchers who prioritize ease of use and precision in nanoparticle synthesis. It is a sophisticated instrument that enables efficient and controlled synthesis of lipid nanoparticles for various research applications. If you need more detailed information about TAMARA, feel free to ask!', additional_kwargs={}, response_metadata={})], 'intent': 'ask_kb', 'pending_action': None, 'input_payload': None, 'last_mode_check': 1759495007.8334403}
2025-10-03 14:37:03,105 - INFO - Current state before invoke: {'messages': [HumanMessage(content='What is Tamara?', additional_kwargs={}, response_metadata={}), AIMessage(content='The TAMARA Nanoparticle Formulation System is a user-friendly, microfluidic-based platform designed for researchers who prioritize ease of use and precision in nanoparticle synthesis. It is a sophisticated instrument that enables efficient and controlled synthesis of lipid nanoparticles for various research applications. If you need more detailed information about TAMARA, feel free to ask!', additional_kwargs={}, response_metadata={}), HumanMessage(content='What is Samsung?', additional_kwargs={}, response_metadata={})], 'intent': 'ask_kb', 'pending_action': None, 'input_payload': None, 'last_mode_check': 1759495007.8334403}
2025-10-03 14:37:03,106 - INFO - Routing message: 'what is samsung?' (pending_action: None)
2025-10-03 14:37:04,022 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 14:37:04,267 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-10-03 14:37:05,622 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 14:37:05,624 - INFO - Current state after invoke: {'messages': [HumanMessage(content='What is Tamara?', additional_kwargs={}, response_metadata={}), AIMessage(content='The TAMARA Nanoparticle Formulation System is a user-friendly, microfluidic-based platform designed for researchers who prioritize ease of use and precision in nanoparticle synthesis. It is a sophisticated instrument that enables efficient and controlled synthesis of lipid nanoparticles for various research applications. If you need more detailed information about TAMARA, feel free to ask!', additional_kwargs={}, response_metadata={}), HumanMessage(content='What is Samsung?', additional_kwargs={}, response_metadata={}), AIMessage(content='I specialize in providing information related to lipid nanoparticle (LNP) synthesis and the TAMARA Nanoparticle Formulation System. If you have any questions specifically related to these topics or need assistance with LNP synthesis techniques, TAMARA usage, or related products and services from Inside Therapeutics, please feel free to ask.', additional_kwargs={}, response_metadata={})], 'intent': 'ask_kb', 'pending_action': None, 'input_payload': None, 'last_mode_check': 1759495007.8334403}
2025-10-03 14:37:14,761 - INFO - Current state before invoke: {'messages': [HumanMessage(content='What is Tamara?', additional_kwargs={}, response_metadata={}), AIMessage(content='The TAMARA Nanoparticle Formulation System is a user-friendly, microfluidic-based platform designed for researchers who prioritize ease of use and precision in nanoparticle synthesis. It is a sophisticated instrument that enables efficient and controlled synthesis of lipid nanoparticles for various research applications. If you need more detailed information about TAMARA, feel free to ask!', additional_kwargs={}, response_metadata={}), HumanMessage(content='What is Samsung?', additional_kwargs={}, response_metadata={}), AIMessage(content='I specialize in providing information related to lipid nanoparticle (LNP) synthesis and the TAMARA Nanoparticle Formulation System. If you have any questions specifically related to these topics or need assistance with LNP synthesis techniques, TAMARA usage, or related products and services from Inside Therapeutics, please feel free to ask.', additional_kwargs={}, response_metadata={}), HumanMessage(content='What are lipid nano particles?', additional_kwargs={}, response_metadata={})], 'intent': 'ask_kb', 'pending_action': None, 'input_payload': None, 'last_mode_check': 1759495007.8334403}
2025-10-03 14:37:14,763 - INFO - Routing message: 'what are lipid nano particles?' (pending_action: None)
2025-10-03 14:37:15,312 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 14:37:16,189 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-10-03 14:37:19,402 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 14:37:19,437 - INFO - Current state after invoke: {'messages': [HumanMessage(content='What is Tamara?', additional_kwargs={}, response_metadata={}), AIMessage(content='The TAMARA Nanoparticle Formulation System is a user-friendly, microfluidic-based platform designed for researchers who prioritize ease of use and precision in nanoparticle synthesis. It is a sophisticated instrument that enables efficient and controlled synthesis of lipid nanoparticles for various research applications. If you need more detailed information about TAMARA, feel free to ask!', additional_kwargs={}, response_metadata={}), HumanMessage(content='What is Samsung?', additional_kwargs={}, response_metadata={}), AIMessage(content='I specialize in providing information related to lipid nanoparticle (LNP) synthesis and the TAMARA Nanoparticle Formulation System. If you have any questions specifically related to these topics or need assistance with LNP synthesis techniques, TAMARA usage, or related products and services from Inside Therapeutics, please feel free to ask.', additional_kwargs={}, response_metadata={}), HumanMessage(content='What are lipid nano particles?', additional_kwargs={}, response_metadata={}), AIMessage(content='Lipid nanoparticles (LNPs) are particles typically ranging in size from 10 to 100 nanometers that are composed of lipids. These nanoparticles are specifically engineered for the encapsulation of RNA and oligonucleotides, which are challenging to encapsulate efficiently using standard nanoparticles like liposomes or PLGA due to the negative charge of the RNA molecules. LNPs are composed of four main types of lipids: ionizable lipids, PEGylated lipids, phospholipids, and sterol lipids. They play a crucial role in the delivery of nucleic acids such as mRNA, siRNA, and tRNA to specific locations in the body for therapeutic purposes. If you have more specific questions about LNPs or their synthesis, feel free to ask for further details.', additional_kwargs={}, response_metadata={})], 'intent': 'ask_kb', 'pending_action': None, 'input_payload': None, 'last_mode_check': 1759495007.8334403}
2025-10-03 14:37:30,375 - INFO - Current state before invoke: {'messages': [HumanMessage(content='What is Tamara?', additional_kwargs={}, response_metadata={}), AIMessage(content='The TAMARA Nanoparticle Formulation System is a user-friendly, microfluidic-based platform designed for researchers who prioritize ease of use and precision in nanoparticle synthesis. It is a sophisticated instrument that enables efficient and controlled synthesis of lipid nanoparticles for various research applications. If you need more detailed information about TAMARA, feel free to ask!', additional_kwargs={}, response_metadata={}), HumanMessage(content='What is Samsung?', additional_kwargs={}, response_metadata={}), AIMessage(content='I specialize in providing information related to lipid nanoparticle (LNP) synthesis and the TAMARA Nanoparticle Formulation System. If you have any questions specifically related to these topics or need assistance with LNP synthesis techniques, TAMARA usage, or related products and services from Inside Therapeutics, please feel free to ask.', additional_kwargs={}, response_metadata={}), HumanMessage(content='What are lipid nano particles?', additional_kwargs={}, response_metadata={}), AIMessage(content='Lipid nanoparticles (LNPs) are particles typically ranging in size from 10 to 100 nanometers that are composed of lipids. These nanoparticles are specifically engineered for the encapsulation of RNA and oligonucleotides, which are challenging to encapsulate efficiently using standard nanoparticles like liposomes or PLGA due to the negative charge of the RNA molecules. LNPs are composed of four main types of lipids: ionizable lipids, PEGylated lipids, phospholipids, and sterol lipids. They play a crucial role in the delivery of nucleic acids such as mRNA, siRNA, and tRNA to specific locations in the body for therapeutic purposes. If you have more specific questions about LNPs or their synthesis, feel free to ask for further details.', additional_kwargs={}, response_metadata={}), HumanMessage(content='I want to do a run with Tamara', additional_kwargs={}, response_metadata={})], 'intent': 'ask_kb', 'pending_action': None, 'input_payload': None, 'last_mode_check': 1759495007.8334403}
2025-10-03 14:37:30,376 - INFO - Routing message: 'i want to do a run with tamara' (pending_action: None)
2025-10-03 14:38:14,227 - INFO - creating snap7 client
2025-10-03 14:38:14,228 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 14:38:14,308 - INFO - PLC connected (192.168.0.1)
2025-10-03 14:38:15,233 - INFO - Experiment parameters written to PLC DB9 (no machine mode set):
- Operation: AGENTIC
- Core params: TFR=3.0, FRR=6, Vol=8.0, Temp=23.0, Chip=HERRINGBONE, Manifold=LARGE
- Solvent: CUSTOM (Solvent1)
2025-10-03 14:38:15,256 - INFO - State after PLC validation: input_payload=InputPayload(tfr=3.0, frr=6, target_volume=8.0, temperature=23.0, chip_id=<ChipID.HERRINGBONE: 1>, manifold_id=<ManifoldID.LARGE: 1>, lab_pressure=2000.0, org_solvent_id=<OrgSolventID.CUSTOM: 4>, operation_mode=<OperationMode.AGENTIC: 2>, machine_mode=<MachineMode.RUN: 2>, custom_solvent=CustomSolvent(name='Solvent1', viscosity=1184.0, sensitivity=22.0, molar_volume=24.0)), pending_action=run
2025-10-03 14:38:15,257 - INFO - disconnecting snap7 client
2025-10-03 14:38:15,257 - INFO - PLC disconnected
2025-10-03 14:38:15,258 - INFO - destroying snap7 client
2025-10-03 14:38:15,260 - INFO - Current state after invoke: {'messages': [HumanMessage(content='What is Tamara?', additional_kwargs={}, response_metadata={}), AIMessage(content='The TAMARA Nanoparticle Formulation System is a user-friendly, microfluidic-based platform designed for researchers who prioritize ease of use and precision in nanoparticle synthesis. It is a sophisticated instrument that enables efficient and controlled synthesis of lipid nanoparticles for various research applications. If you need more detailed information about TAMARA, feel free to ask!', additional_kwargs={}, response_metadata={}), HumanMessage(content='What is Samsung?', additional_kwargs={}, response_metadata={}), AIMessage(content='I specialize in providing information related to lipid nanoparticle (LNP) synthesis and the TAMARA Nanoparticle Formulation System. If you have any questions specifically related to these topics or need assistance with LNP synthesis techniques, TAMARA usage, or related products and services from Inside Therapeutics, please feel free to ask.', additional_kwargs={}, response_metadata={}), HumanMessage(content='What are lipid nano particles?', additional_kwargs={}, response_metadata={}), AIMessage(content='Lipid nanoparticles (LNPs) are particles typically ranging in size from 10 to 100 nanometers that are composed of lipids. These nanoparticles are specifically engineered for the encapsulation of RNA and oligonucleotides, which are challenging to encapsulate efficiently using standard nanoparticles like liposomes or PLGA due to the negative charge of the RNA molecules. LNPs are composed of four main types of lipids: ionizable lipids, PEGylated lipids, phospholipids, and sterol lipids. They play a crucial role in the delivery of nucleic acids such as mRNA, siRNA, and tRNA to specific locations in the body for therapeutic purposes. If you have more specific questions about LNPs or their synthesis, feel free to ask for further details.', additional_kwargs={}, response_metadata={}), HumanMessage(content='I want to do a run with Tamara', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters sent to PLC. Checking validation...', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters accepted by PLC. Proceeding with safety checks...', additional_kwargs={}, response_metadata={}), AIMessage(content='Ready to start RUN operation.\n\nPlease verify:\n1. Required fluids are loaded in reservoirs\n2. Chip is correctly seated and oriented\n3. Manifold is properly connected\n4. Lid is CLOSED\n5. Lines are secure\n6. Drain bottle is in place\n7. Pressure supply is within specifications\n\nAI: Ready to start RUN operation.', additional_kwargs={}, response_metadata={})], 'intent': 'run', 'pending_action': 'run', 'input_payload': InputPayload(tfr=3.0, frr=6, target_volume=8.0, temperature=23.0, chip_id=<ChipID.HERRINGBONE: 1>, manifold_id=<ManifoldID.LARGE: 1>, lab_pressure=2000.0, org_solvent_id=<OrgSolventID.CUSTOM: 4>, operation_mode=<OperationMode.AGENTIC: 2>, machine_mode=<MachineMode.RUN: 2>, custom_solvent=CustomSolvent(name='Solvent1', viscosity=1184.0, sensitivity=22.0, molar_volume=24.0)), 'last_mode_check': 1759495007.8334403}
2025-10-03 14:38:22,214 - INFO - Starting run operation...
2025-10-03 14:38:22,214 - INFO - creating snap7 client
2025-10-03 14:38:22,216 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 14:38:22,330 - INFO - PLC connected (192.168.0.1)
2025-10-03 14:38:22,330 - INFO - Clearing all command bits
2025-10-03 14:38:22,330 - INFO - Writing BOOL COMMANDS_RUN.b_START = False
2025-10-03 14:38:22,331 - INFO -   section: COMMANDS_RUN
2025-10-03 14:38:22,331 - INFO -   byte_offset: 258
2025-10-03 14:38:22,331 - INFO -   bit_offset: 0
2025-10-03 14:38:22,331 - INFO -   raw_start: 258.0
2025-10-03 14:38:22,421 - INFO - Successfully wrote COMMANDS_RUN.b_START = False
2025-10-03 14:38:22,464 - INFO - Writing BOOL COMMANDS_RUN.b_PAUSE_PLAY = False
2025-10-03 14:38:22,464 - INFO -   section: COMMANDS_RUN
2025-10-03 14:38:22,465 - INFO -   byte_offset: 258
2025-10-03 14:38:22,465 - INFO -   bit_offset: 1
2025-10-03 14:38:22,465 - INFO -   raw_start: 258.1
2025-10-03 14:38:22,551 - INFO - Successfully wrote COMMANDS_RUN.b_PAUSE_PLAY = False
2025-10-03 14:38:22,593 - INFO - Writing BOOL COMMANDS_RUN.b_CONFIRM = False
2025-10-03 14:38:22,593 - INFO -   section: COMMANDS_RUN
2025-10-03 14:38:22,595 - INFO -   byte_offset: 258
2025-10-03 14:38:22,595 - INFO -   bit_offset: 1
2025-10-03 14:38:22,595 - INFO -   raw_start: 258.2
2025-10-03 14:38:22,620 - INFO - Successfully wrote COMMANDS_RUN.b_CONFIRM = False
2025-10-03 14:38:22,630 - INFO - Writing BOOL COMMANDS_RUN.b_STOP = False
2025-10-03 14:38:22,630 - INFO -   section: COMMANDS_RUN
2025-10-03 14:38:22,630 - INFO -   byte_offset: 258
2025-10-03 14:38:22,632 - INFO -   bit_offset: 3
2025-10-03 14:38:22,632 - INFO -   raw_start: 258.3
2025-10-03 14:38:22,698 - INFO - Successfully wrote COMMANDS_RUN.b_STOP = False
2025-10-03 14:38:22,725 - INFO - Writing BOOL COMMANDS_CLEAN.b_START = False
2025-10-03 14:38:22,725 - INFO -   section: COMMANDS_CLEAN
2025-10-03 14:38:22,726 - INFO -   byte_offset: 260
2025-10-03 14:38:22,726 - INFO -   bit_offset: 0
2025-10-03 14:38:22,726 - INFO -   raw_start: 260.0
2025-10-03 14:38:22,766 - INFO - Successfully wrote COMMANDS_CLEAN.b_START = False
2025-10-03 14:38:22,809 - INFO - Writing BOOL COMMANDS_CLEAN.b_PAUSE_PLAY = False
2025-10-03 14:38:22,809 - INFO -   section: COMMANDS_CLEAN
2025-10-03 14:38:22,810 - INFO -   byte_offset: 260
2025-10-03 14:38:22,810 - INFO -   bit_offset: 1
2025-10-03 14:38:22,810 - INFO -   raw_start: 260.1
2025-10-03 14:38:22,883 - INFO - Successfully wrote COMMANDS_CLEAN.b_PAUSE_PLAY = False
2025-10-03 14:38:22,927 - INFO - Writing BOOL COMMANDS_CLEAN.b_CONFIRM = False
2025-10-03 14:38:22,927 - INFO -   section: COMMANDS_CLEAN
2025-10-03 14:38:22,927 - INFO -   byte_offset: 260
2025-10-03 14:38:22,929 - INFO -   bit_offset: 1
2025-10-03 14:38:22,929 - INFO -   raw_start: 260.2
2025-10-03 14:38:23,010 - INFO - Successfully wrote COMMANDS_CLEAN.b_CONFIRM = False
2025-10-03 14:38:23,058 - INFO - Writing BOOL COMMANDS_CLEAN.b_STOP = False
2025-10-03 14:38:23,058 - INFO -   section: COMMANDS_CLEAN
2025-10-03 14:38:23,059 - INFO -   byte_offset: 260
2025-10-03 14:38:23,059 - INFO -   bit_offset: 3
2025-10-03 14:38:23,059 - INFO -   raw_start: 260.3
2025-10-03 14:38:23,110 - INFO - Successfully wrote COMMANDS_CLEAN.b_STOP = False
2025-10-03 14:38:23,121 - INFO - Writing BOOL COMMANDS_PRESSURE_TEST.b_START = False
2025-10-03 14:38:23,121 - INFO -   section: COMMANDS_PRESSURE_TEST
2025-10-03 14:38:23,121 - INFO -   byte_offset: 262
2025-10-03 14:38:23,122 - INFO -   bit_offset: 0
2025-10-03 14:38:23,122 - INFO -   raw_start: 262.0
2025-10-03 14:38:23,179 - INFO - Successfully wrote COMMANDS_PRESSURE_TEST.b_START = False
2025-10-03 14:38:23,201 - INFO - Writing BOOL COMMANDS_PRESSURE_TEST.b_PAUSE_PLAY = False
2025-10-03 14:38:23,201 - INFO -   section: COMMANDS_PRESSURE_TEST
2025-10-03 14:38:23,201 - INFO -   byte_offset: 262
2025-10-03 14:38:23,202 - INFO -   bit_offset: 1
2025-10-03 14:38:23,202 - INFO -   raw_start: 262.1
2025-10-03 14:38:23,305 - INFO - Successfully wrote COMMANDS_PRESSURE_TEST.b_PAUSE_PLAY = False
2025-10-03 14:38:23,349 - INFO - Writing BOOL COMMANDS_PRESSURE_TEST.b_CONFIRM = False
2025-10-03 14:38:23,349 - INFO -   section: COMMANDS_PRESSURE_TEST
2025-10-03 14:38:23,349 - INFO -   byte_offset: 262
2025-10-03 14:38:23,350 - INFO -   bit_offset: 1
2025-10-03 14:38:23,350 - INFO -   raw_start: 262.2
2025-10-03 14:38:23,405 - INFO - Successfully wrote COMMANDS_PRESSURE_TEST.b_CONFIRM = False
2025-10-03 14:38:23,428 - INFO - Writing BOOL COMMANDS_PRESSURE_TEST.b_STOP = False
2025-10-03 14:38:23,428 - INFO -   section: COMMANDS_PRESSURE_TEST
2025-10-03 14:38:23,428 - INFO -   byte_offset: 262
2025-10-03 14:38:23,429 - INFO -   bit_offset: 3
2025-10-03 14:38:23,429 - INFO -   raw_start: 262.3
2025-10-03 14:38:23,457 - INFO - Successfully wrote COMMANDS_PRESSURE_TEST.b_STOP = False
2025-10-03 14:38:23,492 - INFO - All command bits cleared and verified
2025-10-03 14:38:23,492 - INFO - Writing BOOL COMMANDS_RUN.b_START = True
2025-10-03 14:38:23,492 - INFO -   section: COMMANDS_RUN
2025-10-03 14:38:23,492 - INFO -   byte_offset: 258
2025-10-03 14:38:23,493 - INFO -   bit_offset: 0
2025-10-03 14:38:23,493 - INFO -   raw_start: 258.0
2025-10-03 14:38:23,551 - INFO - Successfully wrote COMMANDS_RUN.b_START = True
2025-10-03 14:38:23,622 - INFO - Operation started: RUN mode with START bit set
2025-10-03 14:38:23,658 - INFO - disconnecting snap7 client
2025-10-03 14:38:23,658 - INFO - PLC disconnected
2025-10-03 14:38:29,438 - INFO - Current state before invoke: {'messages': [HumanMessage(content='What is Tamara?', additional_kwargs={}, response_metadata={}), AIMessage(content='The TAMARA Nanoparticle Formulation System is a user-friendly, microfluidic-based platform designed for researchers who prioritize ease of use and precision in nanoparticle synthesis. It is a sophisticated instrument that enables efficient and controlled synthesis of lipid nanoparticles for various research applications. If you need more detailed information about TAMARA, feel free to ask!', additional_kwargs={}, response_metadata={}), HumanMessage(content='What is Samsung?', additional_kwargs={}, response_metadata={}), AIMessage(content='I specialize in providing information related to lipid nanoparticle (LNP) synthesis and the TAMARA Nanoparticle Formulation System. If you have any questions specifically related to these topics or need assistance with LNP synthesis techniques, TAMARA usage, or related products and services from Inside Therapeutics, please feel free to ask.', additional_kwargs={}, response_metadata={}), HumanMessage(content='What are lipid nano particles?', additional_kwargs={}, response_metadata={}), AIMessage(content='Lipid nanoparticles (LNPs) are particles typically ranging in size from 10 to 100 nanometers that are composed of lipids. These nanoparticles are specifically engineered for the encapsulation of RNA and oligonucleotides, which are challenging to encapsulate efficiently using standard nanoparticles like liposomes or PLGA due to the negative charge of the RNA molecules. LNPs are composed of four main types of lipids: ionizable lipids, PEGylated lipids, phospholipids, and sterol lipids. They play a crucial role in the delivery of nucleic acids such as mRNA, siRNA, and tRNA to specific locations in the body for therapeutic purposes. If you have more specific questions about LNPs or their synthesis, feel free to ask for further details.', additional_kwargs={}, response_metadata={}), HumanMessage(content='I want to do a run with Tamara', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters sent to PLC. Checking validation...', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters accepted by PLC. Proceeding with safety checks...', additional_kwargs={}, response_metadata={}), AIMessage(content='Ready to start RUN operation.\n\nPlease verify:\n1. Required fluids are loaded in reservoirs\n2. Chip is correctly seated and oriented\n3. Manifold is properly connected\n4. Lid is CLOSED\n5. Lines are secure\n6. Drain bottle is in place\n7. Pressure supply is within specifications\n\nAI: Ready to start RUN operation.', additional_kwargs={}, response_metadata={}), HumanMessage(content='pause the run', additional_kwargs={}, response_metadata={})], 'intent': 'run', 'pending_action': None, 'input_payload': InputPayload(tfr=3.0, frr=6, target_volume=8.0, temperature=23.0, chip_id=<ChipID.HERRINGBONE: 1>, manifold_id=<ManifoldID.LARGE: 1>, lab_pressure=2000.0, org_solvent_id=<OrgSolventID.CUSTOM: 4>, operation_mode=<OperationMode.AGENTIC: 2>, machine_mode=<MachineMode.RUN: 2>, custom_solvent=CustomSolvent(name='Solvent1', viscosity=1184.0, sensitivity=22.0, molar_volume=24.0)), 'last_mode_check': 1759495007.8334403, 'confirmed': True}
2025-10-03 14:38:29,439 - INFO - Routing message: 'pause the run' (pending_action: None)
2025-10-03 14:38:29,439 - INFO - Handling PAUSE command...
2025-10-03 14:38:29,440 - INFO - creating snap7 client
2025-10-03 14:38:29,440 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 14:38:29,544 - INFO - PLC connected (192.168.0.1)
2025-10-03 14:38:29,544 - INFO - Reading current status...
2025-10-03 14:38:29,595 - INFO - Current status code: 2
2025-10-03 14:38:29,595 - INFO - Setting PAUSE_PLAY bit to TRUE for RUN mode...
2025-10-03 14:38:29,595 - INFO - Pulsing COMMANDS_RUN.b_PAUSE_PLAY to True
2025-10-03 14:38:29,596 - INFO - Writing BOOL COMMANDS_RUN.b_PAUSE_PLAY = True
2025-10-03 14:38:29,596 - INFO -   section: COMMANDS_RUN
2025-10-03 14:38:29,596 - INFO -   byte_offset: 258
2025-10-03 14:38:29,597 - INFO -   bit_offset: 1
2025-10-03 14:38:29,597 - INFO -   raw_start: 258.1
2025-10-03 14:38:29,670 - INFO - Successfully wrote COMMANDS_RUN.b_PAUSE_PLAY = True
2025-10-03 14:38:29,700 - INFO - Command COMMANDS_RUN.b_PAUSE_PLAY successfully set to True and verified
2025-10-03 14:38:29,700 - INFO - Disconnecting from PLC...
2025-10-03 14:38:29,700 - INFO - disconnecting snap7 client
2025-10-03 14:38:29,701 - INFO - PLC disconnected
2025-10-03 14:38:29,701 - INFO - destroying snap7 client
2025-10-03 14:38:29,702 - INFO - Current state after invoke: {'messages': [HumanMessage(content='What is Tamara?', additional_kwargs={}, response_metadata={}), AIMessage(content='The TAMARA Nanoparticle Formulation System is a user-friendly, microfluidic-based platform designed for researchers who prioritize ease of use and precision in nanoparticle synthesis. It is a sophisticated instrument that enables efficient and controlled synthesis of lipid nanoparticles for various research applications. If you need more detailed information about TAMARA, feel free to ask!', additional_kwargs={}, response_metadata={}), HumanMessage(content='What is Samsung?', additional_kwargs={}, response_metadata={}), AIMessage(content='I specialize in providing information related to lipid nanoparticle (LNP) synthesis and the TAMARA Nanoparticle Formulation System. If you have any questions specifically related to these topics or need assistance with LNP synthesis techniques, TAMARA usage, or related products and services from Inside Therapeutics, please feel free to ask.', additional_kwargs={}, response_metadata={}), HumanMessage(content='What are lipid nano particles?', additional_kwargs={}, response_metadata={}), AIMessage(content='Lipid nanoparticles (LNPs) are particles typically ranging in size from 10 to 100 nanometers that are composed of lipids. These nanoparticles are specifically engineered for the encapsulation of RNA and oligonucleotides, which are challenging to encapsulate efficiently using standard nanoparticles like liposomes or PLGA due to the negative charge of the RNA molecules. LNPs are composed of four main types of lipids: ionizable lipids, PEGylated lipids, phospholipids, and sterol lipids. They play a crucial role in the delivery of nucleic acids such as mRNA, siRNA, and tRNA to specific locations in the body for therapeutic purposes. If you have more specific questions about LNPs or their synthesis, feel free to ask for further details.', additional_kwargs={}, response_metadata={}), HumanMessage(content='I want to do a run with Tamara', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters sent to PLC. Checking validation...', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters accepted by PLC. Proceeding with safety checks...', additional_kwargs={}, response_metadata={}), AIMessage(content='Ready to start RUN operation.\n\nPlease verify:\n1. Required fluids are loaded in reservoirs\n2. Chip is correctly seated and oriented\n3. Manifold is properly connected\n4. Lid is CLOSED\n5. Lines are secure\n6. Drain bottle is in place\n7. Pressure supply is within specifications\n\nAI: Ready to start RUN operation.', additional_kwargs={}, response_metadata={}), HumanMessage(content='pause the run', additional_kwargs={}, response_metadata={}), AIMessage(content="RUN operation paused. Say 'play' to resume.", additional_kwargs={}, response_metadata={})], 'intent': 'other', 'pending_action': None, 'input_payload': InputPayload(tfr=3.0, frr=6, target_volume=8.0, temperature=23.0, chip_id=<ChipID.HERRINGBONE: 1>, manifold_id=<ManifoldID.LARGE: 1>, lab_pressure=2000.0, org_solvent_id=<OrgSolventID.CUSTOM: 4>, operation_mode=<OperationMode.AGENTIC: 2>, machine_mode=<MachineMode.RUN: 2>, custom_solvent=CustomSolvent(name='Solvent1', viscosity=1184.0, sensitivity=22.0, molar_volume=24.0)), 'last_mode_check': 1759495007.8334403}
2025-10-03 14:38:32,635 - INFO - creating snap7 client
2025-10-03 14:38:32,635 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 14:38:32,710 - INFO - PLC connected (192.168.0.1)
2025-10-03 14:38:32,730 - INFO - Current operation mode: AGENTIC
2025-10-03 14:38:32,730 - INFO - disconnecting snap7 client
2025-10-03 14:38:32,731 - INFO - PLC disconnected
2025-10-03 14:38:32,731 - INFO - destroying snap7 client
2025-10-03 14:38:32,732 - INFO - Current state before invoke: {'messages': [HumanMessage(content='What is Tamara?', additional_kwargs={}, response_metadata={}), AIMessage(content='The TAMARA Nanoparticle Formulation System is a user-friendly, microfluidic-based platform designed for researchers who prioritize ease of use and precision in nanoparticle synthesis. It is a sophisticated instrument that enables efficient and controlled synthesis of lipid nanoparticles for various research applications. If you need more detailed information about TAMARA, feel free to ask!', additional_kwargs={}, response_metadata={}), HumanMessage(content='What is Samsung?', additional_kwargs={}, response_metadata={}), AIMessage(content='I specialize in providing information related to lipid nanoparticle (LNP) synthesis and the TAMARA Nanoparticle Formulation System. If you have any questions specifically related to these topics or need assistance with LNP synthesis techniques, TAMARA usage, or related products and services from Inside Therapeutics, please feel free to ask.', additional_kwargs={}, response_metadata={}), HumanMessage(content='What are lipid nano particles?', additional_kwargs={}, response_metadata={}), AIMessage(content='Lipid nanoparticles (LNPs) are particles typically ranging in size from 10 to 100 nanometers that are composed of lipids. These nanoparticles are specifically engineered for the encapsulation of RNA and oligonucleotides, which are challenging to encapsulate efficiently using standard nanoparticles like liposomes or PLGA due to the negative charge of the RNA molecules. LNPs are composed of four main types of lipids: ionizable lipids, PEGylated lipids, phospholipids, and sterol lipids. They play a crucial role in the delivery of nucleic acids such as mRNA, siRNA, and tRNA to specific locations in the body for therapeutic purposes. If you have more specific questions about LNPs or their synthesis, feel free to ask for further details.', additional_kwargs={}, response_metadata={}), HumanMessage(content='I want to do a run with Tamara', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters sent to PLC. Checking validation...', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters accepted by PLC. Proceeding with safety checks...', additional_kwargs={}, response_metadata={}), AIMessage(content='Ready to start RUN operation.\n\nPlease verify:\n1. Required fluids are loaded in reservoirs\n2. Chip is correctly seated and oriented\n3. Manifold is properly connected\n4. Lid is CLOSED\n5. Lines are secure\n6. Drain bottle is in place\n7. Pressure supply is within specifications\n\nAI: Ready to start RUN operation.', additional_kwargs={}, response_metadata={}), HumanMessage(content='pause the run', additional_kwargs={}, response_metadata={}), AIMessage(content="RUN operation paused. Say 'play' to resume.", additional_kwargs={}, response_metadata={}), HumanMessage(content='play', additional_kwargs={}, response_metadata={})], 'intent': 'other', 'pending_action': None, 'input_payload': InputPayload(tfr=3.0, frr=6, target_volume=8.0, temperature=23.0, chip_id=<ChipID.HERRINGBONE: 1>, manifold_id=<ManifoldID.LARGE: 1>, lab_pressure=2000.0, org_solvent_id=<OrgSolventID.CUSTOM: 4>, operation_mode=<OperationMode.AGENTIC: 2>, machine_mode=<MachineMode.RUN: 2>, custom_solvent=CustomSolvent(name='Solvent1', viscosity=1184.0, sensitivity=22.0, molar_volume=24.0)), 'last_mode_check': 1759495007.8334403}
2025-10-03 14:38:32,733 - INFO - Routing message: 'play' (pending_action: None)
2025-10-03 14:38:32,733 - INFO - Handling PLAY/RESUME command...
2025-10-03 14:38:32,734 - INFO - creating snap7 client
2025-10-03 14:38:32,734 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 14:38:32,891 - INFO - PLC connected (192.168.0.1)
2025-10-03 14:38:32,891 - INFO - Reading current status...
2025-10-03 14:38:32,925 - INFO - Current status code: 2
2025-10-03 14:38:32,925 - INFO - Setting PAUSE_PLAY bit to FALSE for RUN mode...
2025-10-03 14:38:32,925 - INFO - Pulsing COMMANDS_RUN.b_PAUSE_PLAY to False
2025-10-03 14:38:32,926 - INFO - Writing BOOL COMMANDS_RUN.b_PAUSE_PLAY = False
2025-10-03 14:38:32,926 - INFO -   section: COMMANDS_RUN
2025-10-03 14:38:32,926 - INFO -   byte_offset: 258
2025-10-03 14:38:32,927 - INFO -   bit_offset: 1
2025-10-03 14:38:32,927 - INFO -   raw_start: 258.1
2025-10-03 14:38:33,014 - INFO - Successfully wrote COMMANDS_RUN.b_PAUSE_PLAY = False
2025-10-03 14:38:33,035 - INFO - Command COMMANDS_RUN.b_PAUSE_PLAY successfully set to False and verified
2025-10-03 14:38:33,036 - INFO - Disconnecting from PLC...
2025-10-03 14:38:33,036 - INFO - disconnecting snap7 client
2025-10-03 14:38:33,037 - INFO - PLC disconnected
2025-10-03 14:38:33,037 - INFO - destroying snap7 client
2025-10-03 14:38:33,038 - INFO - Current state after invoke: {'messages': [HumanMessage(content='What is Tamara?', additional_kwargs={}, response_metadata={}), AIMessage(content='The TAMARA Nanoparticle Formulation System is a user-friendly, microfluidic-based platform designed for researchers who prioritize ease of use and precision in nanoparticle synthesis. It is a sophisticated instrument that enables efficient and controlled synthesis of lipid nanoparticles for various research applications. If you need more detailed information about TAMARA, feel free to ask!', additional_kwargs={}, response_metadata={}), HumanMessage(content='What is Samsung?', additional_kwargs={}, response_metadata={}), AIMessage(content='I specialize in providing information related to lipid nanoparticle (LNP) synthesis and the TAMARA Nanoparticle Formulation System. If you have any questions specifically related to these topics or need assistance with LNP synthesis techniques, TAMARA usage, or related products and services from Inside Therapeutics, please feel free to ask.', additional_kwargs={}, response_metadata={}), HumanMessage(content='What are lipid nano particles?', additional_kwargs={}, response_metadata={}), AIMessage(content='Lipid nanoparticles (LNPs) are particles typically ranging in size from 10 to 100 nanometers that are composed of lipids. These nanoparticles are specifically engineered for the encapsulation of RNA and oligonucleotides, which are challenging to encapsulate efficiently using standard nanoparticles like liposomes or PLGA due to the negative charge of the RNA molecules. LNPs are composed of four main types of lipids: ionizable lipids, PEGylated lipids, phospholipids, and sterol lipids. They play a crucial role in the delivery of nucleic acids such as mRNA, siRNA, and tRNA to specific locations in the body for therapeutic purposes. If you have more specific questions about LNPs or their synthesis, feel free to ask for further details.', additional_kwargs={}, response_metadata={}), HumanMessage(content='I want to do a run with Tamara', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters sent to PLC. Checking validation...', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters accepted by PLC. Proceeding with safety checks...', additional_kwargs={}, response_metadata={}), AIMessage(content='Ready to start RUN operation.\n\nPlease verify:\n1. Required fluids are loaded in reservoirs\n2. Chip is correctly seated and oriented\n3. Manifold is properly connected\n4. Lid is CLOSED\n5. Lines are secure\n6. Drain bottle is in place\n7. Pressure supply is within specifications\n\nAI: Ready to start RUN operation.', additional_kwargs={}, response_metadata={}), HumanMessage(content='pause the run', additional_kwargs={}, response_metadata={}), AIMessage(content="RUN operation paused. Say 'play' to resume.", additional_kwargs={}, response_metadata={}), HumanMessage(content='play', additional_kwargs={}, response_metadata={}), AIMessage(content='RUN operation resumed.', additional_kwargs={}, response_metadata={})], 'intent': 'other', 'pending_action': None, 'input_payload': InputPayload(tfr=3.0, frr=6, target_volume=8.0, temperature=23.0, chip_id=<ChipID.HERRINGBONE: 1>, manifold_id=<ManifoldID.LARGE: 1>, lab_pressure=2000.0, org_solvent_id=<OrgSolventID.CUSTOM: 4>, operation_mode=<OperationMode.AGENTIC: 2>, machine_mode=<MachineMode.RUN: 2>, custom_solvent=CustomSolvent(name='Solvent1', viscosity=1184.0, sensitivity=22.0, molar_volume=24.0)), 'last_mode_check': 1759495007.8334403}
2025-10-03 14:38:38,574 - INFO - Current state before invoke: {'messages': [HumanMessage(content='What is Tamara?', additional_kwargs={}, response_metadata={}), AIMessage(content='The TAMARA Nanoparticle Formulation System is a user-friendly, microfluidic-based platform designed for researchers who prioritize ease of use and precision in nanoparticle synthesis. It is a sophisticated instrument that enables efficient and controlled synthesis of lipid nanoparticles for various research applications. If you need more detailed information about TAMARA, feel free to ask!', additional_kwargs={}, response_metadata={}), HumanMessage(content='What is Samsung?', additional_kwargs={}, response_metadata={}), AIMessage(content='I specialize in providing information related to lipid nanoparticle (LNP) synthesis and the TAMARA Nanoparticle Formulation System. If you have any questions specifically related to these topics or need assistance with LNP synthesis techniques, TAMARA usage, or related products and services from Inside Therapeutics, please feel free to ask.', additional_kwargs={}, response_metadata={}), HumanMessage(content='What are lipid nano particles?', additional_kwargs={}, response_metadata={}), AIMessage(content='Lipid nanoparticles (LNPs) are particles typically ranging in size from 10 to 100 nanometers that are composed of lipids. These nanoparticles are specifically engineered for the encapsulation of RNA and oligonucleotides, which are challenging to encapsulate efficiently using standard nanoparticles like liposomes or PLGA due to the negative charge of the RNA molecules. LNPs are composed of four main types of lipids: ionizable lipids, PEGylated lipids, phospholipids, and sterol lipids. They play a crucial role in the delivery of nucleic acids such as mRNA, siRNA, and tRNA to specific locations in the body for therapeutic purposes. If you have more specific questions about LNPs or their synthesis, feel free to ask for further details.', additional_kwargs={}, response_metadata={}), HumanMessage(content='I want to do a run with Tamara', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters sent to PLC. Checking validation...', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters accepted by PLC. Proceeding with safety checks...', additional_kwargs={}, response_metadata={}), AIMessage(content='Ready to start RUN operation.\n\nPlease verify:\n1. Required fluids are loaded in reservoirs\n2. Chip is correctly seated and oriented\n3. Manifold is properly connected\n4. Lid is CLOSED\n5. Lines are secure\n6. Drain bottle is in place\n7. Pressure supply is within specifications\n\nAI: Ready to start RUN operation.', additional_kwargs={}, response_metadata={}), HumanMessage(content='pause the run', additional_kwargs={}, response_metadata={}), AIMessage(content="RUN operation paused. Say 'play' to resume.", additional_kwargs={}, response_metadata={}), HumanMessage(content='play', additional_kwargs={}, response_metadata={}), AIMessage(content='RUN operation resumed.', additional_kwargs={}, response_metadata={}), HumanMessage(content='Stop the run', additional_kwargs={}, response_metadata={})], 'intent': 'other', 'pending_action': None, 'input_payload': InputPayload(tfr=3.0, frr=6, target_volume=8.0, temperature=23.0, chip_id=<ChipID.HERRINGBONE: 1>, manifold_id=<ManifoldID.LARGE: 1>, lab_pressure=2000.0, org_solvent_id=<OrgSolventID.CUSTOM: 4>, operation_mode=<OperationMode.AGENTIC: 2>, machine_mode=<MachineMode.RUN: 2>, custom_solvent=CustomSolvent(name='Solvent1', viscosity=1184.0, sensitivity=22.0, molar_volume=24.0)), 'last_mode_check': 1759495007.8334403}
2025-10-03 14:38:38,575 - INFO - Routing message: 'stop the run' (pending_action: None)
2025-10-03 14:38:38,575 - INFO - Handling STOP command...
2025-10-03 14:38:38,576 - INFO - creating snap7 client
2025-10-03 14:38:38,576 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 14:38:38,680 - INFO - PLC connected (192.168.0.1)
2025-10-03 14:38:38,680 - INFO - Reading current status...
2025-10-03 14:38:38,720 - INFO - Current status code: 2
2025-10-03 14:38:38,720 - INFO - Setting STOP bit to TRUE...
2025-10-03 14:38:38,720 - INFO - Pulsing COMMANDS_RUN.b_STOP to True
2025-10-03 14:38:38,720 - INFO - Writing BOOL COMMANDS_RUN.b_START = False
2025-10-03 14:38:38,721 - INFO -   section: COMMANDS_RUN
2025-10-03 14:38:38,721 - INFO -   byte_offset: 258
2025-10-03 14:38:38,721 - INFO -   bit_offset: 0
2025-10-03 14:38:38,721 - INFO -   raw_start: 258.0
2025-10-03 14:38:38,793 - INFO - Successfully wrote COMMANDS_RUN.b_START = False
2025-10-03 14:38:38,793 - INFO - Writing BOOL COMMANDS_RUN.b_PAUSE_PLAY = False
2025-10-03 14:38:38,793 - INFO -   section: COMMANDS_RUN
2025-10-03 14:38:38,793 - INFO -   byte_offset: 258
2025-10-03 14:38:38,794 - INFO -   bit_offset: 1
2025-10-03 14:38:38,794 - INFO -   raw_start: 258.1
2025-10-03 14:38:38,876 - INFO - Successfully wrote COMMANDS_RUN.b_PAUSE_PLAY = False
2025-10-03 14:38:38,876 - INFO - Writing BOOL COMMANDS_RUN.b_CONFIRM = False
2025-10-03 14:38:38,876 - INFO -   section: COMMANDS_RUN
2025-10-03 14:38:38,876 - INFO -   byte_offset: 258
2025-10-03 14:38:38,877 - INFO -   bit_offset: 1
2025-10-03 14:38:38,877 - INFO -   raw_start: 258.2
2025-10-03 14:38:38,943 - INFO - Successfully wrote COMMANDS_RUN.b_CONFIRM = False
2025-10-03 14:38:38,943 - INFO - Writing BOOL COMMANDS_RUN.b_STOP = True
2025-10-03 14:38:38,943 - INFO -   section: COMMANDS_RUN
2025-10-03 14:38:38,944 - INFO -   byte_offset: 258
2025-10-03 14:38:38,944 - INFO -   bit_offset: 3
2025-10-03 14:38:38,944 - INFO -   raw_start: 258.3
2025-10-03 14:38:38,976 - INFO - Successfully wrote COMMANDS_RUN.b_STOP = True
2025-10-03 14:38:39,008 - INFO - Command COMMANDS_RUN.b_STOP successfully set to True and verified
2025-10-03 14:38:39,075 - INFO - Machine mode set to 1
2025-10-03 14:38:39,075 - INFO - Disconnecting from PLC...
2025-10-03 14:38:39,076 - INFO - disconnecting snap7 client
2025-10-03 14:38:39,076 - INFO - PLC disconnected
2025-10-03 14:38:39,077 - INFO - destroying snap7 client
2025-10-03 14:38:39,078 - INFO - Current state after invoke: {'messages': [HumanMessage(content='What is Tamara?', additional_kwargs={}, response_metadata={}), AIMessage(content='The TAMARA Nanoparticle Formulation System is a user-friendly, microfluidic-based platform designed for researchers who prioritize ease of use and precision in nanoparticle synthesis. It is a sophisticated instrument that enables efficient and controlled synthesis of lipid nanoparticles for various research applications. If you need more detailed information about TAMARA, feel free to ask!', additional_kwargs={}, response_metadata={}), HumanMessage(content='What is Samsung?', additional_kwargs={}, response_metadata={}), AIMessage(content='I specialize in providing information related to lipid nanoparticle (LNP) synthesis and the TAMARA Nanoparticle Formulation System. If you have any questions specifically related to these topics or need assistance with LNP synthesis techniques, TAMARA usage, or related products and services from Inside Therapeutics, please feel free to ask.', additional_kwargs={}, response_metadata={}), HumanMessage(content='What are lipid nano particles?', additional_kwargs={}, response_metadata={}), AIMessage(content='Lipid nanoparticles (LNPs) are particles typically ranging in size from 10 to 100 nanometers that are composed of lipids. These nanoparticles are specifically engineered for the encapsulation of RNA and oligonucleotides, which are challenging to encapsulate efficiently using standard nanoparticles like liposomes or PLGA due to the negative charge of the RNA molecules. LNPs are composed of four main types of lipids: ionizable lipids, PEGylated lipids, phospholipids, and sterol lipids. They play a crucial role in the delivery of nucleic acids such as mRNA, siRNA, and tRNA to specific locations in the body for therapeutic purposes. If you have more specific questions about LNPs or their synthesis, feel free to ask for further details.', additional_kwargs={}, response_metadata={}), HumanMessage(content='I want to do a run with Tamara', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters sent to PLC. Checking validation...', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters accepted by PLC. Proceeding with safety checks...', additional_kwargs={}, response_metadata={}), AIMessage(content='Ready to start RUN operation.\n\nPlease verify:\n1. Required fluids are loaded in reservoirs\n2. Chip is correctly seated and oriented\n3. Manifold is properly connected\n4. Lid is CLOSED\n5. Lines are secure\n6. Drain bottle is in place\n7. Pressure supply is within specifications\n\nAI: Ready to start RUN operation.', additional_kwargs={}, response_metadata={}), HumanMessage(content='pause the run', additional_kwargs={}, response_metadata={}), AIMessage(content="RUN operation paused. Say 'play' to resume.", additional_kwargs={}, response_metadata={}), HumanMessage(content='play', additional_kwargs={}, response_metadata={}), AIMessage(content='RUN operation resumed.', additional_kwargs={}, response_metadata={}), HumanMessage(content='Stop the run', additional_kwargs={}, response_metadata={}), AIMessage(content='RUN operation stopped.', additional_kwargs={}, response_metadata={})], 'intent': 'other', 'pending_action': None, 'input_payload': InputPayload(tfr=3.0, frr=6, target_volume=8.0, temperature=23.0, chip_id=<ChipID.HERRINGBONE: 1>, manifold_id=<ManifoldID.LARGE: 1>, lab_pressure=2000.0, org_solvent_id=<OrgSolventID.CUSTOM: 4>, operation_mode=<OperationMode.AGENTIC: 2>, machine_mode=<MachineMode.RUN: 2>, custom_solvent=CustomSolvent(name='Solvent1', viscosity=1184.0, sensitivity=22.0, molar_volume=24.0)), 'last_mode_check': 1759495007.8334403}
2025-10-03 14:41:02,978 - INFO - Current state before invoke: {'messages': [HumanMessage(content='What is Tamara?', additional_kwargs={}, response_metadata={}), AIMessage(content='The TAMARA Nanoparticle Formulation System is a user-friendly, microfluidic-based platform designed for researchers who prioritize ease of use and precision in nanoparticle synthesis. It is a sophisticated instrument that enables efficient and controlled synthesis of lipid nanoparticles for various research applications. If you need more detailed information about TAMARA, feel free to ask!', additional_kwargs={}, response_metadata={}), HumanMessage(content='What is Samsung?', additional_kwargs={}, response_metadata={}), AIMessage(content='I specialize in providing information related to lipid nanoparticle (LNP) synthesis and the TAMARA Nanoparticle Formulation System. If you have any questions specifically related to these topics or need assistance with LNP synthesis techniques, TAMARA usage, or related products and services from Inside Therapeutics, please feel free to ask.', additional_kwargs={}, response_metadata={}), HumanMessage(content='What are lipid nano particles?', additional_kwargs={}, response_metadata={}), AIMessage(content='Lipid nanoparticles (LNPs) are particles typically ranging in size from 10 to 100 nanometers that are composed of lipids. These nanoparticles are specifically engineered for the encapsulation of RNA and oligonucleotides, which are challenging to encapsulate efficiently using standard nanoparticles like liposomes or PLGA due to the negative charge of the RNA molecules. LNPs are composed of four main types of lipids: ionizable lipids, PEGylated lipids, phospholipids, and sterol lipids. They play a crucial role in the delivery of nucleic acids such as mRNA, siRNA, and tRNA to specific locations in the body for therapeutic purposes. If you have more specific questions about LNPs or their synthesis, feel free to ask for further details.', additional_kwargs={}, response_metadata={}), HumanMessage(content='I want to do a run with Tamara', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters sent to PLC. Checking validation...', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters accepted by PLC. Proceeding with safety checks...', additional_kwargs={}, response_metadata={}), AIMessage(content='Ready to start RUN operation.\n\nPlease verify:\n1. Required fluids are loaded in reservoirs\n2. Chip is correctly seated and oriented\n3. Manifold is properly connected\n4. Lid is CLOSED\n5. Lines are secure\n6. Drain bottle is in place\n7. Pressure supply is within specifications\n\nAI: Ready to start RUN operation.', additional_kwargs={}, response_metadata={}), HumanMessage(content='pause the run', additional_kwargs={}, response_metadata={}), AIMessage(content="RUN operation paused. Say 'play' to resume.", additional_kwargs={}, response_metadata={}), HumanMessage(content='play', additional_kwargs={}, response_metadata={}), AIMessage(content='RUN operation resumed.', additional_kwargs={}, response_metadata={}), HumanMessage(content='Stop the run', additional_kwargs={}, response_metadata={}), AIMessage(content='RUN operation stopped.', additional_kwargs={}, response_metadata={}), HumanMessage(content='Who is Thomas?', additional_kwargs={}, response_metadata={})], 'intent': 'other', 'pending_action': None, 'input_payload': InputPayload(tfr=3.0, frr=6, target_volume=8.0, temperature=23.0, chip_id=<ChipID.HERRINGBONE: 1>, manifold_id=<ManifoldID.LARGE: 1>, lab_pressure=2000.0, org_solvent_id=<OrgSolventID.CUSTOM: 4>, operation_mode=<OperationMode.AGENTIC: 2>, machine_mode=<MachineMode.RUN: 2>, custom_solvent=CustomSolvent(name='Solvent1', viscosity=1184.0, sensitivity=22.0, molar_volume=24.0)), 'last_mode_check': 1759495007.8334403}
2025-10-03 14:41:02,981 - INFO - Routing message: 'who is thomas?' (pending_action: None)
2025-10-03 14:41:03,643 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 14:41:04,256 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-10-03 14:41:05,631 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 14:41:05,633 - INFO - Current state after invoke: {'messages': [HumanMessage(content='What is Tamara?', additional_kwargs={}, response_metadata={}), AIMessage(content='The TAMARA Nanoparticle Formulation System is a user-friendly, microfluidic-based platform designed for researchers who prioritize ease of use and precision in nanoparticle synthesis. It is a sophisticated instrument that enables efficient and controlled synthesis of lipid nanoparticles for various research applications. If you need more detailed information about TAMARA, feel free to ask!', additional_kwargs={}, response_metadata={}), HumanMessage(content='What is Samsung?', additional_kwargs={}, response_metadata={}), AIMessage(content='I specialize in providing information related to lipid nanoparticle (LNP) synthesis and the TAMARA Nanoparticle Formulation System. If you have any questions specifically related to these topics or need assistance with LNP synthesis techniques, TAMARA usage, or related products and services from Inside Therapeutics, please feel free to ask.', additional_kwargs={}, response_metadata={}), HumanMessage(content='What are lipid nano particles?', additional_kwargs={}, response_metadata={}), AIMessage(content='Lipid nanoparticles (LNPs) are particles typically ranging in size from 10 to 100 nanometers that are composed of lipids. These nanoparticles are specifically engineered for the encapsulation of RNA and oligonucleotides, which are challenging to encapsulate efficiently using standard nanoparticles like liposomes or PLGA due to the negative charge of the RNA molecules. LNPs are composed of four main types of lipids: ionizable lipids, PEGylated lipids, phospholipids, and sterol lipids. They play a crucial role in the delivery of nucleic acids such as mRNA, siRNA, and tRNA to specific locations in the body for therapeutic purposes. If you have more specific questions about LNPs or their synthesis, feel free to ask for further details.', additional_kwargs={}, response_metadata={}), HumanMessage(content='I want to do a run with Tamara', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters sent to PLC. Checking validation...', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters accepted by PLC. Proceeding with safety checks...', additional_kwargs={}, response_metadata={}), AIMessage(content='Ready to start RUN operation.\n\nPlease verify:\n1. Required fluids are loaded in reservoirs\n2. Chip is correctly seated and oriented\n3. Manifold is properly connected\n4. Lid is CLOSED\n5. Lines are secure\n6. Drain bottle is in place\n7. Pressure supply is within specifications\n\nAI: Ready to start RUN operation.', additional_kwargs={}, response_metadata={}), HumanMessage(content='pause the run', additional_kwargs={}, response_metadata={}), AIMessage(content="RUN operation paused. Say 'play' to resume.", additional_kwargs={}, response_metadata={}), HumanMessage(content='play', additional_kwargs={}, response_metadata={}), AIMessage(content='RUN operation resumed.', additional_kwargs={}, response_metadata={}), HumanMessage(content='Stop the run', additional_kwargs={}, response_metadata={}), AIMessage(content='RUN operation stopped.', additional_kwargs={}, response_metadata={}), HumanMessage(content='Who is Thomas?', additional_kwargs={}, response_metadata={}), AIMessage(content='I specialize in providing information related to lipid nanoparticle (LNP) synthesis and the TAMARA Nanoparticle Formulation System. If you have any questions specifically related to these topics or need assistance with LNP synthesis techniques, TAMARA usage, or related products and services from Inside Therapeutics, please feel free to ask.', additional_kwargs={}, response_metadata={})], 'intent': 'ask_kb', 'pending_action': None, 'input_payload': InputPayload(tfr=3.0, frr=6, target_volume=8.0, temperature=23.0, chip_id=<ChipID.HERRINGBONE: 1>, manifold_id=<ManifoldID.LARGE: 1>, lab_pressure=2000.0, org_solvent_id=<OrgSolventID.CUSTOM: 4>, operation_mode=<OperationMode.AGENTIC: 2>, machine_mode=<MachineMode.RUN: 2>, custom_solvent=CustomSolvent(name='Solvent1', viscosity=1184.0, sensitivity=22.0, molar_volume=24.0)), 'last_mode_check': 1759495007.8334403}
2025-10-03 14:41:17,560 - INFO - Current state before invoke: {'messages': [HumanMessage(content='What is Tamara?', additional_kwargs={}, response_metadata={}), AIMessage(content='The TAMARA Nanoparticle Formulation System is a user-friendly, microfluidic-based platform designed for researchers who prioritize ease of use and precision in nanoparticle synthesis. It is a sophisticated instrument that enables efficient and controlled synthesis of lipid nanoparticles for various research applications. If you need more detailed information about TAMARA, feel free to ask!', additional_kwargs={}, response_metadata={}), HumanMessage(content='What is Samsung?', additional_kwargs={}, response_metadata={}), AIMessage(content='I specialize in providing information related to lipid nanoparticle (LNP) synthesis and the TAMARA Nanoparticle Formulation System. If you have any questions specifically related to these topics or need assistance with LNP synthesis techniques, TAMARA usage, or related products and services from Inside Therapeutics, please feel free to ask.', additional_kwargs={}, response_metadata={}), HumanMessage(content='What are lipid nano particles?', additional_kwargs={}, response_metadata={}), AIMessage(content='Lipid nanoparticles (LNPs) are particles typically ranging in size from 10 to 100 nanometers that are composed of lipids. These nanoparticles are specifically engineered for the encapsulation of RNA and oligonucleotides, which are challenging to encapsulate efficiently using standard nanoparticles like liposomes or PLGA due to the negative charge of the RNA molecules. LNPs are composed of four main types of lipids: ionizable lipids, PEGylated lipids, phospholipids, and sterol lipids. They play a crucial role in the delivery of nucleic acids such as mRNA, siRNA, and tRNA to specific locations in the body for therapeutic purposes. If you have more specific questions about LNPs or their synthesis, feel free to ask for further details.', additional_kwargs={}, response_metadata={}), HumanMessage(content='I want to do a run with Tamara', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters sent to PLC. Checking validation...', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters accepted by PLC. Proceeding with safety checks...', additional_kwargs={}, response_metadata={}), AIMessage(content='Ready to start RUN operation.\n\nPlease verify:\n1. Required fluids are loaded in reservoirs\n2. Chip is correctly seated and oriented\n3. Manifold is properly connected\n4. Lid is CLOSED\n5. Lines are secure\n6. Drain bottle is in place\n7. Pressure supply is within specifications\n\nAI: Ready to start RUN operation.', additional_kwargs={}, response_metadata={}), HumanMessage(content='pause the run', additional_kwargs={}, response_metadata={}), AIMessage(content="RUN operation paused. Say 'play' to resume.", additional_kwargs={}, response_metadata={}), HumanMessage(content='play', additional_kwargs={}, response_metadata={}), AIMessage(content='RUN operation resumed.', additional_kwargs={}, response_metadata={}), HumanMessage(content='Stop the run', additional_kwargs={}, response_metadata={}), AIMessage(content='RUN operation stopped.', additional_kwargs={}, response_metadata={}), HumanMessage(content='Who is Thomas?', additional_kwargs={}, response_metadata={}), AIMessage(content='I specialize in providing information related to lipid nanoparticle (LNP) synthesis and the TAMARA Nanoparticle Formulation System. If you have any questions specifically related to these topics or need assistance with LNP synthesis techniques, TAMARA usage, or related products and services from Inside Therapeutics, please feel free to ask.', additional_kwargs={}, response_metadata={}), HumanMessage(content='Who are the founders of Inside Therapeutics?', additional_kwargs={}, response_metadata={})], 'intent': 'ask_kb', 'pending_action': None, 'input_payload': InputPayload(tfr=3.0, frr=6, target_volume=8.0, temperature=23.0, chip_id=<ChipID.HERRINGBONE: 1>, manifold_id=<ManifoldID.LARGE: 1>, lab_pressure=2000.0, org_solvent_id=<OrgSolventID.CUSTOM: 4>, operation_mode=<OperationMode.AGENTIC: 2>, machine_mode=<MachineMode.RUN: 2>, custom_solvent=CustomSolvent(name='Solvent1', viscosity=1184.0, sensitivity=22.0, molar_volume=24.0)), 'last_mode_check': 1759495007.8334403}
2025-10-03 14:41:17,562 - INFO - Routing message: 'who are the founders of inside therapeutics?' (pending_action: None)
2025-10-03 14:41:18,022 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 14:41:18,827 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-10-03 14:41:19,740 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 14:41:19,742 - INFO - Current state after invoke: {'messages': [HumanMessage(content='What is Tamara?', additional_kwargs={}, response_metadata={}), AIMessage(content='The TAMARA Nanoparticle Formulation System is a user-friendly, microfluidic-based platform designed for researchers who prioritize ease of use and precision in nanoparticle synthesis. It is a sophisticated instrument that enables efficient and controlled synthesis of lipid nanoparticles for various research applications. If you need more detailed information about TAMARA, feel free to ask!', additional_kwargs={}, response_metadata={}), HumanMessage(content='What is Samsung?', additional_kwargs={}, response_metadata={}), AIMessage(content='I specialize in providing information related to lipid nanoparticle (LNP) synthesis and the TAMARA Nanoparticle Formulation System. If you have any questions specifically related to these topics or need assistance with LNP synthesis techniques, TAMARA usage, or related products and services from Inside Therapeutics, please feel free to ask.', additional_kwargs={}, response_metadata={}), HumanMessage(content='What are lipid nano particles?', additional_kwargs={}, response_metadata={}), AIMessage(content='Lipid nanoparticles (LNPs) are particles typically ranging in size from 10 to 100 nanometers that are composed of lipids. These nanoparticles are specifically engineered for the encapsulation of RNA and oligonucleotides, which are challenging to encapsulate efficiently using standard nanoparticles like liposomes or PLGA due to the negative charge of the RNA molecules. LNPs are composed of four main types of lipids: ionizable lipids, PEGylated lipids, phospholipids, and sterol lipids. They play a crucial role in the delivery of nucleic acids such as mRNA, siRNA, and tRNA to specific locations in the body for therapeutic purposes. If you have more specific questions about LNPs or their synthesis, feel free to ask for further details.', additional_kwargs={}, response_metadata={}), HumanMessage(content='I want to do a run with Tamara', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters sent to PLC. Checking validation...', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters accepted by PLC. Proceeding with safety checks...', additional_kwargs={}, response_metadata={}), AIMessage(content='Ready to start RUN operation.\n\nPlease verify:\n1. Required fluids are loaded in reservoirs\n2. Chip is correctly seated and oriented\n3. Manifold is properly connected\n4. Lid is CLOSED\n5. Lines are secure\n6. Drain bottle is in place\n7. Pressure supply is within specifications\n\nAI: Ready to start RUN operation.', additional_kwargs={}, response_metadata={}), HumanMessage(content='pause the run', additional_kwargs={}, response_metadata={}), AIMessage(content="RUN operation paused. Say 'play' to resume.", additional_kwargs={}, response_metadata={}), HumanMessage(content='play', additional_kwargs={}, response_metadata={}), AIMessage(content='RUN operation resumed.', additional_kwargs={}, response_metadata={}), HumanMessage(content='Stop the run', additional_kwargs={}, response_metadata={}), AIMessage(content='RUN operation stopped.', additional_kwargs={}, response_metadata={}), HumanMessage(content='Who is Thomas?', additional_kwargs={}, response_metadata={}), AIMessage(content='I specialize in providing information related to lipid nanoparticle (LNP) synthesis and the TAMARA Nanoparticle Formulation System. If you have any questions specifically related to these topics or need assistance with LNP synthesis techniques, TAMARA usage, or related products and services from Inside Therapeutics, please feel free to ask.', additional_kwargs={}, response_metadata={}), HumanMessage(content='Who are the founders of Inside Therapeutics?', additional_kwargs={}, response_metadata={}), AIMessage(content='I focus on providing information related to lipid nanoparticle (LNP) synthesis and the TAMARA Nanoparticle Formulation System. If you have any questions specifically related to these topics or need assistance with LNP synthesis techniques, TAMARA usage, or related products and services from Inside Therapeutics, please feel free to ask.', additional_kwargs={}, response_metadata={})], 'intent': 'ask_kb', 'pending_action': None, 'input_payload': InputPayload(tfr=3.0, frr=6, target_volume=8.0, temperature=23.0, chip_id=<ChipID.HERRINGBONE: 1>, manifold_id=<ManifoldID.LARGE: 1>, lab_pressure=2000.0, org_solvent_id=<OrgSolventID.CUSTOM: 4>, operation_mode=<OperationMode.AGENTIC: 2>, machine_mode=<MachineMode.RUN: 2>, custom_solvent=CustomSolvent(name='Solvent1', viscosity=1184.0, sensitivity=22.0, molar_volume=24.0)), 'last_mode_check': 1759495007.8334403}
2025-10-03 14:41:28,180 - INFO - Current state before invoke: {'messages': [HumanMessage(content='What is Tamara?', additional_kwargs={}, response_metadata={}), AIMessage(content='The TAMARA Nanoparticle Formulation System is a user-friendly, microfluidic-based platform designed for researchers who prioritize ease of use and precision in nanoparticle synthesis. It is a sophisticated instrument that enables efficient and controlled synthesis of lipid nanoparticles for various research applications. If you need more detailed information about TAMARA, feel free to ask!', additional_kwargs={}, response_metadata={}), HumanMessage(content='What is Samsung?', additional_kwargs={}, response_metadata={}), AIMessage(content='I specialize in providing information related to lipid nanoparticle (LNP) synthesis and the TAMARA Nanoparticle Formulation System. If you have any questions specifically related to these topics or need assistance with LNP synthesis techniques, TAMARA usage, or related products and services from Inside Therapeutics, please feel free to ask.', additional_kwargs={}, response_metadata={}), HumanMessage(content='What are lipid nano particles?', additional_kwargs={}, response_metadata={}), AIMessage(content='Lipid nanoparticles (LNPs) are particles typically ranging in size from 10 to 100 nanometers that are composed of lipids. These nanoparticles are specifically engineered for the encapsulation of RNA and oligonucleotides, which are challenging to encapsulate efficiently using standard nanoparticles like liposomes or PLGA due to the negative charge of the RNA molecules. LNPs are composed of four main types of lipids: ionizable lipids, PEGylated lipids, phospholipids, and sterol lipids. They play a crucial role in the delivery of nucleic acids such as mRNA, siRNA, and tRNA to specific locations in the body for therapeutic purposes. If you have more specific questions about LNPs or their synthesis, feel free to ask for further details.', additional_kwargs={}, response_metadata={}), HumanMessage(content='I want to do a run with Tamara', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters sent to PLC. Checking validation...', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters accepted by PLC. Proceeding with safety checks...', additional_kwargs={}, response_metadata={}), AIMessage(content='Ready to start RUN operation.\n\nPlease verify:\n1. Required fluids are loaded in reservoirs\n2. Chip is correctly seated and oriented\n3. Manifold is properly connected\n4. Lid is CLOSED\n5. Lines are secure\n6. Drain bottle is in place\n7. Pressure supply is within specifications\n\nAI: Ready to start RUN operation.', additional_kwargs={}, response_metadata={}), HumanMessage(content='pause the run', additional_kwargs={}, response_metadata={}), AIMessage(content="RUN operation paused. Say 'play' to resume.", additional_kwargs={}, response_metadata={}), HumanMessage(content='play', additional_kwargs={}, response_metadata={}), AIMessage(content='RUN operation resumed.', additional_kwargs={}, response_metadata={}), HumanMessage(content='Stop the run', additional_kwargs={}, response_metadata={}), AIMessage(content='RUN operation stopped.', additional_kwargs={}, response_metadata={}), HumanMessage(content='Who is Thomas?', additional_kwargs={}, response_metadata={}), AIMessage(content='I specialize in providing information related to lipid nanoparticle (LNP) synthesis and the TAMARA Nanoparticle Formulation System. If you have any questions specifically related to these topics or need assistance with LNP synthesis techniques, TAMARA usage, or related products and services from Inside Therapeutics, please feel free to ask.', additional_kwargs={}, response_metadata={}), HumanMessage(content='Who are the founders of Inside Therapeutics?', additional_kwargs={}, response_metadata={}), AIMessage(content='I focus on providing information related to lipid nanoparticle (LNP) synthesis and the TAMARA Nanoparticle Formulation System. If you have any questions specifically related to these topics or need assistance with LNP synthesis techniques, TAMARA usage, or related products and services from Inside Therapeutics, please feel free to ask.', additional_kwargs={}, response_metadata={}), HumanMessage(content='Who built Tamara?', additional_kwargs={}, response_metadata={})], 'intent': 'ask_kb', 'pending_action': None, 'input_payload': InputPayload(tfr=3.0, frr=6, target_volume=8.0, temperature=23.0, chip_id=<ChipID.HERRINGBONE: 1>, manifold_id=<ManifoldID.LARGE: 1>, lab_pressure=2000.0, org_solvent_id=<OrgSolventID.CUSTOM: 4>, operation_mode=<OperationMode.AGENTIC: 2>, machine_mode=<MachineMode.RUN: 2>, custom_solvent=CustomSolvent(name='Solvent1', viscosity=1184.0, sensitivity=22.0, molar_volume=24.0)), 'last_mode_check': 1759495007.8334403}
2025-10-03 14:41:28,181 - INFO - Routing message: 'who built tamara?' (pending_action: None)
2025-10-03 14:41:29,103 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 14:41:29,687 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-10-03 14:41:30,780 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 14:41:30,783 - INFO - Current state after invoke: {'messages': [HumanMessage(content='What is Tamara?', additional_kwargs={}, response_metadata={}), AIMessage(content='The TAMARA Nanoparticle Formulation System is a user-friendly, microfluidic-based platform designed for researchers who prioritize ease of use and precision in nanoparticle synthesis. It is a sophisticated instrument that enables efficient and controlled synthesis of lipid nanoparticles for various research applications. If you need more detailed information about TAMARA, feel free to ask!', additional_kwargs={}, response_metadata={}), HumanMessage(content='What is Samsung?', additional_kwargs={}, response_metadata={}), AIMessage(content='I specialize in providing information related to lipid nanoparticle (LNP) synthesis and the TAMARA Nanoparticle Formulation System. If you have any questions specifically related to these topics or need assistance with LNP synthesis techniques, TAMARA usage, or related products and services from Inside Therapeutics, please feel free to ask.', additional_kwargs={}, response_metadata={}), HumanMessage(content='What are lipid nano particles?', additional_kwargs={}, response_metadata={}), AIMessage(content='Lipid nanoparticles (LNPs) are particles typically ranging in size from 10 to 100 nanometers that are composed of lipids. These nanoparticles are specifically engineered for the encapsulation of RNA and oligonucleotides, which are challenging to encapsulate efficiently using standard nanoparticles like liposomes or PLGA due to the negative charge of the RNA molecules. LNPs are composed of four main types of lipids: ionizable lipids, PEGylated lipids, phospholipids, and sterol lipids. They play a crucial role in the delivery of nucleic acids such as mRNA, siRNA, and tRNA to specific locations in the body for therapeutic purposes. If you have more specific questions about LNPs or their synthesis, feel free to ask for further details.', additional_kwargs={}, response_metadata={}), HumanMessage(content='I want to do a run with Tamara', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters sent to PLC. Checking validation...', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters accepted by PLC. Proceeding with safety checks...', additional_kwargs={}, response_metadata={}), AIMessage(content='Ready to start RUN operation.\n\nPlease verify:\n1. Required fluids are loaded in reservoirs\n2. Chip is correctly seated and oriented\n3. Manifold is properly connected\n4. Lid is CLOSED\n5. Lines are secure\n6. Drain bottle is in place\n7. Pressure supply is within specifications\n\nAI: Ready to start RUN operation.', additional_kwargs={}, response_metadata={}), HumanMessage(content='pause the run', additional_kwargs={}, response_metadata={}), AIMessage(content="RUN operation paused. Say 'play' to resume.", additional_kwargs={}, response_metadata={}), HumanMessage(content='play', additional_kwargs={}, response_metadata={}), AIMessage(content='RUN operation resumed.', additional_kwargs={}, response_metadata={}), HumanMessage(content='Stop the run', additional_kwargs={}, response_metadata={}), AIMessage(content='RUN operation stopped.', additional_kwargs={}, response_metadata={}), HumanMessage(content='Who is Thomas?', additional_kwargs={}, response_metadata={}), AIMessage(content='I specialize in providing information related to lipid nanoparticle (LNP) synthesis and the TAMARA Nanoparticle Formulation System. If you have any questions specifically related to these topics or need assistance with LNP synthesis techniques, TAMARA usage, or related products and services from Inside Therapeutics, please feel free to ask.', additional_kwargs={}, response_metadata={}), HumanMessage(content='Who are the founders of Inside Therapeutics?', additional_kwargs={}, response_metadata={}), AIMessage(content='I focus on providing information related to lipid nanoparticle (LNP) synthesis and the TAMARA Nanoparticle Formulation System. If you have any questions specifically related to these topics or need assistance with LNP synthesis techniques, TAMARA usage, or related products and services from Inside Therapeutics, please feel free to ask.', additional_kwargs={}, response_metadata={}), HumanMessage(content='Who built Tamara?', additional_kwargs={}, response_metadata={}), AIMessage(content='The TAMARA Nanoparticle Formulation System is manufactured by Inside Therapeutics, SAS, located at 25-27 rue de la Grand Font, 16000 Angouleme, France. If you have any specific questions about TAMARA or its operation, feel free to ask for more details.', additional_kwargs={}, response_metadata={})], 'intent': 'ask_kb', 'pending_action': None, 'input_payload': InputPayload(tfr=3.0, frr=6, target_volume=8.0, temperature=23.0, chip_id=<ChipID.HERRINGBONE: 1>, manifold_id=<ManifoldID.LARGE: 1>, lab_pressure=2000.0, org_solvent_id=<OrgSolventID.CUSTOM: 4>, operation_mode=<OperationMode.AGENTIC: 2>, machine_mode=<MachineMode.RUN: 2>, custom_solvent=CustomSolvent(name='Solvent1', viscosity=1184.0, sensitivity=22.0, molar_volume=24.0)), 'last_mode_check': 1759495007.8334403}
2025-10-03 14:44:12,094 - INFO - Current state before invoke: {'messages': [HumanMessage(content='What is Tamara?', additional_kwargs={}, response_metadata={}), AIMessage(content='The TAMARA Nanoparticle Formulation System is a user-friendly, microfluidic-based platform designed for researchers who prioritize ease of use and precision in nanoparticle synthesis. It is a sophisticated instrument that enables efficient and controlled synthesis of lipid nanoparticles for various research applications. If you need more detailed information about TAMARA, feel free to ask!', additional_kwargs={}, response_metadata={}), HumanMessage(content='What is Samsung?', additional_kwargs={}, response_metadata={}), AIMessage(content='I specialize in providing information related to lipid nanoparticle (LNP) synthesis and the TAMARA Nanoparticle Formulation System. If you have any questions specifically related to these topics or need assistance with LNP synthesis techniques, TAMARA usage, or related products and services from Inside Therapeutics, please feel free to ask.', additional_kwargs={}, response_metadata={}), HumanMessage(content='What are lipid nano particles?', additional_kwargs={}, response_metadata={}), AIMessage(content='Lipid nanoparticles (LNPs) are particles typically ranging in size from 10 to 100 nanometers that are composed of lipids. These nanoparticles are specifically engineered for the encapsulation of RNA and oligonucleotides, which are challenging to encapsulate efficiently using standard nanoparticles like liposomes or PLGA due to the negative charge of the RNA molecules. LNPs are composed of four main types of lipids: ionizable lipids, PEGylated lipids, phospholipids, and sterol lipids. They play a crucial role in the delivery of nucleic acids such as mRNA, siRNA, and tRNA to specific locations in the body for therapeutic purposes. If you have more specific questions about LNPs or their synthesis, feel free to ask for further details.', additional_kwargs={}, response_metadata={}), HumanMessage(content='I want to do a run with Tamara', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters sent to PLC. Checking validation...', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters accepted by PLC. Proceeding with safety checks...', additional_kwargs={}, response_metadata={}), AIMessage(content='Ready to start RUN operation.\n\nPlease verify:\n1. Required fluids are loaded in reservoirs\n2. Chip is correctly seated and oriented\n3. Manifold is properly connected\n4. Lid is CLOSED\n5. Lines are secure\n6. Drain bottle is in place\n7. Pressure supply is within specifications\n\nAI: Ready to start RUN operation.', additional_kwargs={}, response_metadata={}), HumanMessage(content='pause the run', additional_kwargs={}, response_metadata={}), AIMessage(content="RUN operation paused. Say 'play' to resume.", additional_kwargs={}, response_metadata={}), HumanMessage(content='play', additional_kwargs={}, response_metadata={}), AIMessage(content='RUN operation resumed.', additional_kwargs={}, response_metadata={}), HumanMessage(content='Stop the run', additional_kwargs={}, response_metadata={}), AIMessage(content='RUN operation stopped.', additional_kwargs={}, response_metadata={}), HumanMessage(content='Who is Thomas?', additional_kwargs={}, response_metadata={}), AIMessage(content='I specialize in providing information related to lipid nanoparticle (LNP) synthesis and the TAMARA Nanoparticle Formulation System. If you have any questions specifically related to these topics or need assistance with LNP synthesis techniques, TAMARA usage, or related products and services from Inside Therapeutics, please feel free to ask.', additional_kwargs={}, response_metadata={}), HumanMessage(content='Who are the founders of Inside Therapeutics?', additional_kwargs={}, response_metadata={}), AIMessage(content='I focus on providing information related to lipid nanoparticle (LNP) synthesis and the TAMARA Nanoparticle Formulation System. If you have any questions specifically related to these topics or need assistance with LNP synthesis techniques, TAMARA usage, or related products and services from Inside Therapeutics, please feel free to ask.', additional_kwargs={}, response_metadata={}), HumanMessage(content='Who built Tamara?', additional_kwargs={}, response_metadata={}), AIMessage(content='The TAMARA Nanoparticle Formulation System is manufactured by Inside Therapeutics, SAS, located at 25-27 rue de la Grand Font, 16000 Angouleme, France. If you have any specific questions about TAMARA or its operation, feel free to ask for more details.', additional_kwargs={}, response_metadata={}), HumanMessage(content='cls', additional_kwargs={}, response_metadata={})], 'intent': 'ask_kb', 'pending_action': None, 'input_payload': InputPayload(tfr=3.0, frr=6, target_volume=8.0, temperature=23.0, chip_id=<ChipID.HERRINGBONE: 1>, manifold_id=<ManifoldID.LARGE: 1>, lab_pressure=2000.0, org_solvent_id=<OrgSolventID.CUSTOM: 4>, operation_mode=<OperationMode.AGENTIC: 2>, machine_mode=<MachineMode.RUN: 2>, custom_solvent=CustomSolvent(name='Solvent1', viscosity=1184.0, sensitivity=22.0, molar_volume=24.0)), 'last_mode_check': 1759495007.8334403}
2025-10-03 14:44:12,096 - INFO - Routing message: 'cls' (pending_action: None)
2025-10-03 14:44:12,648 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 14:44:13,147 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-10-03 14:44:13,880 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 14:44:13,883 - INFO - Current state after invoke: {'messages': [HumanMessage(content='What is Tamara?', additional_kwargs={}, response_metadata={}), AIMessage(content='The TAMARA Nanoparticle Formulation System is a user-friendly, microfluidic-based platform designed for researchers who prioritize ease of use and precision in nanoparticle synthesis. It is a sophisticated instrument that enables efficient and controlled synthesis of lipid nanoparticles for various research applications. If you need more detailed information about TAMARA, feel free to ask!', additional_kwargs={}, response_metadata={}), HumanMessage(content='What is Samsung?', additional_kwargs={}, response_metadata={}), AIMessage(content='I specialize in providing information related to lipid nanoparticle (LNP) synthesis and the TAMARA Nanoparticle Formulation System. If you have any questions specifically related to these topics or need assistance with LNP synthesis techniques, TAMARA usage, or related products and services from Inside Therapeutics, please feel free to ask.', additional_kwargs={}, response_metadata={}), HumanMessage(content='What are lipid nano particles?', additional_kwargs={}, response_metadata={}), AIMessage(content='Lipid nanoparticles (LNPs) are particles typically ranging in size from 10 to 100 nanometers that are composed of lipids. These nanoparticles are specifically engineered for the encapsulation of RNA and oligonucleotides, which are challenging to encapsulate efficiently using standard nanoparticles like liposomes or PLGA due to the negative charge of the RNA molecules. LNPs are composed of four main types of lipids: ionizable lipids, PEGylated lipids, phospholipids, and sterol lipids. They play a crucial role in the delivery of nucleic acids such as mRNA, siRNA, and tRNA to specific locations in the body for therapeutic purposes. If you have more specific questions about LNPs or their synthesis, feel free to ask for further details.', additional_kwargs={}, response_metadata={}), HumanMessage(content='I want to do a run with Tamara', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters sent to PLC. Checking validation...', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters accepted by PLC. Proceeding with safety checks...', additional_kwargs={}, response_metadata={}), AIMessage(content='Ready to start RUN operation.\n\nPlease verify:\n1. Required fluids are loaded in reservoirs\n2. Chip is correctly seated and oriented\n3. Manifold is properly connected\n4. Lid is CLOSED\n5. Lines are secure\n6. Drain bottle is in place\n7. Pressure supply is within specifications\n\nAI: Ready to start RUN operation.', additional_kwargs={}, response_metadata={}), HumanMessage(content='pause the run', additional_kwargs={}, response_metadata={}), AIMessage(content="RUN operation paused. Say 'play' to resume.", additional_kwargs={}, response_metadata={}), HumanMessage(content='play', additional_kwargs={}, response_metadata={}), AIMessage(content='RUN operation resumed.', additional_kwargs={}, response_metadata={}), HumanMessage(content='Stop the run', additional_kwargs={}, response_metadata={}), AIMessage(content='RUN operation stopped.', additional_kwargs={}, response_metadata={}), HumanMessage(content='Who is Thomas?', additional_kwargs={}, response_metadata={}), AIMessage(content='I specialize in providing information related to lipid nanoparticle (LNP) synthesis and the TAMARA Nanoparticle Formulation System. If you have any questions specifically related to these topics or need assistance with LNP synthesis techniques, TAMARA usage, or related products and services from Inside Therapeutics, please feel free to ask.', additional_kwargs={}, response_metadata={}), HumanMessage(content='Who are the founders of Inside Therapeutics?', additional_kwargs={}, response_metadata={}), AIMessage(content='I focus on providing information related to lipid nanoparticle (LNP) synthesis and the TAMARA Nanoparticle Formulation System. If you have any questions specifically related to these topics or need assistance with LNP synthesis techniques, TAMARA usage, or related products and services from Inside Therapeutics, please feel free to ask.', additional_kwargs={}, response_metadata={}), HumanMessage(content='Who built Tamara?', additional_kwargs={}, response_metadata={}), AIMessage(content='The TAMARA Nanoparticle Formulation System is manufactured by Inside Therapeutics, SAS, located at 25-27 rue de la Grand Font, 16000 Angouleme, France. If you have any specific questions about TAMARA or its operation, feel free to ask for more details.', additional_kwargs={}, response_metadata={}), HumanMessage(content='cls', additional_kwargs={}, response_metadata={}), AIMessage(content="I see you're trying to clear the screen. If you have any more questions or need assistance with lipid nanoparticle synthesis or the TAMARA Nanoparticle Formulation System, feel free to ask!", additional_kwargs={}, response_metadata={})], 'intent': 'ask_kb', 'pending_action': None, 'input_payload': InputPayload(tfr=3.0, frr=6, target_volume=8.0, temperature=23.0, chip_id=<ChipID.HERRINGBONE: 1>, manifold_id=<ManifoldID.LARGE: 1>, lab_pressure=2000.0, org_solvent_id=<OrgSolventID.CUSTOM: 4>, operation_mode=<OperationMode.AGENTIC: 2>, machine_mode=<MachineMode.RUN: 2>, custom_solvent=CustomSolvent(name='Solvent1', viscosity=1184.0, sensitivity=22.0, molar_volume=24.0)), 'last_mode_check': 1759495007.8334403}
2025-10-03 14:44:15,850 - INFO - destroying snap7 client
2025-10-03 14:45:30,463 - INFO - creating snap7 client
2025-10-03 14:45:30,464 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 14:45:30,605 - INFO - PLC connected (192.168.0.1)
2025-10-03 14:45:30,644 - INFO - Current operation mode: CONVENTIONAL
2025-10-03 14:45:30,645 - INFO - disconnecting snap7 client
2025-10-03 14:45:30,646 - INFO - PLC disconnected
2025-10-03 14:45:30,647 - INFO - destroying snap7 client
2025-10-03 14:45:43,267 - INFO - creating snap7 client
2025-10-03 14:45:43,268 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 14:45:43,426 - INFO - PLC connected (192.168.0.1)
2025-10-03 14:45:43,452 - INFO - Current operation mode: AGENTIC
2025-10-03 14:45:43,452 - INFO - disconnecting snap7 client
2025-10-03 14:45:43,453 - INFO - PLC disconnected
2025-10-03 14:45:43,455 - INFO - destroying snap7 client
2025-10-03 14:45:43,455 - INFO - creating snap7 client
2025-10-03 14:45:43,455 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 14:45:43,587 - INFO - PLC connected (192.168.0.1)
2025-10-03 14:45:43,664 - INFO - Machine mode set to 1
2025-10-03 14:45:43,664 - INFO - Machine mode set to READY
2025-10-03 14:45:43,664 - INFO - disconnecting snap7 client
2025-10-03 14:45:43,665 - INFO - PLC disconnected
2025-10-03 14:45:43,665 - INFO - destroying snap7 client
2025-10-03 14:45:50,530 - INFO - Current state before invoke: {'messages': [HumanMessage(content='What is Tamara?', additional_kwargs={}, response_metadata={})], 'intent': None, 'pending_action': None, 'input_payload': None, 'confirmed': False, 'last_tool_result': None, 'last_mode_check': 1759495543.6655746}
2025-10-03 14:45:50,535 - INFO - Routing message: 'what is tamara?' (pending_action: None)
2025-10-03 14:45:50,856 - INFO - Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-10-03 14:45:51,498 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-10-03 14:45:52,906 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 14:45:52,939 - INFO - Current state after invoke: {'messages': [HumanMessage(content='What is Tamara?', additional_kwargs={}, response_metadata={}), AIMessage(content='The TAMARA Nanoparticle Formulation System is a user-friendly, microfluidic-based platform designed for researchers who prioritize ease of use and precision in nanoparticle synthesis. It is a sophisticated instrument that enables efficient and controlled synthesis of lipid nanoparticles, offering a high level of reproducibility and accuracy in formulation design. TAMARA is a valuable tool for scientists engaged in drug delivery research and development, providing a streamlined approach to LNP synthesis.', additional_kwargs={}, response_metadata={})], 'intent': 'ask_kb', 'pending_action': None, 'input_payload': None, 'last_mode_check': 1759495543.6655746}
2025-10-03 14:46:00,340 - INFO - Current state before invoke: {'messages': [HumanMessage(content='What is Tamara?', additional_kwargs={}, response_metadata={}), AIMessage(content='The TAMARA Nanoparticle Formulation System is a user-friendly, microfluidic-based platform designed for researchers who prioritize ease of use and precision in nanoparticle synthesis. It is a sophisticated instrument that enables efficient and controlled synthesis of lipid nanoparticles, offering a high level of reproducibility and accuracy in formulation design. TAMARA is a valuable tool for scientists engaged in drug delivery research and development, providing a streamlined approach to LNP synthesis.', additional_kwargs={}, response_metadata={}), HumanMessage(content='Who built it?', additional_kwargs={}, response_metadata={})], 'intent': 'ask_kb', 'pending_action': None, 'input_payload': None, 'last_mode_check': 1759495543.6655746}
2025-10-03 14:46:00,341 - INFO - Routing message: 'who built it?' (pending_action: None)
2025-10-03 14:46:01,879 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 14:46:02,250 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-10-03 14:46:03,350 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 14:46:03,353 - INFO - Current state after invoke: {'messages': [HumanMessage(content='What is Tamara?', additional_kwargs={}, response_metadata={}), AIMessage(content='The TAMARA Nanoparticle Formulation System is a user-friendly, microfluidic-based platform designed for researchers who prioritize ease of use and precision in nanoparticle synthesis. It is a sophisticated instrument that enables efficient and controlled synthesis of lipid nanoparticles, offering a high level of reproducibility and accuracy in formulation design. TAMARA is a valuable tool for scientists engaged in drug delivery research and development, providing a streamlined approach to LNP synthesis.', additional_kwargs={}, response_metadata={}), HumanMessage(content='Who built it?', additional_kwargs={}, response_metadata={}), AIMessage(content='The TAMARA Nanoparticle Formulation System is manufactured by Inside Therapeutics, SAS, a company located at 25-27 rue de la Grand Font, 16000 Angouleme, France. Inside Therapeutics specializes in developing innovative solutions for nanoparticle synthesis, particularly focusing on lipid nanoparticles and related technologies.', additional_kwargs={}, response_metadata={})], 'intent': 'ask_kb', 'pending_action': None, 'input_payload': None, 'last_mode_check': 1759495543.6655746}
2025-10-03 14:46:15,281 - INFO - Current state before invoke: {'messages': [HumanMessage(content='What is Tamara?', additional_kwargs={}, response_metadata={}), AIMessage(content='The TAMARA Nanoparticle Formulation System is a user-friendly, microfluidic-based platform designed for researchers who prioritize ease of use and precision in nanoparticle synthesis. It is a sophisticated instrument that enables efficient and controlled synthesis of lipid nanoparticles, offering a high level of reproducibility and accuracy in formulation design. TAMARA is a valuable tool for scientists engaged in drug delivery research and development, providing a streamlined approach to LNP synthesis.', additional_kwargs={}, response_metadata={}), HumanMessage(content='Who built it?', additional_kwargs={}, response_metadata={}), AIMessage(content='The TAMARA Nanoparticle Formulation System is manufactured by Inside Therapeutics, SAS, a company located at 25-27 rue de la Grand Font, 16000 Angouleme, France. Inside Therapeutics specializes in developing innovative solutions for nanoparticle synthesis, particularly focusing on lipid nanoparticles and related technologies.', additional_kwargs={}, response_metadata={}), HumanMessage(content='What is Samsung?', additional_kwargs={}, response_metadata={})], 'intent': 'ask_kb', 'pending_action': None, 'input_payload': None, 'last_mode_check': 1759495543.6655746}
2025-10-03 14:46:15,282 - INFO - Routing message: 'what is samsung?' (pending_action: None)
2025-10-03 14:46:15,726 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 14:46:16,012 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-10-03 14:46:17,030 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 14:46:17,035 - INFO - Current state after invoke: {'messages': [HumanMessage(content='What is Tamara?', additional_kwargs={}, response_metadata={}), AIMessage(content='The TAMARA Nanoparticle Formulation System is a user-friendly, microfluidic-based platform designed for researchers who prioritize ease of use and precision in nanoparticle synthesis. It is a sophisticated instrument that enables efficient and controlled synthesis of lipid nanoparticles, offering a high level of reproducibility and accuracy in formulation design. TAMARA is a valuable tool for scientists engaged in drug delivery research and development, providing a streamlined approach to LNP synthesis.', additional_kwargs={}, response_metadata={}), HumanMessage(content='Who built it?', additional_kwargs={}, response_metadata={}), AIMessage(content='The TAMARA Nanoparticle Formulation System is manufactured by Inside Therapeutics, SAS, a company located at 25-27 rue de la Grand Font, 16000 Angouleme, France. Inside Therapeutics specializes in developing innovative solutions for nanoparticle synthesis, particularly focusing on lipid nanoparticles and related technologies.', additional_kwargs={}, response_metadata={}), HumanMessage(content='What is Samsung?', additional_kwargs={}, response_metadata={}), AIMessage(content="I'm here to provide information specifically related to lipid nanoparticle (LNP) synthesis and the TAMARA instrument from Inside Therapeutics. If you have any questions related to these topics or need assistance with LNP synthesis, feel free to ask!", additional_kwargs={}, response_metadata={})], 'intent': 'ask_kb', 'pending_action': None, 'input_payload': None, 'last_mode_check': 1759495543.6655746}
2025-10-03 14:46:29,118 - INFO - Current state before invoke: {'messages': [HumanMessage(content='What is Tamara?', additional_kwargs={}, response_metadata={}), AIMessage(content='The TAMARA Nanoparticle Formulation System is a user-friendly, microfluidic-based platform designed for researchers who prioritize ease of use and precision in nanoparticle synthesis. It is a sophisticated instrument that enables efficient and controlled synthesis of lipid nanoparticles, offering a high level of reproducibility and accuracy in formulation design. TAMARA is a valuable tool for scientists engaged in drug delivery research and development, providing a streamlined approach to LNP synthesis.', additional_kwargs={}, response_metadata={}), HumanMessage(content='Who built it?', additional_kwargs={}, response_metadata={}), AIMessage(content='The TAMARA Nanoparticle Formulation System is manufactured by Inside Therapeutics, SAS, a company located at 25-27 rue de la Grand Font, 16000 Angouleme, France. Inside Therapeutics specializes in developing innovative solutions for nanoparticle synthesis, particularly focusing on lipid nanoparticles and related technologies.', additional_kwargs={}, response_metadata={}), HumanMessage(content='What is Samsung?', additional_kwargs={}, response_metadata={}), AIMessage(content="I'm here to provide information specifically related to lipid nanoparticle (LNP) synthesis and the TAMARA instrument from Inside Therapeutics. If you have any questions related to these topics or need assistance with LNP synthesis, feel free to ask!", additional_kwargs={}, response_metadata={}), HumanMessage(content='What are nano lipid particles?', additional_kwargs={}, response_metadata={})], 'intent': 'ask_kb', 'pending_action': None, 'input_payload': None, 'last_mode_check': 1759495543.6655746}
2025-10-03 14:46:29,120 - INFO - Routing message: 'what are nano lipid particles?' (pending_action: None)
2025-10-03 14:46:29,809 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 14:46:30,084 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-10-03 14:46:31,645 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 14:46:31,647 - INFO - Current state after invoke: {'messages': [HumanMessage(content='What is Tamara?', additional_kwargs={}, response_metadata={}), AIMessage(content='The TAMARA Nanoparticle Formulation System is a user-friendly, microfluidic-based platform designed for researchers who prioritize ease of use and precision in nanoparticle synthesis. It is a sophisticated instrument that enables efficient and controlled synthesis of lipid nanoparticles, offering a high level of reproducibility and accuracy in formulation design. TAMARA is a valuable tool for scientists engaged in drug delivery research and development, providing a streamlined approach to LNP synthesis.', additional_kwargs={}, response_metadata={}), HumanMessage(content='Who built it?', additional_kwargs={}, response_metadata={}), AIMessage(content='The TAMARA Nanoparticle Formulation System is manufactured by Inside Therapeutics, SAS, a company located at 25-27 rue de la Grand Font, 16000 Angouleme, France. Inside Therapeutics specializes in developing innovative solutions for nanoparticle synthesis, particularly focusing on lipid nanoparticles and related technologies.', additional_kwargs={}, response_metadata={}), HumanMessage(content='What is Samsung?', additional_kwargs={}, response_metadata={}), AIMessage(content="I'm here to provide information specifically related to lipid nanoparticle (LNP) synthesis and the TAMARA instrument from Inside Therapeutics. If you have any questions related to these topics or need assistance with LNP synthesis, feel free to ask!", additional_kwargs={}, response_metadata={}), HumanMessage(content='What are nano lipid particles?', additional_kwargs={}, response_metadata={}), AIMessage(content='Nano lipid particles, also known as lipid nanoparticles (LNPs), are particles with sizes typically ranging from 10 to 100 nanometers that are composed of lipids. These nanoparticles are specifically engineered for the encapsulation of RNA and oligonucleotides, which traditional nanoparticles like liposomes or PLGA may not efficiently encapsulate due to the negative charge of the RNA molecules. Lipid nanoparticles are commonly composed of four main types of lipids: ionizable lipids, PEGylated lipids, phospholipids, and sterol lipids. They play a crucial role in drug delivery systems, particularly for nucleic acid-based therapeutics.', additional_kwargs={}, response_metadata={})], 'intent': 'ask_kb', 'pending_action': None, 'input_payload': None, 'last_mode_check': 1759495543.6655746}
2025-10-03 14:46:44,103 - INFO - Current state before invoke: {'messages': [HumanMessage(content='What is Tamara?', additional_kwargs={}, response_metadata={}), AIMessage(content='The TAMARA Nanoparticle Formulation System is a user-friendly, microfluidic-based platform designed for researchers who prioritize ease of use and precision in nanoparticle synthesis. It is a sophisticated instrument that enables efficient and controlled synthesis of lipid nanoparticles, offering a high level of reproducibility and accuracy in formulation design. TAMARA is a valuable tool for scientists engaged in drug delivery research and development, providing a streamlined approach to LNP synthesis.', additional_kwargs={}, response_metadata={}), HumanMessage(content='Who built it?', additional_kwargs={}, response_metadata={}), AIMessage(content='The TAMARA Nanoparticle Formulation System is manufactured by Inside Therapeutics, SAS, a company located at 25-27 rue de la Grand Font, 16000 Angouleme, France. Inside Therapeutics specializes in developing innovative solutions for nanoparticle synthesis, particularly focusing on lipid nanoparticles and related technologies.', additional_kwargs={}, response_metadata={}), HumanMessage(content='What is Samsung?', additional_kwargs={}, response_metadata={}), AIMessage(content="I'm here to provide information specifically related to lipid nanoparticle (LNP) synthesis and the TAMARA instrument from Inside Therapeutics. If you have any questions related to these topics or need assistance with LNP synthesis, feel free to ask!", additional_kwargs={}, response_metadata={}), HumanMessage(content='What are nano lipid particles?', additional_kwargs={}, response_metadata={}), AIMessage(content='Nano lipid particles, also known as lipid nanoparticles (LNPs), are particles with sizes typically ranging from 10 to 100 nanometers that are composed of lipids. These nanoparticles are specifically engineered for the encapsulation of RNA and oligonucleotides, which traditional nanoparticles like liposomes or PLGA may not efficiently encapsulate due to the negative charge of the RNA molecules. Lipid nanoparticles are commonly composed of four main types of lipids: ionizable lipids, PEGylated lipids, phospholipids, and sterol lipids. They play a crucial role in drug delivery systems, particularly for nucleic acid-based therapeutics.', additional_kwargs={}, response_metadata={}), HumanMessage(content='I want to do a run with Tamara', additional_kwargs={}, response_metadata={})], 'intent': 'ask_kb', 'pending_action': None, 'input_payload': None, 'last_mode_check': 1759495543.6655746}
2025-10-03 14:46:44,103 - INFO - Routing message: 'i want to do a run with tamara' (pending_action: None)
2025-10-03 14:47:48,028 - INFO - creating snap7 client
2025-10-03 14:47:48,029 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 14:47:48,148 - INFO - PLC connected (192.168.0.1)
2025-10-03 14:47:49,002 - INFO - Experiment parameters written to PLC DB9 (no machine mode set):
- Operation: AGENTIC
- Core params: TFR=2.0, FRR=5, Vol=9.0, Temp=21.0, Chip=BAFFLE, Manifold=LARGE
- Solvent: CUSTOM (Stuff_v1)
2025-10-03 14:47:49,049 - INFO - State after PLC validation: input_payload=InputPayload(tfr=2.0, frr=5, target_volume=9.0, temperature=21.0, chip_id=<ChipID.BAFFLE: 0>, manifold_id=<ManifoldID.LARGE: 1>, lab_pressure=2000.0, org_solvent_id=<OrgSolventID.CUSTOM: 4>, operation_mode=<OperationMode.AGENTIC: 2>, machine_mode=<MachineMode.RUN: 2>, custom_solvent=CustomSolvent(name='Stuff_v1', viscosity=1186.0, sensitivity=23.0, molar_volume=22.0)), pending_action=run
2025-10-03 14:47:49,049 - INFO - disconnecting snap7 client
2025-10-03 14:47:49,049 - INFO - PLC disconnected
2025-10-03 14:47:49,050 - INFO - destroying snap7 client
2025-10-03 14:47:49,053 - INFO - Current state after invoke: {'messages': [HumanMessage(content='What is Tamara?', additional_kwargs={}, response_metadata={}), AIMessage(content='The TAMARA Nanoparticle Formulation System is a user-friendly, microfluidic-based platform designed for researchers who prioritize ease of use and precision in nanoparticle synthesis. It is a sophisticated instrument that enables efficient and controlled synthesis of lipid nanoparticles, offering a high level of reproducibility and accuracy in formulation design. TAMARA is a valuable tool for scientists engaged in drug delivery research and development, providing a streamlined approach to LNP synthesis.', additional_kwargs={}, response_metadata={}), HumanMessage(content='Who built it?', additional_kwargs={}, response_metadata={}), AIMessage(content='The TAMARA Nanoparticle Formulation System is manufactured by Inside Therapeutics, SAS, a company located at 25-27 rue de la Grand Font, 16000 Angouleme, France. Inside Therapeutics specializes in developing innovative solutions for nanoparticle synthesis, particularly focusing on lipid nanoparticles and related technologies.', additional_kwargs={}, response_metadata={}), HumanMessage(content='What is Samsung?', additional_kwargs={}, response_metadata={}), AIMessage(content="I'm here to provide information specifically related to lipid nanoparticle (LNP) synthesis and the TAMARA instrument from Inside Therapeutics. If you have any questions related to these topics or need assistance with LNP synthesis, feel free to ask!", additional_kwargs={}, response_metadata={}), HumanMessage(content='What are nano lipid particles?', additional_kwargs={}, response_metadata={}), AIMessage(content='Nano lipid particles, also known as lipid nanoparticles (LNPs), are particles with sizes typically ranging from 10 to 100 nanometers that are composed of lipids. These nanoparticles are specifically engineered for the encapsulation of RNA and oligonucleotides, which traditional nanoparticles like liposomes or PLGA may not efficiently encapsulate due to the negative charge of the RNA molecules. Lipid nanoparticles are commonly composed of four main types of lipids: ionizable lipids, PEGylated lipids, phospholipids, and sterol lipids. They play a crucial role in drug delivery systems, particularly for nucleic acid-based therapeutics.', additional_kwargs={}, response_metadata={}), HumanMessage(content='I want to do a run with Tamara', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters sent to PLC. Checking validation...', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters accepted by PLC. Proceeding with safety checks...', additional_kwargs={}, response_metadata={}), AIMessage(content='Ready to start RUN operation.\n\nPlease verify:\n1. Required fluids are loaded in reservoirs\n2. Chip is correctly seated and oriented\n3. Manifold is properly connected\n4. Lid is CLOSED\n5. Lines are secure\n6. Drain bottle is in place\n7. Pressure supply is within specifications\n\nAI: Ready to start RUN operation.', additional_kwargs={}, response_metadata={})], 'intent': 'run', 'pending_action': 'run', 'input_payload': InputPayload(tfr=2.0, frr=5, target_volume=9.0, temperature=21.0, chip_id=<ChipID.BAFFLE: 0>, manifold_id=<ManifoldID.LARGE: 1>, lab_pressure=2000.0, org_solvent_id=<OrgSolventID.CUSTOM: 4>, operation_mode=<OperationMode.AGENTIC: 2>, machine_mode=<MachineMode.RUN: 2>, custom_solvent=CustomSolvent(name='Stuff_v1', viscosity=1186.0, sensitivity=23.0, molar_volume=22.0)), 'last_mode_check': 1759495543.6655746}
2025-10-03 14:47:55,023 - INFO - Starting run operation...
2025-10-03 14:47:55,023 - INFO - creating snap7 client
2025-10-03 14:47:55,024 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 14:47:55,120 - INFO - PLC connected (192.168.0.1)
2025-10-03 14:47:55,120 - INFO - Clearing all command bits
2025-10-03 14:47:55,121 - INFO - Writing BOOL COMMANDS_RUN.b_START = False
2025-10-03 14:47:55,121 - INFO -   section: COMMANDS_RUN
2025-10-03 14:47:55,122 - INFO -   byte_offset: 258
2025-10-03 14:47:55,122 - INFO -   bit_offset: 0
2025-10-03 14:47:55,123 - INFO -   raw_start: 258.0
2025-10-03 14:47:55,206 - INFO - Successfully wrote COMMANDS_RUN.b_START = False
2025-10-03 14:47:55,226 - INFO - Writing BOOL COMMANDS_RUN.b_PAUSE_PLAY = False
2025-10-03 14:47:55,226 - INFO -   section: COMMANDS_RUN
2025-10-03 14:47:55,227 - INFO -   byte_offset: 258
2025-10-03 14:47:55,228 - INFO -   bit_offset: 1
2025-10-03 14:47:55,228 - INFO -   raw_start: 258.1
2025-10-03 14:47:55,261 - INFO - Successfully wrote COMMANDS_RUN.b_PAUSE_PLAY = False
2025-10-03 14:47:55,302 - INFO - Writing BOOL COMMANDS_RUN.b_CONFIRM = False
2025-10-03 14:47:55,302 - INFO -   section: COMMANDS_RUN
2025-10-03 14:47:55,303 - INFO -   byte_offset: 258
2025-10-03 14:47:55,304 - INFO -   bit_offset: 1
2025-10-03 14:47:55,304 - INFO -   raw_start: 258.2
2025-10-03 14:47:55,367 - INFO - Successfully wrote COMMANDS_RUN.b_CONFIRM = False
2025-10-03 14:47:55,396 - INFO - Writing BOOL COMMANDS_RUN.b_STOP = False
2025-10-03 14:47:55,397 - INFO -   section: COMMANDS_RUN
2025-10-03 14:47:55,397 - INFO -   byte_offset: 258
2025-10-03 14:47:55,398 - INFO -   bit_offset: 3
2025-10-03 14:47:55,398 - INFO -   raw_start: 258.3
2025-10-03 14:47:55,471 - INFO - Successfully wrote COMMANDS_RUN.b_STOP = False
2025-10-03 14:47:55,500 - INFO - Writing BOOL COMMANDS_CLEAN.b_START = False
2025-10-03 14:47:55,500 - INFO -   section: COMMANDS_CLEAN
2025-10-03 14:47:55,500 - INFO -   byte_offset: 260
2025-10-03 14:47:55,502 - INFO -   bit_offset: 0
2025-10-03 14:47:55,502 - INFO -   raw_start: 260.0
2025-10-03 14:47:55,583 - INFO - Successfully wrote COMMANDS_CLEAN.b_START = False
2025-10-03 14:47:55,642 - INFO - Writing BOOL COMMANDS_CLEAN.b_PAUSE_PLAY = False
2025-10-03 14:47:55,642 - INFO -   section: COMMANDS_CLEAN
2025-10-03 14:47:55,642 - INFO -   byte_offset: 260
2025-10-03 14:47:55,644 - INFO -   bit_offset: 1
2025-10-03 14:47:55,644 - INFO -   raw_start: 260.1
2025-10-03 14:47:55,714 - INFO - Successfully wrote COMMANDS_CLEAN.b_PAUSE_PLAY = False
2025-10-03 14:47:55,746 - INFO - Writing BOOL COMMANDS_CLEAN.b_CONFIRM = False
2025-10-03 14:47:55,747 - INFO -   section: COMMANDS_CLEAN
2025-10-03 14:47:55,747 - INFO -   byte_offset: 260
2025-10-03 14:47:55,748 - INFO -   bit_offset: 1
2025-10-03 14:47:55,748 - INFO -   raw_start: 260.2
2025-10-03 14:47:55,772 - INFO - Successfully wrote COMMANDS_CLEAN.b_CONFIRM = False
2025-10-03 14:47:55,792 - INFO - Writing BOOL COMMANDS_CLEAN.b_STOP = False
2025-10-03 14:47:55,792 - INFO -   section: COMMANDS_CLEAN
2025-10-03 14:47:55,793 - INFO -   byte_offset: 260
2025-10-03 14:47:55,793 - INFO -   bit_offset: 3
2025-10-03 14:47:55,794 - INFO -   raw_start: 260.3
2025-10-03 14:47:55,882 - INFO - Successfully wrote COMMANDS_CLEAN.b_STOP = False
2025-10-03 14:47:55,908 - INFO - Writing BOOL COMMANDS_PRESSURE_TEST.b_START = False
2025-10-03 14:47:55,908 - INFO -   section: COMMANDS_PRESSURE_TEST
2025-10-03 14:47:55,909 - INFO -   byte_offset: 262
2025-10-03 14:47:55,909 - INFO -   bit_offset: 0
2025-10-03 14:47:55,909 - INFO -   raw_start: 262.0
2025-10-03 14:47:55,974 - INFO - Successfully wrote COMMANDS_PRESSURE_TEST.b_START = False
2025-10-03 14:47:55,988 - INFO - Writing BOOL COMMANDS_PRESSURE_TEST.b_PAUSE_PLAY = False
2025-10-03 14:47:55,988 - INFO -   section: COMMANDS_PRESSURE_TEST
2025-10-03 14:47:55,988 - INFO -   byte_offset: 262
2025-10-03 14:47:55,989 - INFO -   bit_offset: 1
2025-10-03 14:47:55,989 - INFO -   raw_start: 262.1
2025-10-03 14:47:56,056 - INFO - Successfully wrote COMMANDS_PRESSURE_TEST.b_PAUSE_PLAY = False
2025-10-03 14:47:56,068 - INFO - Writing BOOL COMMANDS_PRESSURE_TEST.b_CONFIRM = False
2025-10-03 14:47:56,068 - INFO -   section: COMMANDS_PRESSURE_TEST
2025-10-03 14:47:56,069 - INFO -   byte_offset: 262
2025-10-03 14:47:56,069 - INFO -   bit_offset: 1
2025-10-03 14:47:56,070 - INFO -   raw_start: 262.2
2025-10-03 14:47:56,160 - INFO - Successfully wrote COMMANDS_PRESSURE_TEST.b_CONFIRM = False
2025-10-03 14:47:56,196 - INFO - Writing BOOL COMMANDS_PRESSURE_TEST.b_STOP = False
2025-10-03 14:47:56,197 - INFO -   section: COMMANDS_PRESSURE_TEST
2025-10-03 14:47:56,197 - INFO -   byte_offset: 262
2025-10-03 14:47:56,198 - INFO -   bit_offset: 3
2025-10-03 14:47:56,198 - INFO -   raw_start: 262.3
2025-10-03 14:47:56,246 - INFO - Successfully wrote COMMANDS_PRESSURE_TEST.b_STOP = False
2025-10-03 14:47:56,256 - INFO - All command bits cleared and verified
2025-10-03 14:47:56,256 - INFO - Writing BOOL COMMANDS_RUN.b_START = True
2025-10-03 14:47:56,257 - INFO -   section: COMMANDS_RUN
2025-10-03 14:47:56,257 - INFO -   byte_offset: 258
2025-10-03 14:47:56,257 - INFO -   bit_offset: 0
2025-10-03 14:47:56,258 - INFO -   raw_start: 258.0
2025-10-03 14:47:56,294 - INFO - Successfully wrote COMMANDS_RUN.b_START = True
2025-10-03 14:47:56,368 - INFO - Operation started: RUN mode with START bit set
2025-10-03 14:47:56,458 - INFO - disconnecting snap7 client
2025-10-03 14:47:56,459 - INFO - PLC disconnected
2025-10-03 14:48:01,729 - INFO - Current state before invoke: {'messages': [HumanMessage(content='What is Tamara?', additional_kwargs={}, response_metadata={}), AIMessage(content='The TAMARA Nanoparticle Formulation System is a user-friendly, microfluidic-based platform designed for researchers who prioritize ease of use and precision in nanoparticle synthesis. It is a sophisticated instrument that enables efficient and controlled synthesis of lipid nanoparticles, offering a high level of reproducibility and accuracy in formulation design. TAMARA is a valuable tool for scientists engaged in drug delivery research and development, providing a streamlined approach to LNP synthesis.', additional_kwargs={}, response_metadata={}), HumanMessage(content='Who built it?', additional_kwargs={}, response_metadata={}), AIMessage(content='The TAMARA Nanoparticle Formulation System is manufactured by Inside Therapeutics, SAS, a company located at 25-27 rue de la Grand Font, 16000 Angouleme, France. Inside Therapeutics specializes in developing innovative solutions for nanoparticle synthesis, particularly focusing on lipid nanoparticles and related technologies.', additional_kwargs={}, response_metadata={}), HumanMessage(content='What is Samsung?', additional_kwargs={}, response_metadata={}), AIMessage(content="I'm here to provide information specifically related to lipid nanoparticle (LNP) synthesis and the TAMARA instrument from Inside Therapeutics. If you have any questions related to these topics or need assistance with LNP synthesis, feel free to ask!", additional_kwargs={}, response_metadata={}), HumanMessage(content='What are nano lipid particles?', additional_kwargs={}, response_metadata={}), AIMessage(content='Nano lipid particles, also known as lipid nanoparticles (LNPs), are particles with sizes typically ranging from 10 to 100 nanometers that are composed of lipids. These nanoparticles are specifically engineered for the encapsulation of RNA and oligonucleotides, which traditional nanoparticles like liposomes or PLGA may not efficiently encapsulate due to the negative charge of the RNA molecules. Lipid nanoparticles are commonly composed of four main types of lipids: ionizable lipids, PEGylated lipids, phospholipids, and sterol lipids. They play a crucial role in drug delivery systems, particularly for nucleic acid-based therapeutics.', additional_kwargs={}, response_metadata={}), HumanMessage(content='I want to do a run with Tamara', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters sent to PLC. Checking validation...', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters accepted by PLC. Proceeding with safety checks...', additional_kwargs={}, response_metadata={}), AIMessage(content='Ready to start RUN operation.\n\nPlease verify:\n1. Required fluids are loaded in reservoirs\n2. Chip is correctly seated and oriented\n3. Manifold is properly connected\n4. Lid is CLOSED\n5. Lines are secure\n6. Drain bottle is in place\n7. Pressure supply is within specifications\n\nAI: Ready to start RUN operation.', additional_kwargs={}, response_metadata={}), HumanMessage(content='pause the run', additional_kwargs={}, response_metadata={})], 'intent': 'run', 'pending_action': None, 'input_payload': InputPayload(tfr=2.0, frr=5, target_volume=9.0, temperature=21.0, chip_id=<ChipID.BAFFLE: 0>, manifold_id=<ManifoldID.LARGE: 1>, lab_pressure=2000.0, org_solvent_id=<OrgSolventID.CUSTOM: 4>, operation_mode=<OperationMode.AGENTIC: 2>, machine_mode=<MachineMode.RUN: 2>, custom_solvent=CustomSolvent(name='Stuff_v1', viscosity=1186.0, sensitivity=23.0, molar_volume=22.0)), 'last_mode_check': 1759495543.6655746, 'confirmed': True}
2025-10-03 14:48:01,731 - INFO - Routing message: 'pause the run' (pending_action: None)
2025-10-03 14:48:01,731 - INFO - Handling PAUSE command...
2025-10-03 14:48:01,731 - INFO - creating snap7 client
2025-10-03 14:48:01,732 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 14:48:01,799 - INFO - PLC connected (192.168.0.1)
2025-10-03 14:48:01,799 - INFO - Reading current status...
2025-10-03 14:48:01,846 - INFO - Current status code: 2
2025-10-03 14:48:01,846 - INFO - Setting PAUSE_PLAY bit to TRUE for RUN mode...
2025-10-03 14:48:01,847 - INFO - Pulsing COMMANDS_RUN.b_PAUSE_PLAY to True
2025-10-03 14:48:01,847 - INFO - Writing BOOL COMMANDS_RUN.b_PAUSE_PLAY = True
2025-10-03 14:48:01,848 - INFO -   section: COMMANDS_RUN
2025-10-03 14:48:01,848 - INFO -   byte_offset: 258
2025-10-03 14:48:01,849 - INFO -   bit_offset: 1
2025-10-03 14:48:01,849 - INFO -   raw_start: 258.1
2025-10-03 14:48:01,946 - INFO - Successfully wrote COMMANDS_RUN.b_PAUSE_PLAY = True
2025-10-03 14:48:01,985 - INFO - Command COMMANDS_RUN.b_PAUSE_PLAY successfully set to True and verified
2025-10-03 14:48:01,985 - INFO - Disconnecting from PLC...
2025-10-03 14:48:01,986 - INFO - disconnecting snap7 client
2025-10-03 14:48:01,986 - INFO - PLC disconnected
2025-10-03 14:48:01,986 - INFO - destroying snap7 client
2025-10-03 14:48:01,988 - INFO - Current state after invoke: {'messages': [HumanMessage(content='What is Tamara?', additional_kwargs={}, response_metadata={}), AIMessage(content='The TAMARA Nanoparticle Formulation System is a user-friendly, microfluidic-based platform designed for researchers who prioritize ease of use and precision in nanoparticle synthesis. It is a sophisticated instrument that enables efficient and controlled synthesis of lipid nanoparticles, offering a high level of reproducibility and accuracy in formulation design. TAMARA is a valuable tool for scientists engaged in drug delivery research and development, providing a streamlined approach to LNP synthesis.', additional_kwargs={}, response_metadata={}), HumanMessage(content='Who built it?', additional_kwargs={}, response_metadata={}), AIMessage(content='The TAMARA Nanoparticle Formulation System is manufactured by Inside Therapeutics, SAS, a company located at 25-27 rue de la Grand Font, 16000 Angouleme, France. Inside Therapeutics specializes in developing innovative solutions for nanoparticle synthesis, particularly focusing on lipid nanoparticles and related technologies.', additional_kwargs={}, response_metadata={}), HumanMessage(content='What is Samsung?', additional_kwargs={}, response_metadata={}), AIMessage(content="I'm here to provide information specifically related to lipid nanoparticle (LNP) synthesis and the TAMARA instrument from Inside Therapeutics. If you have any questions related to these topics or need assistance with LNP synthesis, feel free to ask!", additional_kwargs={}, response_metadata={}), HumanMessage(content='What are nano lipid particles?', additional_kwargs={}, response_metadata={}), AIMessage(content='Nano lipid particles, also known as lipid nanoparticles (LNPs), are particles with sizes typically ranging from 10 to 100 nanometers that are composed of lipids. These nanoparticles are specifically engineered for the encapsulation of RNA and oligonucleotides, which traditional nanoparticles like liposomes or PLGA may not efficiently encapsulate due to the negative charge of the RNA molecules. Lipid nanoparticles are commonly composed of four main types of lipids: ionizable lipids, PEGylated lipids, phospholipids, and sterol lipids. They play a crucial role in drug delivery systems, particularly for nucleic acid-based therapeutics.', additional_kwargs={}, response_metadata={}), HumanMessage(content='I want to do a run with Tamara', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters sent to PLC. Checking validation...', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters accepted by PLC. Proceeding with safety checks...', additional_kwargs={}, response_metadata={}), AIMessage(content='Ready to start RUN operation.\n\nPlease verify:\n1. Required fluids are loaded in reservoirs\n2. Chip is correctly seated and oriented\n3. Manifold is properly connected\n4. Lid is CLOSED\n5. Lines are secure\n6. Drain bottle is in place\n7. Pressure supply is within specifications\n\nAI: Ready to start RUN operation.', additional_kwargs={}, response_metadata={}), HumanMessage(content='pause the run', additional_kwargs={}, response_metadata={}), AIMessage(content="RUN operation paused. Say 'play' to resume.", additional_kwargs={}, response_metadata={})], 'intent': 'other', 'pending_action': None, 'input_payload': InputPayload(tfr=2.0, frr=5, target_volume=9.0, temperature=21.0, chip_id=<ChipID.BAFFLE: 0>, manifold_id=<ManifoldID.LARGE: 1>, lab_pressure=2000.0, org_solvent_id=<OrgSolventID.CUSTOM: 4>, operation_mode=<OperationMode.AGENTIC: 2>, machine_mode=<MachineMode.RUN: 2>, custom_solvent=CustomSolvent(name='Stuff_v1', viscosity=1186.0, sensitivity=23.0, molar_volume=22.0)), 'last_mode_check': 1759495543.6655746}
2025-10-03 14:48:07,106 - INFO - creating snap7 client
2025-10-03 14:48:07,107 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 14:48:07,202 - INFO - PLC connected (192.168.0.1)
2025-10-03 14:48:07,225 - INFO - Current operation mode: AGENTIC
2025-10-03 14:48:07,225 - INFO - disconnecting snap7 client
2025-10-03 14:48:07,226 - INFO - PLC disconnected
2025-10-03 14:48:07,227 - INFO - destroying snap7 client
2025-10-03 14:48:07,228 - INFO - Current state before invoke: {'messages': [HumanMessage(content='What is Tamara?', additional_kwargs={}, response_metadata={}), AIMessage(content='The TAMARA Nanoparticle Formulation System is a user-friendly, microfluidic-based platform designed for researchers who prioritize ease of use and precision in nanoparticle synthesis. It is a sophisticated instrument that enables efficient and controlled synthesis of lipid nanoparticles, offering a high level of reproducibility and accuracy in formulation design. TAMARA is a valuable tool for scientists engaged in drug delivery research and development, providing a streamlined approach to LNP synthesis.', additional_kwargs={}, response_metadata={}), HumanMessage(content='Who built it?', additional_kwargs={}, response_metadata={}), AIMessage(content='The TAMARA Nanoparticle Formulation System is manufactured by Inside Therapeutics, SAS, a company located at 25-27 rue de la Grand Font, 16000 Angouleme, France. Inside Therapeutics specializes in developing innovative solutions for nanoparticle synthesis, particularly focusing on lipid nanoparticles and related technologies.', additional_kwargs={}, response_metadata={}), HumanMessage(content='What is Samsung?', additional_kwargs={}, response_metadata={}), AIMessage(content="I'm here to provide information specifically related to lipid nanoparticle (LNP) synthesis and the TAMARA instrument from Inside Therapeutics. If you have any questions related to these topics or need assistance with LNP synthesis, feel free to ask!", additional_kwargs={}, response_metadata={}), HumanMessage(content='What are nano lipid particles?', additional_kwargs={}, response_metadata={}), AIMessage(content='Nano lipid particles, also known as lipid nanoparticles (LNPs), are particles with sizes typically ranging from 10 to 100 nanometers that are composed of lipids. These nanoparticles are specifically engineered for the encapsulation of RNA and oligonucleotides, which traditional nanoparticles like liposomes or PLGA may not efficiently encapsulate due to the negative charge of the RNA molecules. Lipid nanoparticles are commonly composed of four main types of lipids: ionizable lipids, PEGylated lipids, phospholipids, and sterol lipids. They play a crucial role in drug delivery systems, particularly for nucleic acid-based therapeutics.', additional_kwargs={}, response_metadata={}), HumanMessage(content='I want to do a run with Tamara', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters sent to PLC. Checking validation...', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters accepted by PLC. Proceeding with safety checks...', additional_kwargs={}, response_metadata={}), AIMessage(content='Ready to start RUN operation.\n\nPlease verify:\n1. Required fluids are loaded in reservoirs\n2. Chip is correctly seated and oriented\n3. Manifold is properly connected\n4. Lid is CLOSED\n5. Lines are secure\n6. Drain bottle is in place\n7. Pressure supply is within specifications\n\nAI: Ready to start RUN operation.', additional_kwargs={}, response_metadata={}), HumanMessage(content='pause the run', additional_kwargs={}, response_metadata={}), AIMessage(content="RUN operation paused. Say 'play' to resume.", additional_kwargs={}, response_metadata={}), HumanMessage(content='play', additional_kwargs={}, response_metadata={})], 'intent': 'other', 'pending_action': None, 'input_payload': InputPayload(tfr=2.0, frr=5, target_volume=9.0, temperature=21.0, chip_id=<ChipID.BAFFLE: 0>, manifold_id=<ManifoldID.LARGE: 1>, lab_pressure=2000.0, org_solvent_id=<OrgSolventID.CUSTOM: 4>, operation_mode=<OperationMode.AGENTIC: 2>, machine_mode=<MachineMode.RUN: 2>, custom_solvent=CustomSolvent(name='Stuff_v1', viscosity=1186.0, sensitivity=23.0, molar_volume=22.0)), 'last_mode_check': 1759495543.6655746}
2025-10-03 14:48:07,229 - INFO - Routing message: 'play' (pending_action: None)
2025-10-03 14:48:07,229 - INFO - Handling PLAY/RESUME command...
2025-10-03 14:48:07,229 - INFO - creating snap7 client
2025-10-03 14:48:07,230 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 14:48:07,412 - INFO - PLC connected (192.168.0.1)
2025-10-03 14:48:07,412 - INFO - Reading current status...
2025-10-03 14:48:07,478 - INFO - Current status code: 2
2025-10-03 14:48:07,478 - INFO - Setting PAUSE_PLAY bit to FALSE for RUN mode...
2025-10-03 14:48:07,478 - INFO - Pulsing COMMANDS_RUN.b_PAUSE_PLAY to False
2025-10-03 14:48:07,479 - INFO - Writing BOOL COMMANDS_RUN.b_PAUSE_PLAY = False
2025-10-03 14:48:07,479 - INFO -   section: COMMANDS_RUN
2025-10-03 14:48:07,479 - INFO -   byte_offset: 258
2025-10-03 14:48:07,480 - INFO -   bit_offset: 1
2025-10-03 14:48:07,480 - INFO -   raw_start: 258.1
2025-10-03 14:48:07,553 - INFO - Successfully wrote COMMANDS_RUN.b_PAUSE_PLAY = False
2025-10-03 14:48:07,581 - INFO - Command COMMANDS_RUN.b_PAUSE_PLAY successfully set to False and verified
2025-10-03 14:48:07,581 - INFO - Disconnecting from PLC...
2025-10-03 14:48:07,581 - INFO - disconnecting snap7 client
2025-10-03 14:48:07,582 - INFO - PLC disconnected
2025-10-03 14:48:07,582 - INFO - destroying snap7 client
2025-10-03 14:48:07,583 - INFO - Current state after invoke: {'messages': [HumanMessage(content='What is Tamara?', additional_kwargs={}, response_metadata={}), AIMessage(content='The TAMARA Nanoparticle Formulation System is a user-friendly, microfluidic-based platform designed for researchers who prioritize ease of use and precision in nanoparticle synthesis. It is a sophisticated instrument that enables efficient and controlled synthesis of lipid nanoparticles, offering a high level of reproducibility and accuracy in formulation design. TAMARA is a valuable tool for scientists engaged in drug delivery research and development, providing a streamlined approach to LNP synthesis.', additional_kwargs={}, response_metadata={}), HumanMessage(content='Who built it?', additional_kwargs={}, response_metadata={}), AIMessage(content='The TAMARA Nanoparticle Formulation System is manufactured by Inside Therapeutics, SAS, a company located at 25-27 rue de la Grand Font, 16000 Angouleme, France. Inside Therapeutics specializes in developing innovative solutions for nanoparticle synthesis, particularly focusing on lipid nanoparticles and related technologies.', additional_kwargs={}, response_metadata={}), HumanMessage(content='What is Samsung?', additional_kwargs={}, response_metadata={}), AIMessage(content="I'm here to provide information specifically related to lipid nanoparticle (LNP) synthesis and the TAMARA instrument from Inside Therapeutics. If you have any questions related to these topics or need assistance with LNP synthesis, feel free to ask!", additional_kwargs={}, response_metadata={}), HumanMessage(content='What are nano lipid particles?', additional_kwargs={}, response_metadata={}), AIMessage(content='Nano lipid particles, also known as lipid nanoparticles (LNPs), are particles with sizes typically ranging from 10 to 100 nanometers that are composed of lipids. These nanoparticles are specifically engineered for the encapsulation of RNA and oligonucleotides, which traditional nanoparticles like liposomes or PLGA may not efficiently encapsulate due to the negative charge of the RNA molecules. Lipid nanoparticles are commonly composed of four main types of lipids: ionizable lipids, PEGylated lipids, phospholipids, and sterol lipids. They play a crucial role in drug delivery systems, particularly for nucleic acid-based therapeutics.', additional_kwargs={}, response_metadata={}), HumanMessage(content='I want to do a run with Tamara', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters sent to PLC. Checking validation...', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters accepted by PLC. Proceeding with safety checks...', additional_kwargs={}, response_metadata={}), AIMessage(content='Ready to start RUN operation.\n\nPlease verify:\n1. Required fluids are loaded in reservoirs\n2. Chip is correctly seated and oriented\n3. Manifold is properly connected\n4. Lid is CLOSED\n5. Lines are secure\n6. Drain bottle is in place\n7. Pressure supply is within specifications\n\nAI: Ready to start RUN operation.', additional_kwargs={}, response_metadata={}), HumanMessage(content='pause the run', additional_kwargs={}, response_metadata={}), AIMessage(content="RUN operation paused. Say 'play' to resume.", additional_kwargs={}, response_metadata={}), HumanMessage(content='play', additional_kwargs={}, response_metadata={}), AIMessage(content='RUN operation resumed.', additional_kwargs={}, response_metadata={})], 'intent': 'other', 'pending_action': None, 'input_payload': InputPayload(tfr=2.0, frr=5, target_volume=9.0, temperature=21.0, chip_id=<ChipID.BAFFLE: 0>, manifold_id=<ManifoldID.LARGE: 1>, lab_pressure=2000.0, org_solvent_id=<OrgSolventID.CUSTOM: 4>, operation_mode=<OperationMode.AGENTIC: 2>, machine_mode=<MachineMode.RUN: 2>, custom_solvent=CustomSolvent(name='Stuff_v1', viscosity=1186.0, sensitivity=23.0, molar_volume=22.0)), 'last_mode_check': 1759495543.6655746}
2025-10-03 14:48:13,198 - INFO - creating snap7 client
2025-10-03 14:48:13,198 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 14:48:13,264 - INFO - PLC connected (192.168.0.1)
2025-10-03 14:48:13,306 - INFO - Current operation mode: AGENTIC
2025-10-03 14:48:13,306 - INFO - disconnecting snap7 client
2025-10-03 14:48:13,307 - INFO - PLC disconnected
2025-10-03 14:48:13,307 - INFO - destroying snap7 client
2025-10-03 14:48:13,308 - INFO - Current state before invoke: {'messages': [HumanMessage(content='What is Tamara?', additional_kwargs={}, response_metadata={}), AIMessage(content='The TAMARA Nanoparticle Formulation System is a user-friendly, microfluidic-based platform designed for researchers who prioritize ease of use and precision in nanoparticle synthesis. It is a sophisticated instrument that enables efficient and controlled synthesis of lipid nanoparticles, offering a high level of reproducibility and accuracy in formulation design. TAMARA is a valuable tool for scientists engaged in drug delivery research and development, providing a streamlined approach to LNP synthesis.', additional_kwargs={}, response_metadata={}), HumanMessage(content='Who built it?', additional_kwargs={}, response_metadata={}), AIMessage(content='The TAMARA Nanoparticle Formulation System is manufactured by Inside Therapeutics, SAS, a company located at 25-27 rue de la Grand Font, 16000 Angouleme, France. Inside Therapeutics specializes in developing innovative solutions for nanoparticle synthesis, particularly focusing on lipid nanoparticles and related technologies.', additional_kwargs={}, response_metadata={}), HumanMessage(content='What is Samsung?', additional_kwargs={}, response_metadata={}), AIMessage(content="I'm here to provide information specifically related to lipid nanoparticle (LNP) synthesis and the TAMARA instrument from Inside Therapeutics. If you have any questions related to these topics or need assistance with LNP synthesis, feel free to ask!", additional_kwargs={}, response_metadata={}), HumanMessage(content='What are nano lipid particles?', additional_kwargs={}, response_metadata={}), AIMessage(content='Nano lipid particles, also known as lipid nanoparticles (LNPs), are particles with sizes typically ranging from 10 to 100 nanometers that are composed of lipids. These nanoparticles are specifically engineered for the encapsulation of RNA and oligonucleotides, which traditional nanoparticles like liposomes or PLGA may not efficiently encapsulate due to the negative charge of the RNA molecules. Lipid nanoparticles are commonly composed of four main types of lipids: ionizable lipids, PEGylated lipids, phospholipids, and sterol lipids. They play a crucial role in drug delivery systems, particularly for nucleic acid-based therapeutics.', additional_kwargs={}, response_metadata={}), HumanMessage(content='I want to do a run with Tamara', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters sent to PLC. Checking validation...', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters accepted by PLC. Proceeding with safety checks...', additional_kwargs={}, response_metadata={}), AIMessage(content='Ready to start RUN operation.\n\nPlease verify:\n1. Required fluids are loaded in reservoirs\n2. Chip is correctly seated and oriented\n3. Manifold is properly connected\n4. Lid is CLOSED\n5. Lines are secure\n6. Drain bottle is in place\n7. Pressure supply is within specifications\n\nAI: Ready to start RUN operation.', additional_kwargs={}, response_metadata={}), HumanMessage(content='pause the run', additional_kwargs={}, response_metadata={}), AIMessage(content="RUN operation paused. Say 'play' to resume.", additional_kwargs={}, response_metadata={}), HumanMessage(content='play', additional_kwargs={}, response_metadata={}), AIMessage(content='RUN operation resumed.', additional_kwargs={}, response_metadata={}), HumanMessage(content='Stop', additional_kwargs={}, response_metadata={})], 'intent': 'other', 'pending_action': None, 'input_payload': InputPayload(tfr=2.0, frr=5, target_volume=9.0, temperature=21.0, chip_id=<ChipID.BAFFLE: 0>, manifold_id=<ManifoldID.LARGE: 1>, lab_pressure=2000.0, org_solvent_id=<OrgSolventID.CUSTOM: 4>, operation_mode=<OperationMode.AGENTIC: 2>, machine_mode=<MachineMode.RUN: 2>, custom_solvent=CustomSolvent(name='Stuff_v1', viscosity=1186.0, sensitivity=23.0, molar_volume=22.0)), 'last_mode_check': 1759495543.6655746}
2025-10-03 14:48:13,309 - INFO - Routing message: 'stop' (pending_action: None)
2025-10-03 14:48:13,309 - INFO - Handling STOP command...
2025-10-03 14:48:13,309 - INFO - creating snap7 client
2025-10-03 14:48:13,310 - INFO - connecting to 192.168.0.1:102 rack 0 slot 1
2025-10-03 14:48:13,464 - INFO - PLC connected (192.168.0.1)
2025-10-03 14:48:13,464 - INFO - Reading current status...
2025-10-03 14:48:13,498 - INFO - Current status code: 2
2025-10-03 14:48:13,498 - INFO - Setting STOP bit to TRUE...
2025-10-03 14:48:13,498 - INFO - Pulsing COMMANDS_RUN.b_STOP to True
2025-10-03 14:48:13,499 - INFO - Writing BOOL COMMANDS_RUN.b_START = False
2025-10-03 14:48:13,499 - INFO -   section: COMMANDS_RUN
2025-10-03 14:48:13,500 - INFO -   byte_offset: 258
2025-10-03 14:48:13,500 - INFO -   bit_offset: 0
2025-10-03 14:48:13,500 - INFO -   raw_start: 258.0
2025-10-03 14:48:13,552 - INFO - Successfully wrote COMMANDS_RUN.b_START = False
2025-10-03 14:48:13,552 - INFO - Writing BOOL COMMANDS_RUN.b_PAUSE_PLAY = False
2025-10-03 14:48:13,552 - INFO -   section: COMMANDS_RUN
2025-10-03 14:48:13,553 - INFO -   byte_offset: 258
2025-10-03 14:48:13,553 - INFO -   bit_offset: 1
2025-10-03 14:48:13,553 - INFO -   raw_start: 258.1
2025-10-03 14:48:13,628 - INFO - Successfully wrote COMMANDS_RUN.b_PAUSE_PLAY = False
2025-10-03 14:48:13,628 - INFO - Writing BOOL COMMANDS_RUN.b_CONFIRM = False
2025-10-03 14:48:13,628 - INFO -   section: COMMANDS_RUN
2025-10-03 14:48:13,629 - INFO -   byte_offset: 258
2025-10-03 14:48:13,629 - INFO -   bit_offset: 1
2025-10-03 14:48:13,629 - INFO -   raw_start: 258.2
2025-10-03 14:48:13,706 - INFO - Successfully wrote COMMANDS_RUN.b_CONFIRM = False
2025-10-03 14:48:13,706 - INFO - Writing BOOL COMMANDS_RUN.b_STOP = True
2025-10-03 14:48:13,706 - INFO -   section: COMMANDS_RUN
2025-10-03 14:48:13,707 - INFO -   byte_offset: 258
2025-10-03 14:48:13,707 - INFO -   bit_offset: 3
2025-10-03 14:48:13,707 - INFO -   raw_start: 258.3
2025-10-03 14:48:13,750 - INFO - Successfully wrote COMMANDS_RUN.b_STOP = True
2025-10-03 14:48:13,800 - INFO - Command COMMANDS_RUN.b_STOP successfully set to True and verified
2025-10-03 14:48:13,857 - INFO - Machine mode set to 1
2025-10-03 14:48:13,857 - INFO - Disconnecting from PLC...
2025-10-03 14:48:13,858 - INFO - disconnecting snap7 client
2025-10-03 14:48:13,858 - INFO - PLC disconnected
2025-10-03 14:48:13,859 - INFO - destroying snap7 client
2025-10-03 14:48:13,861 - INFO - Current state after invoke: {'messages': [HumanMessage(content='What is Tamara?', additional_kwargs={}, response_metadata={}), AIMessage(content='The TAMARA Nanoparticle Formulation System is a user-friendly, microfluidic-based platform designed for researchers who prioritize ease of use and precision in nanoparticle synthesis. It is a sophisticated instrument that enables efficient and controlled synthesis of lipid nanoparticles, offering a high level of reproducibility and accuracy in formulation design. TAMARA is a valuable tool for scientists engaged in drug delivery research and development, providing a streamlined approach to LNP synthesis.', additional_kwargs={}, response_metadata={}), HumanMessage(content='Who built it?', additional_kwargs={}, response_metadata={}), AIMessage(content='The TAMARA Nanoparticle Formulation System is manufactured by Inside Therapeutics, SAS, a company located at 25-27 rue de la Grand Font, 16000 Angouleme, France. Inside Therapeutics specializes in developing innovative solutions for nanoparticle synthesis, particularly focusing on lipid nanoparticles and related technologies.', additional_kwargs={}, response_metadata={}), HumanMessage(content='What is Samsung?', additional_kwargs={}, response_metadata={}), AIMessage(content="I'm here to provide information specifically related to lipid nanoparticle (LNP) synthesis and the TAMARA instrument from Inside Therapeutics. If you have any questions related to these topics or need assistance with LNP synthesis, feel free to ask!", additional_kwargs={}, response_metadata={}), HumanMessage(content='What are nano lipid particles?', additional_kwargs={}, response_metadata={}), AIMessage(content='Nano lipid particles, also known as lipid nanoparticles (LNPs), are particles with sizes typically ranging from 10 to 100 nanometers that are composed of lipids. These nanoparticles are specifically engineered for the encapsulation of RNA and oligonucleotides, which traditional nanoparticles like liposomes or PLGA may not efficiently encapsulate due to the negative charge of the RNA molecules. Lipid nanoparticles are commonly composed of four main types of lipids: ionizable lipids, PEGylated lipids, phospholipids, and sterol lipids. They play a crucial role in drug delivery systems, particularly for nucleic acid-based therapeutics.', additional_kwargs={}, response_metadata={}), HumanMessage(content='I want to do a run with Tamara', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters sent to PLC. Checking validation...', additional_kwargs={}, response_metadata={}), AIMessage(content='Parameters accepted by PLC. Proceeding with safety checks...', additional_kwargs={}, response_metadata={}), AIMessage(content='Ready to start RUN operation.\n\nPlease verify:\n1. Required fluids are loaded in reservoirs\n2. Chip is correctly seated and oriented\n3. Manifold is properly connected\n4. Lid is CLOSED\n5. Lines are secure\n6. Drain bottle is in place\n7. Pressure supply is within specifications\n\nAI: Ready to start RUN operation.', additional_kwargs={}, response_metadata={}), HumanMessage(content='pause the run', additional_kwargs={}, response_metadata={}), AIMessage(content="RUN operation paused. Say 'play' to resume.", additional_kwargs={}, response_metadata={}), HumanMessage(content='play', additional_kwargs={}, response_metadata={}), AIMessage(content='RUN operation resumed.', additional_kwargs={}, response_metadata={}), HumanMessage(content='Stop', additional_kwargs={}, response_metadata={}), AIMessage(content='RUN operation stopped.', additional_kwargs={}, response_metadata={})], 'intent': 'other', 'pending_action': None, 'input_payload': InputPayload(tfr=2.0, frr=5, target_volume=9.0, temperature=21.0, chip_id=<ChipID.BAFFLE: 0>, manifold_id=<ManifoldID.LARGE: 1>, lab_pressure=2000.0, org_solvent_id=<OrgSolventID.CUSTOM: 4>, operation_mode=<OperationMode.AGENTIC: 2>, machine_mode=<MachineMode.RUN: 2>, custom_solvent=CustomSolvent(name='Stuff_v1', viscosity=1186.0, sensitivity=23.0, molar_volume=22.0)), 'last_mode_check': 1759495543.6655746}
2025-10-03 14:48:17,096 - INFO - destroying snap7 client
